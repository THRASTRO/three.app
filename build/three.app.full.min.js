/* autogenerated by webmerge (compile context) */
;
/*
Three.js App Framework (https://github.com/mgreter/three.app)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
(function(a,d){function c(a,b){for(var f=a.split(/\./),k=c,g=0;g<f.length-1;g++)k[f[g]]||(k[f[g]]={}),k=k[f[g]];if(1==arguments.length)return k[f[g]];var e=typeof k[f[g]];if("object"==e){e=k[f[g]];for(var d in e)e.hasOwnProperty(d)&&(b[d]=e[d])}else if("undefined"!=e)throw Error("Namespace already taken!");return k[f[g]]=b}function b(){var a,c=!1,f=0,k=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(c=arguments[0],f++);for(a=arguments[f++];f<k;f++){var e=void 0,
d=arguments[f];for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(c&&"[object Object]"===Object.prototype.toString.call(d[e])?a[e]=b(!0,a[e],d[e]):c&&d[e]instanceof Array?("undefined"==typeof a[e]&&(a[e]=[]),a[e]=a[e].concat(d[e])):a[e]=d[e])}return a}d=a.THREEAPP;if("object"==typeof d)for(var e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);c("extend",b);c("mixin",function(a,c){if(!c||!a)debugger;a=a.prototype;c=c.prototype;for(var f in c)c.hasOwnProperty(f)&&(c[f]instanceof Array?(a[f]||(a[f]=[]),a[f]=
a[f].concat(c[f])):c[f]instanceof Function?(a[f]=c[f],b(a[f],c[f])):c[f]instanceof Object?(a[f]||(a[f]={}),b(!0,a[f],c[f])):a[f]=c[f])});c("tmpl",function(a,b){return a.replace(/%([a-zA-Z][a-zA-Z0-9]*)%/g,function(a,c){return b[c]?b[c]:"[%"+c+"%]"})});a.THREEAPP=c})(self,THREE);
(function(a,d){function c(a,b){}function b(){for(var a={},b=this.ctor,c=0;c<b.length;c++)a[b[c]]||(b[c].apply(this,arguments),a[b[c]]=!0);b=this.init;this.__proto__.wait=g;for(c=0;c<b.length;c++)a[b[c]]||(b[c].apply(this,arguments),a[b[c]]=!0)}function e(){if(0<this.pending)return this;delete this.__proto__.wait;for(var a=0;a<this.ready.length;a++)this.ready[a].apply(this,arguments);if(this.listeners){var b=this.listeners.ready||[];for(a=0;a<b.length;a++)b[a].apply(this,arguments)}delete this.pending;
this.isReady=!0;return this}function h(a,b,c){b||(b=d.Class);Array.isArray(c)||(c=[c]);if(!c)throw Error("Undefined mixin!");a.prototype.ctor||(a.prototype.ctor=[]);a.prototype.init||(a.prototype.init=[]);a.prototype.ready||(a.prototype.ready=[]);a.prototype.defaults||(a.prototype.defaults={});a.prototype.listeners||(a.prototype.listeners={});if(c&&c.length)for(var f=0,k=c.length;f<k;f++){if(!c[f])throw Error("Undefined mixin!");if(!(c[f]instanceof Function)){var e=d(c[f]);if("undefined"==typeof e)throw Error("Unknown mixin: "+
c[f]);c[f]=e}}a.prototype.listeners=d.extend(!0,{},a.prototype.listeners);for(f=0;f<c.length;f++)d.mixin(a,c[f]);d.mixin(a,b);b&&(a.prototype.__proto__=b.prototype);a.static=function(b,f){a[b]=f;return this};a.method=function(b,f){a.prototype[b]=f;return this};a.proto=function(b,f){a.prototype[b](f);return this};a.defaults=function(b){d.extend(a.prototype.defaults,b);return this};a.ctor=function(b){a.prototype.ctor.push(b);return this};a.init=function(b){a.prototype.init.push(b);return this};a.ready=
function(b){a.prototype.ready.push(b);return this};a.listen=function(b,f,c){var k=a.prototype.listeners;k[b]||(k[b]=[]);null!=c&&(f.prio=c);k[b].push(f);"ready"==b&&this.isReady&&f.call(this);return this};return a}function g(a){function b(){--c.pending;e.apply(c)}function f(a){throw a;}var c=this;c.pending++;if(!a)throw Error("Invalid wait call");if("function"==typeof a.listen)a.listen("ready",b);else if("function"==typeof a.then)a.then(b,f);else throw Error("Invalid wait promise");return e.apply(c)}
c.create=function(){var a="string"==typeof arguments[0]?[].shift.call(arguments):null,k=arguments[0]||c,g=arguments[1]||[],l=function(){this.pending=0;this.options=d.extend({},this.defaults);b.apply(this,arguments);e.apply(this,arguments)};if(a)try{eval("Klass = "+l.toString().replace(/\(\)/," "+a+"()"))}catch(x){console.warn("Could not eval new fn body\n"+x+"\n"+klass)}l.prototype.name=a;return h.call(c,l,k,g)};c.mixin=function(a){1>arguments.length&&(a=[]);return h.call(c,function(){throw Error("Can't instantiate mixins");
},null,a)};c.virtual=function(a,b){0==arguments.length&&(a=c);if(!a)throw Error("Undefined virtual base!");2>arguments.length&&(b=[]);return h.call(c,function(){throw Error("cannot instantiate virtual class");},a,b)};c.prototype.constructor=c;d("Class",c)})(THREE,THREEAPP);(function(a,d){a=d.Class.mixin().ctor(function(a,b){this.app=a;d.extend(this.options,b)});d("Options",a)})(THREE,THREEAPP);
(function(a,d){function c(a,c){return(c.prio||0)-(a.prio||0)}a=d.Class.mixin(["Options"]).ctor(function(a,c){this.listeners=d.extend(!0,{},this.listeners,this.options.listeners);this.deferred={}}).method("listen",function(a,e,d){"ready"==a&&this.isReady&&e.call(this);null!=d&&(e.prio=d);this.listeners.hasOwnProperty(a)||(this.listeners[a]=[]);a=this.listeners[a];-1==a.indexOf(e)&&a.push(e);a.sort(c)}).method("invoke",function(a){for(var b=Array.prototype.slice.call(arguments,1),c=this.listeners[a],
g=0,f=c?c.length:0;g<f;g++)c[g].apply(this,b);this.deferred[a]=!1}).method("trigger",function(a){var b=this;if(!b.deferred[a]){var c=Array.prototype.slice.call(arguments,1);b.deferred[a]=window.setTimeout(function(){for(var e=b.listeners[a],f=0,k=e?e.length:0;f<k;f++)e[f].apply(b,c);b.deferred[a]=!1},0)}});d("Events",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.mixin(["Events"]).method("required",[]).method("provided",{}).method("requires",function(a){Array.isArray(a)?this.required=this.required.concat(a):this.required.push(a);return this}).method("provides",function(a){var b=this.provided;Array.isArray(a)||(a=[a]);for(var c=0,d=a.length;c<d;++c){if(b.hasOwnProperty(a[c]))throw Error("Duplicate service provider");b[a[c]]=!0}return this});d("Plugin",a)})(THREE,THREEAPP);
(function(a,d){function c(a){for(var b in a)this.resources[b]=a[b]}function b(a,b){return this.assets[a]?this.assets[a][2].data:b}var e={},h=d.Class.mixin(["Options","Events"]).ctor(function(a,b){this.assets={};this.prefetch=c;a.resources=e;this.resources=jQuery.extend({},this.resources,this.options.resources);a.listen("loader.complete",function(a,b){for(var c=a.cbs.length,f=0;f<c;f++)a.cbs[f].assets[2]=a,a.cbs[f].resolve&&a.cbs[f].resolve(),a.complete=!0,a.data=b})}).init(function(b){var f=this,
c=b.manager,e=f.resources,d;for(d in e){var g=e[d][0],h=e[d][1];this.assets[d]=e[d];if(b.resources[h]){var n={obj:this,assets:e[d]};b.resources[h].complete?e[d][2]=b.resources[h]:this.wait(new Promise(function(a,c){n.reject=c;n.resolve=a;b.resources[h].cbs.push(n)}))}else{g=g.substr(0,1).toUpperCase();if("S"==g)var y=new a.TextLoader(c);else if("T"==g)y=new a.TextureLoader(c);else if("I"==g)y=new a.ImageLoader(c);else if("J"==g)y=new a.JsonLoader(c);else if("A"==g)y=new a.ArrayLoader(c);else if("B"==
g)y=new a.BlobLoader(c);else if("R"==g)y=new a.BinaryLoader(c);else if("O"==g)y=new a.ObjectLoader(c);else if("L"==g)y=new a.OBJLoader(c);else throw"Unknown loader type for resource";n={obj:this,assets:e[d]};this.wait(new Promise(function(a,c){n.reject=c;n.resolve=a;b.resources[h]={total:0,loaded:0,cbs:[n]};(function(a,k,e){y.load(k,function(a){b.invoke("loader.complete",e,a)},function(a){b.invoke("loader.progress",f,e,a)},c)})(g,h,b.resources[h])}))}}}).ready(function(){this.asset=b}).listen("ready",
function(){this.options.container&&this.options.container.add(this)});d("Resources",h)})(THREE,THREEAPP);THREE.ArrayLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ArrayLoader.prototype={constructor:THREE.ArrayLoader,load:function(a,d,c,b){var e=this.manager,h=e.app;e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){h.wlzma.decode(a).then(function(a){a=a.toUint8Array();d.call(this,a.buffer)}).catch(b)},c,b)):(e.setResponseType("arraybuffer"),e.load(a,d,c,b))}};THREE.BlobLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BlobLoader.prototype={constructor:THREE.BlobLoader,load:function(a,d,c,b){var e=this.manager,h=e.app;e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){h.wlzma.decode(a).then(function(a){a=new Blob(a.buffers);if("object"!=typeof a)throw Error("Invalid BLOB");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("blob"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid BLOB");},c,b))}};
THREE.DataLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.DataLoader.prototype={constructor:THREE.DataLoader,load:function(a,d,c,b){var e=this.manager,h=e.app;e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){h.wlzma.decode(a).then(function(a){a=JSON.parse(a);if("object"!=typeof a)throw Error("Invalid JSON");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("json"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid JSON");},c,b))}};
THREE.JsonLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.JsonLoader.prototype={constructor:THREE.JsonLoader,load:function(a,d,c,b){var e=this.manager,h=e.app;e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){h.wlzma.decode(a).then(function(a){a=JSON.parse(a);if("object"!=typeof a)throw Error("Invalid JSON");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("json"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid JSON");},c,b))}};
THREE.TextLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextLoader.prototype={constructor:THREE.TextLoader,load:function(a,d,c,b){var e=this.manager.app,h=new THREE.FileLoader(this.manager);a.match(/\.lzma$/)?(h.setResponseType("arraybuffer"),h.load(a,function(a){e.wlzma.decode(a).then(function(a){a=a.toString();if("string"!=typeof a)throw Error("Invalid Text");d.call(this,a)}).catch(b)},c,b)):(h.setResponseType("text"),h.load(a,d,c,b))}};
THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,d,c,b){var e=new THREE.FileLoader(this.manager),h=new THREE.Texture;e.setResponseType("arraybuffer");e.load(a,function(b){var c="application/octet-stream";a.search(/\.(jpe?g)$/)?c="image/jpeg":a.search(/\.(png)$/)?c="image/png":a.search(/\.(gif)$/)&&(c="image/gif");b=new Blob([b],{type:c});var k=new FileReader(b);h.image=document.createElementNS("http://www.w3.org/1999/xhtml","img");h.image.addEventListener("load",function(){h.format=
"image/jpeg"==c?THREE.RGBFormat:THREE.RGBAFormat;h.needsUpdate=!0;void 0!==d&&d(h)});k.addEventListener("load",function(a){h.image.src=k.result},!1);k.readAsDataURL(b)},c,b);return window.texture=h},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}};(function(a,d){var c=d.Class.virtual(a.Object3D).ctor(function(b,c){a.Object3D.call(this);this.sortObjects=this.matrixAutoUpdate=!0});d("Object3D",c)})(THREE,THREEAPP);
(function(){var a=THREEAPP.Class.virtual(THREE.Scene).ctor(function(a,c){THREE.Scene.call(this)});THREEAPP("Scene",a)})();
(function(a,d){a=d.Class.virtual(d.Object3D,["Events"]).ctor(function(a,b){this.lod=[]}).ready(function(a){a.lods.push(this);this.trigger("lod")}).listen("lod",function(){if(this.current!=this.level&&-1!=this.level){if(!this.lod[this.level]){var a=this.options.lod[this.level],b={},e;for(e in this.options.resources){var h=this.options.resources[e];b[e]=[h[0],d.tmpl(h[1],a)]}a=d.extend({},this.options,a,{resources:b,container:this});this.lod[this.level]=new this.options.ctor(this.app,a)}this.lod[this.level].isReady&&
(this.lod[this.current]&&this.remove(this.lod[this.current]),this.add(this.lod[this.level]),this.current=this.level)}});d("LOD",a)})(THREE,THREEAPP);
(function(a,d){function c(a,b,c,k){c=c.shader||"";k=k?1:0;Array.isArray(c)&&(c=c.join("\n"));return a.splice(b,k,c)}function b(a,b){if(a&&a.length)for(var f=0;f<a.length;f++){for(var k=!1,e=a[f],d=0;d<b.length;d++)e.after&&e.after.test(b[d])?(c(b,d+1,e,!1),d+=2,k=!0):e.before&&e.before.test(b[d])?(c(b,d,e,!1),d+=2,k=!0):e.replace&&e.replace.test(b[d])&&(c(b,d,e,!0),d+=1,k=!0);if(!k)throw Error("Shader Chunk not found");}}var e=d.Class.virtual(a.ShaderMaterial).ctor(function(a,b,c){a=this._args={chunks:b||
{},uniforms:c||{},parameters:a||{}};a.chunks.vertex||(a.chunks.vertex=[]);a.chunks.fragment||(a.chunks.fragment=[]);a.parameters.defines||(a.parameters.defines={})}).init(function(){var c=this._args.chunks,e=this._args.uniforms;"string"==typeof this._shaderLib&&(this._shaderLib=a.ShaderLib[this._shaderLib]||console.error("Unknown THREE.ShaderLib: "+this._shaderLib));var f=this._shaderLib,k=f.vertexShader.split(/\n+/),d=f.fragmentShader.split(/\n+/);b(c.vertex,k);b(c.fragment,d);a.ShaderMaterial.call(this,
{uniforms:a.UniformsUtils.merge([e,f.uniforms]),vertexShader:k.join("\n"),fragmentShader:d.join("\n"),lights:!0});this.type="CustomMaterial"});d("CustomMaterial",e)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.virtual(d.CustomMaterial).ctor(function(a,c,d){this._shaderLib="phong";this.isMeshPhongMaterial=!0}).init(function(){var b=this._args.parameters;this.type="MeshCustomPhongMaterial";this.color=new a.Color(16777215);this.specular=new a.Color(1118481);this.shininess=30;this.lightMap=this.map=null;this.lightMapIntensity=1;this.aoMap=null;this.aoMapIntensity=1;this.emissive=new a.Color(0);this.emissiveIntensity=1;this.bumpMap=this.emissiveMap=null;this.bumpScale=1;this.normalMap=
null;this.normalScale=new a.Vector2(1,1);this.displacementMap=null;this.displacementScale=1;this.displacementBias=0;this.envMap=this.alphaMap=this.specularMap=null;this.combine=a.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(b)});d("CustomPhong",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Clock",null,["Plugin"]).proto("provides","time").proto("provides","clock").ctor(function(b){b.time=0;b.clock=new a.Clock(!1);b.clock.speed=1/3600;b.listen("clock.pause",function(){b.clock.stop();b.clock.paused=!0;b.trigger("clock.adjusted")});b.listen("clock.resume",function(){b.clock.start();b.clock.paused=!1;b.trigger("clock.adjusted")});b.listen("clock.faster",function(){b.clock.speed*=2;b.trigger("clock.adjusted")});b.listen("clock.slower",function(){b.clock.speed/=
2;b.trigger("clock.adjusted")});b.listen("clock.reverse",function(){b.clock.speed*=-1;b.trigger("clock.adjusted")});b.listen("clock.reset",function(){b.clock.speed=1/3600;b.trigger("clock.adjusted")});b.listen("preframe",function(){var a=b.clock.getDelta();b.time+=a*b.clock.speed});b.clock.setSpeed=function(a){b.clock.speed=a;b.trigger("clock.adjusted")}}).ready(function(a){a.clock.start();a.clock.paused=!1;a.trigger("clock.adjusted")});d("Plugin.Clock",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Scene",null,["Plugin"]).proto("provides","scene").ctor(function(b){b.scene=b.options.scene?new b.options.scene(b):new a.Scene(b)});d("Plugin.Scene",c)})(THREE,THREEAPP);
(function(a,d){function c(a){a.resize(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}a=d.Class.create("AutoSize",null,["Plugin"]).ctor(function(a){addEventListener("resize",function(){c(a)},!0);c(a)});d("Plugin.AutoSize",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("WebGLRenderer",null,["Plugin"]).proto("provides","renderer").ctor(function(b){b.renderer=new a.WebGLRenderer({sortObjects:!0,antialias:!0,precision:"highp",alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,logarithmicDepthBuffer:!0});b.renderer.autoClear=!1;b.listen("resized",function(){b.renderer.setSize(b.width,b.height)});b.renderer.setSize(b.width,b.height);b.viewport.appendChild(b.renderer.domElement);b.listen("preframe",function(){b.renderer.clear()});
b.listen("render",function(){b.invoke("render-scene");b.renderer.render(b.scene,b.camera)})});d("Plugin.WebGLRenderer",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("PerspectiveCamera",null,["Plugin"]).proto("provides","camera").ctor(function(b){b.camera=new a.PerspectiveCamera(this.options.fov||65,b.width/b.height,this.options.near||1E-6,this.options.far||1E20);b.camera.position.x=1E-11;b.listen("resized",function(){b.camera.aspect=b.width/b.height;b.camera.updateProjectionMatrix()})});d("Plugin.PerspectiveCamera",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("TrackballControls",null,["Plugin"]).proto("requires","camera").proto("requires","renderer").ctor(function(b){b.controls=new a.TrackballControls(b.camera,b.renderer.domElement);b.listen("preframe",function(){b.controls.update()})});d("Plugin.TrackballControls",c)})(THREE,THREEAPP);
(function(a,d){function c(a,b){for(var c=a.cbs.length,f=0;f<c;f++)a.cbs[f].assets[2]=a,a.cbs[f].resolve&&a.cbs[f].resolve(),a.complete=!0,a.data=b}function b(){this.invoke("fetch.error",{})}function e(){1==++this.loader.completed&&this.trigger("prefetch.complete",this.loader);this.trigger("fetch.complete",this.loader)}function h(a){var b=this.loader;b.filesTotal=a[2];b.filesLoaded=a[1];this.trigger("fetch.progress",{filesTotal:b.filesTotal,filesLoaded:b.filesLoaded,bytesTotal:b.bytesTotal,bytesLoaded:b.bytesLoaded})}
function g(a,b,c){a=this.loader;0==b.total&&(b.total=c.total,a.bytesTotal+=c.total,a.filesTotal+=1);a.bytesLoaded+=c.loaded-b.loaded;b.loaded=c.loaded;this.trigger("fetch.progress",{filesTotal:a.filesTotal,filesLoaded:a.filesLoaded,bytesTotal:a.bytesTotal,bytesLoaded:a.bytesLoaded})}var f=d.Class.create("Loader",null,["Plugin"]).proto("provides","loader").ctor(function(a){a.loader=this;this.bytesLoaded=this.bytesTotal=this.filesLoaded=this.filesTotal=this.completed=0;a.listen("loader.step",h);a.listen("loader.start",
e);a.listen("loader.error",b);a.listen("loader.complete",c);a.listen("loader.progress",g)}).init(function(b){b.manager=new a.LoadingManager(function(){b.invoke("loader.start",arguments)},function(){b.invoke("loader.step",arguments)},function(){b.invoke("loader.error",arguments)});b.manager.app=b});d("Plugin.Loader",f)})(THREE,THREEAPP);
(function(a,d,c){d=c.Class.create("Progress",null,["Plugin"]).ctor(function(b){this.el=a('<div id="progressbar"/>');this.wrapper=a('<div class="indicator"/>').appendTo(this.el);this.indicator=a('<div class="bg"/>').appendTo(this.wrapper);this.text=a('<div class="text"/>').appendTo(this.el);this.el.appendTo(b.viewport);this.thresholdBytes=this.thresholdFiles=0;this.stopped=!0;this.el.hide();this.indicator.css("width","0%");var c=this;b.listen("fetch.progress",function(a){c.stopped&&(!0!==c.stopped&&
clearTimeout(c.stopped),c.el.fadeIn(200),c.stopped=!1);var b=sprintf("%d/%d (%S/%S)",a.filesLoaded,a.filesTotal,a.bytesLoaded-c.thresholdBytes,a.bytesTotal-c.thresholdBytes);c.indicator.css("width",(a.bytesLoaded-c.thresholdBytes)/(a.bytesTotal-c.thresholdBytes)*100+"%");c.text.html(b)});b.listen("fetch.complete",function(a){c.thresholdBytes=a.bytesLoaded;c.thresholdFiles=a.filesLoaded;c.stopped=setTimeout(function(){c.el.fadeOut(600,function(){c.stopped=!0})},1E3)})}).init(function(){}).ready(function(){});
c("Plugin.Progress",d)})(jQuery,THREE,THREEAPP);(function(a,d){function c(a,c,d){c||(c="f");this.uniforms[a]||(this.uniforms[a]={type:c,value:d||0});return this.uniforms[a]}a=d.Class.create("Uniforms",null,["Plugin"]).ctor(function(a){a.uniforms=[];a.uniform=c}).ready(function(a){a.hasOwnProperty("time")&&a.listen("preframe",function(){a.uniform("time").value=a.time},999999)});d("Plugin.Uniforms",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Background",null,["Plugin"]).proto("requires","renderer").proto("provides","background").ctor(function(b){b.bg=b.options.bg?new b.options.bg(b):new a.Scene(b);b.listen("render",function(){b.invoke("render-background");b.renderer.render(b.bg,b.camera)},99)});d("Plugin.Background",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("LOD",d.Object3D,["Plugin"]).proto("provides","lod").proto("requires","camera").proto("requires","ui").ctor(function(a){a.lods=[]}).ready(function(b){b.listen("update-ui",function(){var c=new a.Matrix4;c.multiplyMatrices(b.camera.projectionMatrix,b.camera.matrixWorldInverse);var d=new a.Frustum;d.setFromMatrix(c);c=b.camera.getWorldPosition();for(var g="",f=document.getElementById("lodInfo"),k=0,r=b.lods.length;k<r;k++){var l=b.lods[k].getWorldPosition(),x=c.distanceToSquared(l);
b.lods[k].inFrustum=d.intersectsSphere({center:l,radius:b.lods[k].radius||100});g+=sprintf("%02d) %.5f",k,x);if(b.lods[k].inFrustum){x*=Math.pow(b.camera.fov,2);l=b.lods[k].options.lod;var m=0,n=l.length;if(m<n&&!l[m])debugger;for(;m<n&&x<l[m].min;)++m;m==n&&(m=-1);b.lods[k].level!=m&&(b.lods[k].level=m,b.lods[k].trigger("lod"));g+=" - lvl "+m+"<br>"}else g+=" - hidden<br>"}f&&(f.innerHTML=g)})});d("Plugin.LOD",c)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("UI",null,["Plugin"]).proto("provides","ui").ctor(function(a){var b=this;b.frames=9999;a.listen("postframe",function(){6<++b.frames&&(b.frames=0,a.trigger("update-ui"))})});d("Plugin.UI",a)})(THREE,THREEAPP);
var StatsGPU=function(){function a(a,b,c){a=document.createElement(a);a.id=b;a.style.cssText=c;return a}function d(b,c,f){var d=a("div",b,"padding:0 0 3px 3px;text-align:left;background:"+f),e=a("div",b+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+c);e.innerHTML=b.toUpperCase();d.appendChild(e);b=a("div",b+"Graph","width:94px;height:30px;background:"+c);d.appendChild(b);for(c=0;94>c;c++)b.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+
f));return d}function c(a){for(var b=r.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";k=a}function b(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+"px"}var e=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,h=e(),g=h,f=0,k=0,r=a("div","statsGPU","width:100px;opacity:0.9;cursor:pointer");r.addEventListener("mousedown",function(a){a.preventDefault();c(++k%r.children.length)},!1);var l=0,x=Infinity,m=0,n=d("fps","#0ff","#002"),
y=n.children[0],u=n.children[1];r.appendChild(n);var v=0,E=Infinity,z=0;n=d("ms","#0f0","#020");var N=n.children[0],A=n.children[1];r.appendChild(n);if(self.performance&&self.performance.memory){var G=0,D=Infinity,H=0;n=d("mb","#f08","#201");var C=n.children[0],t=n.children[1];r.appendChild(n)}c(k);return{REVISION:14,domElement:r,setMode:c,begin:function(){h=e()},end:function(){var a=e();v=a-h;E=Math.min(E,v);z=Math.max(z,v);N.textContent=(v|0)+" MS ("+(E|0)+"-"+(z|0)+")";b(A,v/200);f++;if(a>g+1E3&&
(l=Math.round(1E3*f/(a-g)),x=Math.min(x,l),m=Math.max(m,l),y.textContent=l+" FPS ("+x+"-"+m+")",b(u,l/100),g=a,f=0,void 0!==G)){var c=performance.memory.usedJSHeapSize,d=performance.memory.jsHeapSizeLimit;G=Math.round(9.54E-7*c);D=Math.min(D,G);H=Math.max(H,G);C.textContent=G+" MB ("+D+"-"+H+")";b(t,c/d)}return a},update:function(){h=this.end()}}};"object"===typeof module&&(module.exports=StatsGPU);
(function(a,d){a=d.Class.create("MonitorGPU",null,["Plugin"]).ready(function(a){var b=new StatsGPU;a.viewport.appendChild(b.domElement);a.listen("preframe",function(){b.begin()});a.listen("postframe",function(){b.end()})});d("Plugin.MonitorGPU",a)})(THREE,THREEAPP);
(function(a){function d(){var a=arguments[0],b=d.cache;b[a]&&b.hasOwnProperty(a)||(b[a]=d.parse(a));return d.format.call(null,b[a],arguments)}function c(a){return"number"===typeof a?"number":"string"===typeof a?"string":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=/[^T]/,e=/[^v]/,h=/[diefg]/,g=/bcdiefguxXS/,f=/[j]/,k=/^[^\x25]+/,r=/^\x25{2}/,l=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxXSDR])/,x=/^([a-z_][a-z_\d]*)/i,m=/^\.([a-z_][a-z_\d]*)/i,
n=/^\[(\d+)\]/,y=/^[\+\-]/;d.format=function(a,k){var r=1,l=a.length,x=[],m,n,u=!0;for(m=0;m<l;m++){var t=c(a[m]);if("string"===t)x[x.length]=a[m];else if("array"===t){t=a[m];if(t[2]){var p=k[r];for(n=0;n<t[2].length;n++){if(!p.hasOwnProperty(t[2][n]))throw Error(d('[sprintf] property "%s" does not exist',t[2][n]));p=p[t[2][n]]}}else p=t[1]?k[t[1]]:k[r++];b.test(t[8])&&e.test(t[8])&&"function"==c(p)&&(p=p());if(g.test(t[8])&&"number"!=c(p)&&isNaN(p))throw new TypeError(d("[sprintf] expecting number but found %s",
c(p)));h.test(t[8])&&(u=0<=p);switch(t[8]){case "b":p=parseInt(p,10).toString(2);break;case "c":p=String.fromCharCode(parseInt(p,10));break;case "d":case "i":p=parseInt(p,10);break;case "j":p=JSON.stringify(p,null,t[6]?parseInt(t[6]):0);break;case "e":p=t[7]?parseFloat(p).toExponential(t[7]):parseFloat(p).toExponential();break;case "f":p=t[7]?parseFloat(p).toFixed(t[7]):parseFloat(p);break;case "g":p=t[7]?parseFloat(p).toPrecision(t[7]):parseFloat(p);break;case "o":p=p.toString(8);break;case "s":p=
String(p);p=t[7]?p.substring(0,t[7]):p;break;case "t":p=String(!!p);p=t[7]?p.substring(0,t[7]):p;break;case "S":if(1024>Math.abs(p))p+=" B";else{n="KiB MiB GiB TiB PiB EiB ZiB YiB".split(" ");var q=-1;do p/=1024,++q;while(1024<=Math.abs(p)&&q<n.length-1);p=p.toFixed(1)+n[q]}break;case "R":q=p/Math.PI*180;p=q%1*60;n=p%1*60;p=d("%02d\u00b0 %02d' %0.2f\"",q,p,n);break;case "D":p+=Math.PI;q=p/Math.PI*12;p=q%1*60;n=p%1*60;p=d("%02dh %02dm %0.2fs",q,p,n);break;case "T":p=c(p);p=t[7]?p.substring(0,t[7]):
p;break;case "u":p=parseInt(p,10)>>>0;break;case "v":p=p.valueOf();p=t[7]?p.substring(0,t[7]):p;break;case "x":p=parseInt(p,10).toString(16);break;case "X":p=parseInt(p,10).toString(16).toUpperCase()}if(f.test(t[8]))x[x.length]=p;else{!h.test(t[8])||u&&!t[3]?q="":(q=u?"+":"-",p=p.toString().replace(y,""));n=t[4]?"0"===t[4]?"0":t[4].charAt(1):" ";var w=t[6]-(q+p).length;w=t[6]?0<w?0<=w&&7>=w&&v[n]?v[n][w]:Array(w+1).join(n):"":"";x[x.length]=t[5]?q+p+w:"0"===n?q+w+p:w+q+p}}}return x.join("")};d.cache=
{};d.parse=function(a){for(var b,c=[],f=0;a;){if(null!==(b=k.exec(a)))c[c.length]=b[0];else if(null!==(b=r.exec(a)))c[c.length]="%";else if(null!==(b=l.exec(a))){if(b[2]){f|=1;var d=[],e=b[2],g;if(null!==(g=x.exec(e)))for(d[d.length]=g[1];""!==(e=e.substring(g[0].length));)if(null!==(g=m.exec(e)))d[d.length]=g[1];else if(null!==(g=n.exec(e)))d[d.length]=g[1];else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");
b[2]=d}else f|=2;if(3===f)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c[c.length]=b}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(b[0].length)}return c};var u=function(a,b,c){c=(b||[]).slice(0);c.splice(0,0,a);return d.apply(null,c)},v={0:" 0 00 000 0000 00000 000000 0000000".split(" ")," ":"; ;  ;   ;    ;     ;      ;       ".split(";"),_:" _ __ ___ ____ _____ ______ _______".split(" ")};"undefined"!==typeof exports?(exports.sprintf=
d,exports.vsprintf=u):(a.sprintf=d,a.vsprintf=u,"function"===typeof define&&define.amd&&define(function(){return{sprintf:d,vsprintf:u}}))})("undefined"===typeof window?this:window);
(function(a,d,c){var b=requestAnimationFrame;a=c.Class.create("ThreeApp",null,["Events","Options"]).defaults({root:".",log:{debug:!1,info:!1,warn:!0}}).ctor(function(a,b){this.frames=9999;this.viewport=a;this.root=this.options.root.split(/\/+/);c.extend(this.options,b)}).init(function(a,b){a=this;b=this.options;for(var c=this.options.plugins||[],f=[].concat(c),d=0;d<f.length;){var e=f[d].prototype.required;if(e&&e.length)++d;else{e=f.splice(d,1)[0];if(e.prototype.provided){for(var l=e.prototype.provided,
h=0;h<f.length;h++)for(var m in l){d=f[h].prototype.required;var n=(d||[]).indexOf(m);-1!=n&&d.splice(n,1)}d=0}l=e.prototype.name;e=new e(this,b[l]);c[h]=c[l]=e;a.wait&&a.wait(c[h])}}if(f.length){for(h=0;h<f.length;h++)l=f[h].name,d=f[h].prototype.required,console.warn(l,"is missing",d);throw Error("Missing or circular dependencies");}a.plugins=c}).ready(function(){var a=this;this.options.start&&window.setTimeout(function(){a.start()},0)}).method("start",function(){var a=this;a.started||a.paused||
(b(function(){a.render.call(a)}),a.started=!0)}).method("resize",function(a,b){this.width=a;this.height=b;this.invoke("resized")}).method("log",function(){this.options.log.debug&&console.log(sprintf.apply(this,arguments))}).method("warn",function(){this.options.log.warn&&console.warn(sprintf.apply(this,arguments))}).method("info",function(){this.options.log.info&&console.info(sprintf.apply(this,arguments))}).method("path",function a(a){a=a.split(/\/+/);return this.root.concat(a).join("/")}).method("render",
function(){var a=this;a.invoke("preframe");a.invoke("render");a.invoke("postframe");a.started&&b(function(){a.render.call(a)});++a.frames});c("App",a)})(self,THREE,THREEAPP);(function(a,d){a=d.Class.create("LZMA",null,["Plugin"]).proto("provides","lzma").ctor(function(a){a.wlzma=new WLZMA.Manager(3)});d("Plugin.LZMA",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Tween",null,["Plugin"]).proto("provides","tween").ready(function(a){a.listen("preframe",function(){TWEEN.update()})});d("Plugin.Tween",a)})(THREE,THREEAPP);
(function(a,d){d("CPUs",function(a,b){function c(a,b){for(var c=[],f=0,d=0,e=setInterval(function(){for(var a=0;100>a;a++);},0),g=0;g<a;g++)c[g]=new Worker(k),c[g].onmessage=function(c){d+=c.data;++f==a&&(e&&clearInterval(e),b.call(this,d))};for(g=0;g<a;g++)c[g].postMessage("start")}function d(a,b){c(a,function(c){if(f>c)return b.call(this,g);if(12<a)return console.info("CPUs",a),b.call(this,a);g=a;f=c;d(2*a,b)})}var g=0,f=0;a=a.replace(/[/]*$/,"/");var k=a+"Worker.js";d(1,b)})})(THREE,THREEAPP);
onmessage=function(a){a=0;for(var d=Date.now();d+80>Date.now();){for(var c=0;200>c;c++);a++}postMessage(a);close()};
(function(a,d){a=d.Class.mixin(["Events","Options"]).ctor(function(a,b){this.items=[];this.length=0}).defaults({softLimit:8,hardLimit:2E3,increment:2}).method("belowSoftLimit",function(a){return this.items.length<this.options.softLimit}).method("belowHardLimit",function(a){return this.items.length<this.options.hardLimit}).method("delete",function(a){isNaN(a)&&(a=this.items.indexOf(a));if(0>a||a>this.items.length)throw"cannot remove unknown group item";var b=this.items[a];this.items.splice(a,1);--this.length;
this.trigger("decrease");this.invoke("deleted",b);this.trigger("resizing")}).method("add",function(a){if(this.belowSoftLimit())this.items.push(a),this.length+=1,this.trigger("increase");else if(this.belowHardLimit())this.items.push(a),this.options.softLimit*=this.options.increment||2,this.options.softLimit>this.options.hardLimit&&(this.options.softLimit=this.options.hardLimit),this.length+=1,this.invoke("resize");else throw Error("group reached hard limit");this.invoke("inserted",a);this.trigger("resizing")}).listen("resizing",
function(){this.isReady&&this.trigger("resized")}).listen("ready",function(){this.trigger("resized")});d("Group",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Grouped",null,["Events","Options"]).ctor(function(a,b){this.length=0;this.groups=[];this.current=null;this.compacting=!1}).defaults({softLimit:3,hardLimit:2E3,increment:8,compact:.75}).method("add",function(a){this.length+=1;if(this.current){if(this.current.belowHardLimit())return this.current.add(a),this;for(var b=0;b<this.groups.length;b++)if(this.groups[b].belowHardLimit())return this.current=this.groups[b],this.current.add(a),this}this.current=new this.options.ctor(this.app,
this.options);this.groups.push(this.current);this.current.add(a);this.current.trigger("enable");return this}).method("delete",function(a){var b=0,c=-1;if(isNaN(a)){for(b=0;b<this.groups.length&&!(-1<(c=this.groups[b].indexOf(a)));b++);a=c}else for((0>a||a>=this.length)&&console.warn("access out of bound");b<this.groups.length&&!(a<this.groups[b].length);)a-=this.groups[b].length,b+=1;b!=this.groups.length&&(this.groups[b].delete(a),0==this.groups[b].length&&(this.groups[b].removed=!0,this.groups[b].trigger("disable"),
this.groups.splice(b,1)),--this.length,this.compacting||this.options.compact&&2<this.groups.length&&this.length/this.options.hardLimit<this.groups.length*this.options.compact&&this.compact(75))}).method("compact",function(a,b){var c=this;isNaN(b)&&(b=0);for(this.compacting=!0;b<this.groups.length;){if(this.groups[b].belowHardLimit()){for(;this.groups[b].belowHardLimit();){var d=this.groups.length-1,g=this.groups[d].length-1,f=this.groups[d].items[g];if(-1==g||d==b)break;this.groups[d].delete(g);this.groups[b].add(f);
0==this.groups[d].length&&(this.groups[d].removed=!0,this.groups[d].trigger("disable"),this.groups.splice(d,1))}isNaN(a)||setTimeout(function(){c.compact(a,b)},a);break}b+=1}this.compacting=!1});d("Grouped",a)})(THREE,THREEAPP);(function(a,d){a=d.Class.create("Tasker",null,["Plugin"]).proto("provides","tasker").ctor(function(a,b){a.tasker=new d.Tasker(a,b)}).init(function(a){this.wait(a.tasker)});d("Plugin.Tasker",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Scheduler",null,["Plugin"]).proto("provides","scheduler").ctor(function(a){a.scheduler=new d.Scheduler(a)}).init(function(a){a.listen("postframe",function(){a.scheduler.frame()})});d("Plugin.Scheduler",a)})(THREE,THREEAPP);GrowingPacker=function(){};
GrowingPacker.prototype={fit:function(a){var d,c,b=a.length;this.root={x:0,y:0,w:0<b?a[0].w:0,h:0<b?a[0].h:0};for(d=0;d<b;d++){var e=a[d];(c=this.findNode(this.root,e.w,e.h))?e.fit=this.splitNode(c,e.w,e.h):e.fit=this.growNode(e.w,e.h)}},findNode:function(a,d,c){return a.used?this.findNode(a.right,d,c)||this.findNode(a.down,d,c):d<=a.w&&c<=a.h?a:null},splitNode:function(a,d,c){a.used=!0;a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c};a.right={x:a.x+d,y:a.y,w:a.w-d,h:c};return a},growNode:function(a,d){var c=
a<=this.root.w,b=d<=this.root.h,e=c&&this.root.w>=this.root.h+d;return b&&this.root.h>=this.root.w+a?this.growRight(a,d):e?this.growDown(a,d):b?this.growRight(a,d):c?this.growDown(a,d):null},growRight:function(a,d){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:a,h:this.root.h}};return(node=this.findNode(this.root,a,d))?this.splitNode(node,a,d):null},growDown:function(a,d){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+d,down:{x:0,y:this.root.h,
w:this.root.w,h:d},right:this.root};return(node=this.findNode(this.root,a,d))?this.splitNode(node,a,d):null}};
(function(a,d){function c(a){var b=this.context,c=this.options;b.font=(a.fontSize||c.fontSize)+"px "+(a.fontFamily||c.fontFamily);b.fillStyle=a.color||c.fillStyle;b.strokeStyle=a.stroke||c.strokeStyle;b.lineWidth=a.lineWidth||c.lineWidth}function b(a){var b=a.fit,c=this.context,f=this.options;if(a.background||f.background)c.fillStyle=a.background||f.background,c.fillRect(b.x,b.y,a.w,a.h);if(a.borderStyle||f.borderStyle)c.strokeStyle=a.borderStyle||f.borderStyle,c.lineWidth=a.borderWidth||f.borderWidth||
1,c.rect(b.x,b.y,a.w,a.h),c.stroke()}function e(a){var b=a.fit,c=b.x+2;b=b.y+a.h;b=b-2-Math.round(a.h/6);var f=this.context,d=this.options;(a.stroke||d.strokeStyle)&&f.strokeText(a.txt,c,b);(a.color||d.fillStyle)&&f.fillText(a.txt,c,b)}function h(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}var g=new GrowingPacker;a=d.Class.create("Labels",null,["Group"]).defaults({hardLimit:8192,fontSize:10,fontFamily:"Tahoma, sans",strokeStyle:"#0F0F0F",lineWidth:1}).ctor(function(a){this.canvas=
document.createElement("canvas");this.context=this.canvas.getContext("2d");a.viewport.appendChild(this.canvas);this.canvas.style.position="absolute";this.canvas.style.display="none";this.canvas.style.left="0px";this.canvas.style.top="0px";this.canvas.height=128;this.canvas.width=128}).listen("resized",function(){this.items.sort(function(a,b){return Math.max(b.w,b.h)-Math.max(a.w,a.h)});for(var a=0;a<this.length;a+=1)delete this.items[a].fit;g.fit(this.items);a=g.root;var d=this.canvas,r=this.context;
d.width=h(a.w);d.height=h(a.h);r.clearRect(0,0,d.width,d.height);for(a=0;a<this.length;a+=1)b.call(this,this.items[a]),c.call(this,this.items[a]),e.call(this,this.items[a]);this.invoke("texture.drawn")}).listen("inserted",function(a){var b=this.context,f=this.options;c.call(this,a);a.h=2+(a.fontSize||f.fontSize)+2;b=b.measureText(a.txt);a.w=2+b.width+2});d("Labels",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Labels",null,["Plugin"]).proto("provides","labels").defaults({groupier:!0}).ctor(function(a){a.labels=this.options.groupier?new d.Grouped(a,{ctor:d.Objects.Labels,hardLimit:8192,parent:a.scene}):new d.Objects.Labels(a,{hardLimit:65536,parent:a.scene})});d("Plugin.Labels",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Labels",a.Points,["Resources","Labels"]).defaults({color:16711680}).ctor(function(a){this.prefetch({glsl_vert:["S",a.path("shaders/labels.vert")],glsl_frag:["S",a.path("shaders/labels.frag")]})}).ready(function(){var b=this,c=b.canvas,d=b.options,g=d.hardLimit,f=new a.InstancedBufferGeometry,k=new Float32Array(3*g);g=new Float32Array(4*g);f.addAttribute("position",new a.BufferAttribute(new Float32Array(3),3));f.addAttribute("offset",new a.InstancedBufferAttribute(k,
3,1));f.addAttribute("uvs",new a.InstancedBufferAttribute(g,4,1));b.texture=new a.Texture(b.canvas);c=new a.RawShaderMaterial({uniforms:{map:{type:"t",value:b.texture},appWidth:{type:"f",value:app.width},appHeight:{type:"f",value:app.height},texWidth:{type:"f",value:c.width},texHeight:{type:"f",value:c.height}},blending:a.AdditiveBlending,vertexShader:b.asset("glsl_vert"),fragmentShader:b.asset("glsl_frag"),transparent:!0,depthTest:!1});a.Points.call(b,f,c);b.frustumCulled=!1;d.parent&&d.parent.add(b);
f.maxInstancedCount=b.items.length;b.app.listen("preframe",function(){f.attributes.offset.needsUpdate=!0;for(var a=0;a<b.items.length;a++){var c=b.items[a];c.position&&(k[3*a]=c.position.x,k[3*a+1]=c.position.y,k[3*a+2]=c.position.z)}});b.app.listen("resized",function(){b.material.uniforms.appWidth.value=b.app.width;b.material.uniforms.appHeight.value=b.app.height})}).listen("resized",function(){for(var a=this.canvas.width,c=this.canvas.height,d=this.geometry.attributes.uvs.array,g=0;g<this.items.length;g++){var f=
this.items[g];d[4*g]=f.fit.x;d[4*g+1]=f.fit.y;d[4*g+2]=f.w;d[4*g+3]=f.h}this.geometry.attributes.offset.needsUpdate=!0;this.geometry.attributes.uvs.needsUpdate=!0;this.material.uniforms.texWidth.value=a;this.material.uniforms.texHeight.value=c;this.geometry.maxInstancedCount=this.items.length}).listen("texture.drawn",function(){this.texture.needsUpdate=!0});d("Objects.Labels",c)})(THREE,THREEAPP);
(function(a,d){function c(a,b){var c=b.buffers();if(0!=c.size){a.task=b;b.worker=a;this.load+=1;var f=[],d=[];f.push(c.size);f.push(c.cmds||0);f.push(c.args);b.invoke("updateUniforms");f.push(c.uniforms);var e=c.input,g=c.shareds,h=e?e.length:0,y=g.length;f.push(h+y);for(var u=0;u<h;u++)f.push(e[u]);for(u=0;u<y;u++)f.push(g[u]);e=c.backups;c=c.uniforms;g=e.length;for(u=0;u<g;u++)f.push(e[u]);for(u=0;u<f.length;u++)f[u]&&f[u].buffer&&d.push(f[u].buffer);for(u=0;u<c.length;u++)c[u]&&c[u].buffer&&d.push(c[u].buffer);
a.t_start=Date.now();b.invoke("calculate",a);this.invoke("calculate",b,a);a.postMessage(f,d);a.idle=!1}}function b(a){var b=this.task,d=this.parent,e=a.data[0],g=a.data[1],h=a.data[2],m=a.data[3],n=b.tbuffers;g&&!isNaN(g.length)&&(n.cmds=g);n.args=h;n.uniforms=m;g=n.input;m=n.backups;h=n.shareds;n.backups=n.results;n.results=m;g=g?g.length:0;h=h.length;for(m=0;m<g;m++)n.input[m]=a.data[5+m];for(m=0;m<h;m++)n.shareds[m]=a.data[5+g+m];var y=a.data.length-5-g-h;for(m=0;m<y;m++)n.results[m]=a.data[5+
g+h+m];--d.load;d.tasks+=e;d.batches+=1;this.task=b.worker=null;this.idle=!0;this.t_result=Date.now();this.t_busy+=this.t_result-this.t_start;0<d.queue.length&&(a=d.queue.shift(),a.queued=!1,c.call(d,this,a));d.invoke("calculated",b,this);b.invoke("calculated",this)}function e(a){if(a.data.run)this.onmessage=b;else throw Error("unexpected message");}var h=0;a=d.Class.create("Tasker",null,["Events","Options"]).ctor(function(){this.PLUGINS={};this.plugins=[];this.workers=[];this.queue=[];this.batches=
this.tasks=this.load=0}).defaults({threads:0,maxqueue:32768,taskerUrl:"Worker.js",root:"../src"}).init(function(){var a=this,b=a.options;this.wait(new Promise(function(c){0==b.threads?d.CPUs(a.path("CPUs"),function(b){a.threads=parseInt(Math.min(b/1.3,6));c()}):(a.threads=b.threads,c())}))}).ready(function(){var a=this,b=a.workers,d=this.options.taskerUrl;if(!a.started){for(var h=0;h<a.threads;h+=1)b[h]=new Worker(a.path(d)),b[h].onmessage=e,b[h].parent=a,b[h].idle=!0,b[h].id=h,b[h].t_busy=0,b[h].postMessage({plugins:a.plugins});
a.t_start=Date.now();if(0<a.queue.length&&(a=this,b=a.workers,a.isIdle()))for(h=0;h<b.length;++h)if(b[h].idle){d=a.queue.shift();c.call(a,b[h],d);d.queued=!1;break}}}).method("path",function(a){return this.options.root.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,"")}).method("register",function(a){var b=this.plugins;if(this.started)throw Error("Cannot register after start");if(!a.api)throw Error("Plugin must have a task API class");a.id=b.length;var c=a.api;isNaN(c.classid)&&(c.classid=h++);a.args=c.args;
a.classid=c.classid;a.results=c.results;a.uniforms=c.uniforms;c.cmds&&(a.name=c.cmds);delete a.base;b.push(a);if(this.PLUGINS[a.name])throw Error("Plugin already exists");this.PLUGINS[a.name]=a}).method("push",function(a){if(a.queued||a.worker)throw"task already busy"+a.queued;var b=a.tasker=this,d=b.workers;if(b.isReady&&b.isIdle())for(var e=0;e<d.length;++e)if(d[e].idle){c.call(b,d[e],a);return}if(b.queue.length>=b.options.maxqueue)throw Error("Tasker queue limit exhausted");b.queue.push(a);a.queued=
!0}).method("isIdle",function(){return this.ready?this.load<this.threads:!1});d("Tasker",a)})(THREE,THREEAPP);
(function(a,d){var c=[0,0,1,0,0,1,2];a=d.Class.create("Scheduler").ctor(function(a){this.app=a;a.scheduler=this;this.tasker=a.tasker;this.batches=0;this.plan=[[],[],[]];for(a=0;3>a;a++)this.plan[a].it=0,this.plan[a].done=0,this.plan[a].onTime=0,this.plan[a].delayed=0,this.plan[a].completed=0;this.ticks=this.it=0}).defaults({}).init(function(a){this.tasker.listen("calculated",function(b,c){a.scheduler.plan[b.prio].done++;a.scheduler.tick()})}).ready(function(){}).method("frame",function(){for(var a=
this.it=this.done=0;3>a;a++)this.plan[a].done>=this.plan[a].length?(this.plan[a].done=0,this.plan[a].it=0,this.plan[a].completed++,this.plan[a].late||this.plan[a].onTime++,this.plan[a].late=!1):(this.plan[a].late=!0,this.plan[a].delayed++),this.plan[a].last=!1;this.tick()}).method("tick",function(){for(;this.tasker.isIdle()&&3>this.done;){var a=this.plan[this.it];if(a.it>=a.length)a.last||(a.last=!0,this.done+=1);else{var d=a[a.it];d.prio=this.it;this.tasker.push(d);a.it++}this.ticks=6==this.ticks?
0:this.ticks+1;this.it=c[this.ticks]}}).method("push",function(a,c){this.plan[c].push(a);this.batches+=1;this.tick()}).method("remove",function(a,c){c=this.plan[c];a=isNaN(a)?c.indexOf(a):a;0>a||(c.splice(a,1),--this.batches)});d("Scheduler",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.virtual(d.Group).ctor(function(){this.worker=null;this.queued=!1;this.tbuffers={size:0,busy:!1,stale:!0,allocated:0,results:[],backups:[],shareds:[],uniforms:[],args:[]}}).method("buffers",function(a){if(this.tbuffers.stale){a=this.items.length;var b=this.tbuffers.allocated,c=this.options.hardLimit,d=this.options.increment,g=this.api.cmds;if(0!=a){for(;a>b;)b=Math.min(c,Math.max(10,b)*d);c=[];d=[];for(var f=[],k=this.api.results||[],r=this.api.shared||[],l=0;l<k.length;l++){var x=
isNaN(k[l])?k[l].length:k[l];x=0>x?-x:x*b;c[l]=new Float32Array(x);d[l]=new Float32Array(x)}for(l=0;l<r.length;l++)x=isNaN(r[l])?r[l].length:r[l],x=0>x?-x:x,f[l]=new Float32Array(x);"string"==typeof g&&(g=this.tasker.PLUGINS[g].id);this.tbuffers={size:a,busy:!1,stale:!1,allocated:b,results:c,backups:d,shareds:f,uniforms:new Float32Array(this.api.uniforms),args:new Float32Array(this.api.args*b),cmds:isNaN(g)?new Float32Array(b):g}}this.tbuffers.stale=!1;this.invoke("syncArguments");this.tbuffers.size=
this.items.length}return this.tbuffers}).listen("calculated",function(a){a=this.tbuffers;a.stale||this.invoke("syncResults");a.tstamp=Date.now()-this.tasker.t_start}).listen("resized",function(){this.tbuffers.stale=!0});d("Batch",a)})(THREE,THREEAPP);
var StatsCPU=function(a){function d(a,b,c){a=document.createElement(a);a.id=b;a.style.cssText=c;return a}function c(a,b,c,f){var e=d("div",a,"padding:0 0 3px 3px;text-align:left;background:"+c),k=d("div",a+"Text","font-family:Tahoma,Helvetica,Arial,sans-serif;font-size:8px;font-weight:bold;line-height:15px;color:"+b);k.innerHTML=a.toUpperCase();e.appendChild(k);k=94/f;a=d("div",a+"Graph","width:94px;height:30px;background:"+b);e.appendChild(a);for(b=0;b<f;b++){var g=parseInt(k)==k?k+"px":100/f+"%";
a.appendChild(d("span","","width:"+g+";height:30px;float:left;opacity:0.9;background:"+c))}return e}function b(a){for(var b=u.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";x=a}function e(b,c){Date.now();if(b.firstChild)for(F.style.background="rgba("+7*n+", 64, 0, 1)",c=0;c<b.children.length;c++){var d=y[c]||0;a.workers[c].idle||(d=1);b.children[c].style.height=Math.max(Math.min(30,30-30*d),.25)+"px"}}function h(a,b){a.appendChild(a.firstChild).style.height=Math.max(Math.min(30,
30-30*b),.25)+"px"}function g(){for(var a=Date.now(),b=a-M,c=0;c<app.tasker.workers.length;c++)J[c]&&(y[c]=(app.tasker.workers[c].t_busy-J[c])/b),J[c]=app.tasker.workers[c].t_busy;M=a}function f(a){var b="";1E10<=a?(a/=1E9,b="G"):1E7<=a?(a/=1E6,b="M"):1E4<=a&&(a/=1E3,b="K");a=parseInt(a);return a+b}var k=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,r=k(),l=r,x=0,m=0,n=0;setInterval(function(){m++},20);setInterval(function(){n=Math.abs(50-m);m=0},1E3);var y=
[],u=d("div","statsCPU","width:100px;opacity:0.9;cursor:pointer");u.addEventListener("mousedown",function(a){a.preventDefault();b(++x%u.children.length)},!1);var v=0,E=0,z=c("tasks","#306","#ccc",94),N=z.children[0],A=z.children[1];u.appendChild(z);var G=0,D=0;z=c("batches","#09f","#ccc",94);var H=z.children[0],C=z.children[1];u.appendChild(z);var t=0,p=0;z=c("queues","#99f","#339",94);var q=z.children[0],w=z.children[1];u.appendChild(z);var F,K,L,J=[],M=0;a.listen("ready",function(){F=c("workers",
"#0f0","#020",a.threads);K=F.children[0];L=F.children[1];u.appendChild(F);b(3);for(var d=0;d<a.threads;d+=1)a.workers[d].busy=0,a.workers[d].idling=0;setInterval(g,1E3)});b(x);return{REVISION:14,domElement:u,setMode:b,begin:function(){r=k()},end:function(){var b=k();if(b>l+250){v=Math.round(1E3*a.tasks/(b-l));E=Math.max(E,v);N.textContent=f(v)+" TSK ("+f(E)+")";h(A,v/E);G=Math.round(1E3*a.batches/(b-l));D=Math.max(D,G);H.textContent=f(G)+" BAT ("+f(D)+")";h(C,G/D);t=Math.round(1E3*a.queue.length/
(b-l));p=Math.max(p,t);q.textContent=f(t)+" QUE ("+f(p)+")";h(w,t/p);if(L){e(L);var c=a.isIdle()?"":"BSY";K.textContent="CPUS "+c+" ("+a.threads+")";for(c=0;c<a.workers.length;c+=1)a.workers[c].busy=0,a.workers[c].idling=0}l=b;a.tasks=0;a.batches=0}return b},update:function(){r=this.end();e(L)}}};"object"===typeof module&&(module.exports=StatsCPU);
(function(a,d){a=d.Class.create("DATUI",null,["Plugin"]).proto("provides","datui").ctor(function(a){a.datui=new dat.GUI}).init(function(a){a.datui.close()});d("Plugin.DATUI",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("MonitorCPU",null,["Plugin"]).proto("requires","tasker").ready(function(a){var b=new StatsCPU(a.tasker);a.viewport.appendChild(b.domElement);a.listen("preframe",function(){b.begin()},-99999);a.listen("postframe",function(){b.end()},99999)});d("Plugin.MonitorCPU",a)})(THREE,THREEAPP);var LZMA=LZMA||{};
(function(a){a.iStream=function(a){this.array=new Uint8Array(a);this.size=a.byteLength;this.offset=0};a.iStream.prototype.readByte=function(){return this.array[this.offset++]};a.oStream=function(d){this.size=0;this.buffers=[];d=d||[];for(var c=0,b=d.length;c<b;c++)if(d[c]instanceof a.oStream)for(var e=d[c].buffers,h=0;h<e.length;h++)this.buffers.push(d[c].buffers[h]),this.size+=d[c].buffers[h].length;else this.buffers.push(d[c]),this.size+=d[c].length};a.oStream.prototype.writeBytes=function(a,c){if(c<=
a.byteLength)this.buffers.push(a.slice(0,c));else throw Error("Buffer too small?");this.size+=c};a.oStream.prototype.toUint8Array=function(){var a=this.size,c=this.buffers;if(1==c.length)return c[0];try{for(var b=new Uint8Array(a),e=0,h=0;e<c.length;e++)b.set(c[e],h),h+=c[e].length;c[0]=b;c.length=1;return b}catch(g){console.error("Error allocating Uint8Array of size: ",a),console.error("Message given was: ",g.toString())}return null};a.oStream.prototype.forEach=function(a){for(var c=0;c<this.buffers.length;c++)a.call(this,
this.buffers[c])};a.oStream.prototype.toCodePoints=function(){a.UTF8||this.toUint8Array();return a.UTF8.decode(this.toUint8Array())};a.oStream.prototype.toString=function(){var d=this.buffers,c="";a.UTF8&&(d=[this.toCodePoints()]);for(var b=0,e=d.length;b<e;b++)for(var h=0,g=d[b].length;h<g;h++)c+=String.fromCharCode(d[b][h]);return c}})(LZMA);var UTF8=UTF8||{};
(function(a){function d(a){for(var b=0,c=a.length;c--;)128!=(a[c]&192)&&++b;return b}function c(){if(g>=h)throw Error("Invalid byte index");var a=e[g++]&255;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function b(){var a;if((g|0)>(h|0))throw Error("Invalid byte index");var b=e[g]&255;g=g+1|0;if(0==(b&128))return b;if(192==(b&224)){var d=c();b=(b&31)<<6|d;if(128<=b)return b;throw Error("Invalid continuation byte");}if(224==(b&240)){d=c();var l=c();b=(b&15)<<12|d<<6|l;if(2048<=
b){if(55296<=b&&57343>=b)throw Error("Lone surrogate U+"+b.toString(16).toUpperCase()+" is not a scalar value");return b}throw Error("Invalid continuation byte");}if(240==(b&248)&&(d=c(),l=c(),a=c(),b=(b&7)<<18|d<<12|l<<6|a,65536<=b&&1114111>=b))return b;throw Error("Invalid UTF-8 detected");}var e,h,g;a.count=d;a.decode=function(a){var c=0,f=d(a);f=new Uint16Array(f);g=0;e=a;h=a.length;for(2<(h|0)&239==(e[0]|0)&187==(e[1]|0)&191==(e[2]|0)&&(g=3);(g|0)<(h|0);)a=b()|0,f[c++]=a;return f};"undefined"!=
typeof LZMA&&(LZMA.UTF8=a)})(UTF8);LZMA=LZMA||{};var WLZMA=WLZMA||{};
(function(a,d){function c(b){var c=b.data[0],d=b.data[1];b=b.data[2];var g=this.manager;this.idle=!0;g.idle++;if(-1==g.next||g.next>c)g.next=c;b?this.reject(b):d?this.resolve(new a.oStream(d)):this.reject(null);this.reject=this.resolve=null;e.call(g)}function b(a){var b=this.manager;if("ready"===a.data){if(this.onmessage=c,this.isReady=!0,b.started++,b.started==b.workers.length){for(a=b.listeners;a.length;)a.shift().call(b);b.isReady=!0}}else throw Error("Worker did not startup!?");}function e(){for(;this.queue.length&&
this.idle;){var a=this.next,b=this.queue.shift();"function"==typeof b[0]&&(b[0]=b[0].call(this));var c=this.workers[a];if(!c)debugger;c.postMessage([a,b[0]],[b[0]]);c.resolve=b[1];c.reject=b[2];c.idle=!1;for(--this.idle;a<this.workers.length;a++)if(this.workers[a].idle){this.next=a;return}this.next=-1}}function h(b){"object"==typeof b&&(b instanceof a.iStream&&(b=b.array),b instanceof Uint8Array&&(b=b.buffer));return b}d.wrkurl=d.wrkurl||"wlzma.wrk.js";d.Manager=function(a,c){a=a||6;this.queue=[];
this.workers=[];c=c||d.wrkurl;this.listeners=[];this.isReady=!1;for(var f=this.started=0;f<a;f++){var e=new Worker(c);e.onmessage=b;this.workers.push(e);e.manager=this;e.idle=!0}this.idle=a;this.next=0};d.Manager.prototype.ready=function(a){this.isReady?a.call(this):this.listeners.push(a)};d.Manager.prototype.decode=function(a){var b=this;a=h(a);return new Promise(function(c,d){b.queue.push([a,c,d]);e.call(b)})}})(LZMA,WLZMA);
(function(a,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):"object"===typeof exports?exports.dat=d():a.dat=d()})(this,function(){return function(a){function d(b){if(c[b])return c[b].exports;var e=c[b]={exports:{},id:b,loaded:!1};a[b].call(e.exports,e,e.exports,d);e.loaded=!0;return e.exports}var c={};d.m=a;d.c=c;d.p="";return d(0)}([function(a,d,c){d=c(1);a.exports=(d&&d.__esModule?d:{default:d}).default},function(a,d,
c){function b(a){return a&&a.__esModule?a:{default:a}}d.__esModule=!0;a=c(2);a=b(a);var e=c(6);e=b(e);var h=c(3);h=b(h);var g=c(7);g=b(g);var f=c(8);f=b(f);var k=c(10);k=b(k);var r=c(11);r=b(r);var l=c(12);l=b(l);var x=c(13);x=b(x);var m=c(14);m=b(m);var n=c(15);n=b(n);var y=c(16);y=b(y);var u=c(9);u=b(u);c=c(17);c=b(c);d.default={color:{Color:a.default,math:e.default,interpret:h.default},controllers:{Controller:g.default,BooleanController:f.default,OptionController:k.default,StringController:r.default,
NumberController:l.default,NumberControllerBox:x.default,NumberControllerSlider:m.default,FunctionController:n.default,ColorController:y.default},dom:{dom:u.default},gui:{GUI:c.default},GUI:c.default}},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){Object.defineProperty(a,b,{get:function(){if("RGB"===this.__state.space)return this.__state[b];l.recalculateRGB(this,b,c);return this.__state[b]},set:function(a){"RGB"!==this.__state.space&&(l.recalculateRGB(this,b,
c),this.__state.space="RGB");this.__state[b]=a}})}function h(a,b){Object.defineProperty(a,b,{get:function(){if("HSV"===this.__state.space)return this.__state[b];l.recalculateHSV(this);return this.__state[b]},set:function(a){"HSV"!==this.__state.space&&(l.recalculateHSV(this),this.__state.space="HSV");this.__state[b]=a}})}d.__esModule=!0;a=c(3);var g=b(a);a=c(6);var f=b(a);a=c(4);var k=b(a);c=c(5);var r=b(c),l=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.__state=g.default.apply(this,arguments);if(!1===this.__state)throw Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}a.prototype.toString=function(){return(0,k.default)(this)};a.prototype.toHexString=function(){return(0,k.default)(this,!0)};a.prototype.toOriginal=function(){return this.__state.conversion.write(this)};return a}();l.recalculateRGB=function(a,b,c){if("HEX"===a.__state.space)a.__state[b]=f.default.component_from_hex(a.__state.hex,c);else if("HSV"===a.__state.space)r.default.extend(a.__state,
f.default.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw Error("Corrupted color state");};l.recalculateHSV=function(a){var b=f.default.rgb_to_hsv(a.r,a.g,a.b);r.default.extend(a.__state,{s:b.s,v:b.v});r.default.isNaN(b.h)?r.default.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=b.h};l.COMPONENTS="r g b h s v hex a".split(" ");e(l.prototype,"r",2);e(l.prototype,"g",1);e(l.prototype,"b",0);h(l.prototype,"h");h(l.prototype,"s");h(l.prototype,"v");Object.defineProperty(l.prototype,
"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}});Object.defineProperty(l.prototype,"hex",{get:function(){this.__state.hex=f.default.rgb_to_hex(this.r,this.g,this.b);return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});d.default=l},function(a,d,c){d.__esModule=!0;a=(a=c(4))&&a.__esModule?a:{default:a};var b=(c=c(5))&&c.__esModule?c:{default:c},e=[{litmus:b.default.isString,conversions:{THREE_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString(),0)}},write:a.default},SIX_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9]{6})$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString(),0)}},write:a.default},CSS_RGB:{read:function(a){a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a.default},
CSS_RGBA:{read:function(a){a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a.default}}},{litmus:b.default.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.default.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!==a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,
a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!==a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.default.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.default.isNumber(a.r)&&b.default.isNumber(a.g)&&b.default.isNumber(a.b)&&b.default.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.default.isNumber(a.r)&&b.default.isNumber(a.g)&&
b.default.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.default.isNumber(a.h)&&b.default.isNumber(a.s)&&b.default.isNumber(a.v)&&b.default.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.default.isNumber(a.h)&&b.default.isNumber(a.s)&&b.default.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,
s:a.s,v:a.v}}}}}],h=void 0,g=void 0;d.default=function(){g=!1;var a=1<arguments.length?b.default.toArray(arguments):arguments[0];b.default.each(e,function(c){if(c.litmus(a))return b.default.each(c.conversions,function(c,d){h=c.read(a);if(!1===g&&!1!==h)return g=h,h.conversionName=d,h.conversion=c,b.default.BREAK}),b.default.BREAK});return g}},function(a,d){d.__esModule=!0;d.default=function(a,b){var c=a.__state.conversionName.toString(),d=Math.round(a.r),g=Math.round(a.g),f=Math.round(a.b),k=a.a,
r=Math.round(a.h),l=a.s.toFixed(1),x=a.v.toFixed(1);if(b||"THREE_CHAR_HEX"===c||"SIX_CHAR_HEX"===c){for(a=a.hex.toString(16);6>a.length;)a="0"+a;return"#"+a}return"CSS_RGB"===c?"rgb("+d+","+g+","+f+")":"CSS_RGBA"===c?"rgba("+d+","+g+","+f+","+k+")":"HEX"===c?"0x"+a.hex.toString(16):"RGB_ARRAY"===c?"["+d+","+g+","+f+"]":"RGBA_ARRAY"===c?"["+d+","+g+","+f+","+k+"]":"RGB_OBJ"===c?"{r:"+d+",g:"+g+",b:"+f+"}":"RGBA_OBJ"===c?"{r:"+d+",g:"+g+",b:"+f+",a:"+k+"}":"HSV_OBJ"===c?"{h:"+r+",s:"+l+",v:"+x+"}":
"HSVA_OBJ"===c?"{h:"+r+",s:"+l+",v:"+x+",a:"+k+"}":"unknown format"}},function(a,d){d.__esModule=!0;var c=Array.prototype.forEach,b=Array.prototype.slice;a={BREAK:{},extend:function(a){this.each(b.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach(function(c){this.isUndefined(b[c])||(a[c]=b[c])}.bind(this))},this);return a},defaults:function(a){this.each(b.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach(function(c){this.isUndefined(a[c])&&(a[c]=b[c])}.bind(this))},
this);return a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;0<=d;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(a,b,d){if(a)if(c&&a.forEach&&a.forEach===c)a.forEach(b,d);else if(a.length===a.length+0){var e;var k=0;for(e=a.length;k<e&&!(k in a&&b.call(d,a[k],k)===this.BREAK);k++);}else for(k in a)if(b.call(d,a[k],k)===this.BREAK)break},defer:function(a){setTimeout(a,0)},debounce:function(a,b){var c=void 0;return function(){var d=arguments,
e=!c;clearTimeout(c);c=setTimeout(function(){c=null},b);e&&a.apply(this,d)}},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return isNaN(a)}),isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===
a+0},isString:function(a){return a===a+""},isBoolean:function(a){return!1===a||!0===a},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}};d.default=a},function(a,d){d.__esModule=!0;var c=void 0;d.default={hsv_to_rgb:function(a,c,d){var b=a/60-Math.floor(a/60),f=d*(1-c),e=d*(1-b*c);c=d*(1-(1-b)*c);a=[[d,c,f],[e,d,f],[f,d,c],[f,e,d],[c,f,d],[d,f,e]][Math.floor(a/60)%6];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,c,d){var b=Math.max(a,c,d),f=b-
Math.min(a,c,d);if(0===b)return{h:NaN,s:0,v:0};a=(a===b?(c-d)/f:c===b?2+(d-a)/f:4+(a-c)/f)/6;0>a&&(a+=1);return{h:360*a,s:f/b,v:b/255}},rgb_to_hex:function(a,c,d){a=this.hex_with_component(0,2,a);a=this.hex_with_component(a,1,c);return a=this.hex_with_component(a,0,d)},component_from_hex:function(a,c){return a>>8*c&255},hex_with_component:function(a,d,h){return h<<(c=8*d)|a&~(255<<c)}}},function(a,d){d.__esModule=!0;a=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.initialValue=b[c];this.domElement=document.createElement("div");this.object=b;this.property=c;this.__onFinishChange=this.__onChange=void 0}a.prototype.onChange=function(a){this.__onChange=a;return this};a.prototype.onFinishChange=function(a){this.__onFinishChange=a;return this};a.prototype.setValue=function(a){this.object[this.property]=a;this.__onChange&&this.__onChange.call(this,a);this.updateDisplay();return this};a.prototype.getValue=function(){return this.object[this.property]};a.prototype.updateDisplay=
function(){return this};a.prototype.isModified=function(){return this.initialValue!==this.getValue()};return a}();d.default=a},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var h=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var e=b(this,a.call(this,d,f));e.__prev=e.getValue();e.__checkbox=document.createElement("input");e.__checkbox.setAttribute("type","checkbox");h.default.bind(e.__checkbox,"change",
function(){e.setValue(!e.__prev)},!1);e.domElement.appendChild(e.__checkbox);e.updateDisplay();return e}e(c,a);c.prototype.setValue=function(b){b=a.prototype.setValue.call(this,b);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());this.__prev=this.getValue();return b};c.prototype.updateDisplay=function(){!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1;return a.prototype.updateDisplay.call(this)};return c}(a.default);
d.default=c},function(a,d,c){function b(a){if("0"===a||e.default.isUndefined(a))return 0;a=a.match(g);return e.default.isNull(a)?0:parseFloat(a[1])}d.__esModule=!0;var e=(a=c(5))&&a.__esModule?a:{default:a},h={};e.default.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(a,b){e.default.each(a,function(a){h[a]=b})});var g=/(\d+(\.\d+)?)px/,f={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=
b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(a,b,c){e.default.isUndefined(b)&&(b=!0);e.default.isUndefined(c)&&(c=!0);a.style.position="absolute";b&&(a.style.left=0,a.style.right=0);c&&(a.style.top=0,a.style.bottom=0)},fakeEvent:function(a,b,c,d){c=c||{};var f=h[b];if(!f)throw Error("Event type "+b+" not supported.");var k=document.createEvent(f);switch(f){case "MouseEvents":k.initMouseEvent(b,
c.bubbles||!1,c.cancelable||!0,window,c.clickCount||1,0,0,c.x||c.clientX||0,c.y||c.clientY||0,!1,!1,!1,!1,0,null);break;case "KeyboardEvents":f=k.initKeyboardEvent||k.initKeyEvent;e.default.defaults(c,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});f(b,c.bubbles||!1,c.cancelable,window,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);break;default:k.initEvent(b,c.bubbles||!1,c.cancelable||!0)}e.default.defaults(k,d);a.dispatchEvent(k)},bind:function(a,
b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c);return f},unbind:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c);return f},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1===c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return f},removeClass:function(a,b){if(b)if(a.className===
b)a.removeAttribute("class");else{var c=a.className.split(/ +/);b=c.indexOf(b);-1!==b&&(c.splice(b,1),a.className=c.join(" "))}else a.className=void 0;return f},hasClass:function(a,b){return(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)")).test(a.className)||!1},getWidth:function(a){a=getComputedStyle(a);return b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){a=getComputedStyle(a);return b(a["border-top-width"])+b(a["border-bottom-width"])+
b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent){do b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;while(a)}return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};d.default=f},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==
typeof b?a:b}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=c(7);a=b(a);var g=c(9),f=b(g);c=c(5);var k=b(c);c=function(a){function b(c,d,g){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var h=e(this,a.call(this,c,d)),l=g;h.__select=document.createElement("select");k.default.isArray(l)&&function(){var a={};k.default.each(l,function(b){a[b]=b});l=a}();k.default.each(l,function(a,b){var c=document.createElement("option");c.innerHTML=b;c.setAttribute("value",a);h.__select.appendChild(c)});h.updateDisplay();f.default.bind(h.__select,"change",function(){h.setValue(this.options[this.selectedIndex].value)});h.domElement.appendChild(h.__select);return h}h(b,a);b.prototype.setValue=function(b){b=
a.prototype.setValue.call(this,b);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());return b};b.prototype.updateDisplay=function(){if(f.default.isActive(this.__select))return this;this.__select.value=this.getValue();return a.prototype.updateDisplay.call(this)};return b}(a.default);d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var h=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e){function f(){g.setValue(g.__input.value)}if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var g=d=b(this,a.call(this,d,e));d.__input=document.createElement("input");d.__input.setAttribute("type","text");h.default.bind(d.__input,"keyup",f);h.default.bind(d.__input,"change",f);h.default.bind(d.__input,"blur",function(){g.__onFinishChange&&g.__onFinishChange.call(g,g.getValue())});h.default.bind(d.__input,"keydown",function(a){13===a.keyCode&&this.blur()});d.updateDisplay();d.domElement.appendChild(d.__input);return d}e(c,a);c.prototype.updateDisplay=function(){h.default.isActive(this.__input)||
(this.__input.value=this.getValue());return a.prototype.updateDisplay.call(this)};return c}(a.default);d.default=c},function(a,d,c){function b(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a){a=a.toString();return-1<a.indexOf(".")?
a.length-a.indexOf(".")-1:0}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var h=(c=c(5))&&c.__esModule?c:{default:c};c=function(a){function c(b,d,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=a.call(this,b,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;f=f||{};b.__min=f.min;b.__max=f.max;b.__step=f.step;h.default.isUndefined(b.__step)?b.__impliedStep=
0===b.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(b.initialValue))/Math.LN10))/10:b.__impliedStep=b.__step;b.__precision=e(b.__impliedStep);return b}b(c,a);c.prototype.setValue=function(b){void 0!==this.__min&&b<this.__min?b=this.__min:void 0!==this.__max&&b>this.__max&&(b=this.__max);void 0!==this.__step&&0!==b%this.__step&&(b=Math.round(b/this.__step)*this.__step);return a.prototype.setValue.call(this,b)};c.prototype.min=function(a){this.__min=a;return this};c.prototype.max=function(a){this.__max=
a;return this};c.prototype.step=function(a){this.__impliedStep=this.__step=a;this.__precision=e(a);return this};return c}(a.default);d.default=c},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=c(12);a=b(a);var g=c(9),f=b(g);c=c(5);var k=b(c);c=function(a){function b(c,d,g){function h(){m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function l(a){var b=n-a.clientY;m.setValue(m.getValue()+b*m.__impliedStep);n=a.clientY}function v(){f.default.unbind(document,"mousemove",l);f.default.unbind(document,
"mouseup",v);h()}if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=e(this,a.call(this,c,d,g));c.__truncationSuspended=!1;var m=c,n=void 0;c.__input=document.createElement("input");c.__input.setAttribute("type","text");f.default.bind(c.__input,"change",function(){var a=parseFloat(m.__input.value);k.default.isNaN(a)||m.setValue(a)});f.default.bind(c.__input,"blur",function(){h()});f.default.bind(c.__input,"mousedown",function(a){f.default.bind(document,"mousemove",l);
f.default.bind(document,"mouseup",v);n=a.clientY});f.default.bind(c.__input,"keydown",function(a){13===a.keyCode&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1,h())});c.updateDisplay();c.domElement.appendChild(c.__input);return c}h(b,a);b.prototype.updateDisplay=function(){var b=this.__input;if(this.__truncationSuspended)var c=this.getValue();else{c=this.getValue();var d=Math.pow(10,this.__precision);c=Math.round(c*d)/d}b.value=c;return a.prototype.updateDisplay.call(this)};return b}(a.default);
d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}function h(a,b,c,d,e){return d+(a-b)/(c-b)*(e-d)}d.__esModule=!0;a=(a=c(12))&&a.__esModule?a:{default:a};var g=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e,f,k,n){function l(a){a.preventDefault();var b=v.__background.getBoundingClientRect();v.setValue(h(a.clientX,b.left,b.right,v.__min,v.__max));return!1}function m(){g.default.unbind(document,"mousemove",l);g.default.unbind(document,"mouseup",m);v.__onFinishChange&&v.__onFinishChange.call(v,v.getValue())}if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");var v=d=b(this,a.call(this,d,e,{min:f,max:k,step:n}));d.__background=document.createElement("div");d.__foreground=document.createElement("div");g.default.bind(d.__background,"mousedown",function(a){document.activeElement.blur();g.default.bind(document,"mousemove",l);g.default.bind(document,"mouseup",m);l(a)});g.default.addClass(d.__background,"slider");g.default.addClass(d.__foreground,"slider-fg");d.updateDisplay();d.__background.appendChild(d.__foreground);
d.domElement.appendChild(d.__background);return d}e(c,a);c.prototype.updateDisplay=function(){var b=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=100*b+"%";return a.prototype.updateDisplay.call(this)};return c}(a.default);d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==
b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var h=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var g=b(this,a.call(this,
d,e));g.__button=document.createElement("div");g.__button.innerHTML=void 0===f?"Fire":f;h.default.bind(g.__button,"click",function(a){a.preventDefault();g.fire();return!1});h.default.addClass(g.__button,"button");g.domElement.appendChild(g.__button);return g}e(c,a);c.prototype.fire=function(){this.__onChange&&this.__onChange.call(this);this.getValue().call(this.object);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())};return c}(a.default);d.default=c},function(a,d,c){function b(a){return a&&
a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}function g(a,b,c,d){a.style.background="";m.default.each(n,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function f(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+=
"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}d.__esModule=!0;a=c(7);a=b(a);var k=c(9),r=b(k);k=c(2);var l=b(k);k=c(3);var x=b(k);c=c(5);var m=
b(c);c=function(a){function b(c,d){function h(a){y(a);r.default.bind(document,"mousemove",y);r.default.bind(document,"mouseup",k)}function k(){r.default.unbind(document,"mousemove",y);r.default.unbind(document,"mouseup",k);u()}function n(){var a=(0,x.default)(this.value);!1!==a?(t.__color.__state=a,t.setValue(t.__color.toOriginal())):this.value=t.__color.toString()}function v(){r.default.unbind(document,"mousemove",C);r.default.unbind(document,"mouseup",v);u()}function u(){t.__onFinishChange&&t.__onFinishChange.call(t,
t.__color.toOriginal())}function y(a){a.preventDefault();var b=t.__saturation_field.getBoundingClientRect(),c=(a.clientX-b.left)/(b.right-b.left);a=1-(a.clientY-b.top)/(b.bottom-b.top);1<a?a=1:0>a&&(a=0);1<c?c=1:0>c&&(c=0);t.__color.v=a;t.__color.s=c;t.setValue(t.__color.toOriginal());return!1}function C(a){a.preventDefault();var b=t.__hue_field.getBoundingClientRect();a=1-(a.clientY-b.top)/(b.bottom-b.top);1<a?a=1:0>a&&(a=0);t.__color.h=360*a;t.setValue(t.__color.toOriginal());return!1}if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");c=e(this,a.call(this,c,d));c.__color=new l.default(c.getValue());c.__temp=new l.default(0);var t=c;c.domElement=document.createElement("div");r.default.makeSelectable(c.domElement,!1);c.__selector=document.createElement("div");c.__selector.className="selector";c.__saturation_field=document.createElement("div");c.__saturation_field.className="saturation-field";c.__field_knob=document.createElement("div");c.__field_knob.className="field-knob";
c.__field_knob_border="2px solid ";c.__hue_knob=document.createElement("div");c.__hue_knob.className="hue-knob";c.__hue_field=document.createElement("div");c.__hue_field.className="hue-field";c.__input=document.createElement("input");c.__input.type="text";c.__input_textShadow="0 1px 1px ";r.default.bind(c.__input,"keydown",function(a){13===a.keyCode&&n.call(this)});r.default.bind(c.__input,"blur",n);r.default.bind(c.__selector,"mousedown",function(){r.default.addClass(this,"drag").bind(document,"mouseup",
function(){r.default.removeClass(t.__selector,"drag")})});d=document.createElement("div");m.default.extend(c.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});m.default.extend(c.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:c.__field_knob_border+(.5>c.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});m.default.extend(c.__hue_knob.style,{position:"absolute",
width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});m.default.extend(c.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});m.default.extend(d.style,{width:"100%",height:"100%",background:"none"});g(d,"top","rgba(0,0,0,0)","#000");m.default.extend(c.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"});f(c.__hue_field);
m.default.extend(c.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:c.__input_textShadow+"rgba(0,0,0,0.7)"});r.default.bind(c.__saturation_field,"mousedown",h);r.default.bind(c.__field_knob,"mousedown",h);r.default.bind(c.__hue_field,"mousedown",function(a){C(a);r.default.bind(document,"mousemove",C);r.default.bind(document,"mouseup",v)});c.__saturation_field.appendChild(d);c.__selector.appendChild(c.__field_knob);c.__selector.appendChild(c.__saturation_field);
c.__selector.appendChild(c.__hue_field);c.__hue_field.appendChild(c.__hue_knob);c.domElement.appendChild(c.__input);c.domElement.appendChild(c.__selector);c.updateDisplay();return c}h(b,a);b.prototype.updateDisplay=function(){var a=(0,x.default)(this.getValue());if(!1!==a){var b=!1;m.default.each(l.default.COMPONENTS,function(c){if(!m.default.isUndefined(a[c])&&!m.default.isUndefined(this.__color.__state[c])&&a[c]!==this.__color.__state[c])return b=!0,{}},this);b&&m.default.extend(this.__color.__state,
a)}m.default.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var c=.5>this.__color.v||.5<this.__color.s?255:0,d=255-c;m.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+c+","+c+","+c+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;g(this.__saturation_field,"left","#fff",this.__temp.toHexString());
this.__input.value=this.__color.toString();m.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+c+","+c+","+c+")",textShadow:this.__input_textShadow+"rgba("+d+","+d+","+d+",.7)"})};return b}(a.default);var n=["-moz-","-o-","-webkit-","-ms-",""];d.default=c},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=document.createElement("li");b&&d.appendChild(b);c?a.__ul.insertBefore(d,c):a.__ul.appendChild(d);a.onResize();return d}
function h(a,b){a=a.__preset_select[a.__preset_select.selectedIndex];a.innerHTML=b?a.value+"*":a.value}function g(a,b,c){c.__li=b;c.__gui=a;w.default.extend(c,{options:function(b){if(1<arguments.length){var d=c.__li.nextElementSibling;c.remove();return k(a,c.object,c.property,{before:d,factoryArgs:[w.default.toArray(arguments)]})}if(w.default.isArray(b)||w.default.isObject(b))return d=c.__li.nextElementSibling,c.remove(),k(a,c.object,c.property,{before:d,factoryArgs:[b]})},name:function(a){c.__li.firstElementChild.firstElementChild.innerHTML=
a;return c},listen:function(){c.__gui.listen(c);return c},remove:function(){c.__gui.remove(c);return c}});if(c instanceof H.default)(function(){var a=new D.default(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});w.default.each(["updateDisplay","onChange","onFinishChange","step"],function(b){var d=c[b],e=a[b];c[b]=a[b]=function(){var b=Array.prototype.slice.call(arguments);e.apply(a,b);return d.apply(c,b)}});q.default.addClass(b,"has-slider");c.domElement.insertBefore(a.domElement,c.domElement.firstElementChild)})();
else if(c instanceof D.default){var d=function(b){if(w.default.isNumber(c.__min)&&w.default.isNumber(c.__max)){b=c.__li.firstElementChild.firstElementChild.innerHTML;var d=-1<c.__gui.__listening.indexOf(c);c.remove();var e=k(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]});e.name(b);d&&e.listen();return e}return b};c.min=w.default.compose(d,c.min);c.max=w.default.compose(d,c.max)}else c instanceof A.default?(q.default.bind(b,"click",function(){q.default.fakeEvent(c.__checkbox,
"click")}),q.default.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof G.default?(q.default.bind(b,"click",function(){q.default.fakeEvent(c.__button,"click")}),q.default.bind(b,"mouseover",function(){q.default.addClass(c.__button,"hover")}),q.default.bind(b,"mouseout",function(){q.default.removeClass(c.__button,"hover")})):c instanceof C.default&&(q.default.addClass(b,"color"),c.updateDisplay=w.default.compose(function(a){b.style.borderLeftColor=c.__color.toString();return a},
c.updateDisplay),c.updateDisplay());c.setValue=w.default.compose(function(b){a.getRoot().__preset_select&&c.isModified()&&h(a.getRoot(),!0);return b},c.setValue)}function f(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!==d){var e=c.__rememberedObjectIndecesToControllers[d];void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e);e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])a=c[a.preset];else if(c.Default)a=c.Default;else return;
a[d]&&void 0!==a[d][b.property]&&(d=a[d][b.property],b.initialValue=d,b.setValue(d))}}}function k(a,b,c,d){if(void 0===b[c])throw Error('Object "'+b+'" has no property "'+c+'"');d.color?b=new C.default(b,c):(b=[b,c].concat(d.factoryArgs),b=z.default.apply(a,b));d.before instanceof N.default&&(d.before=d.before.__li);f(a,b);q.default.addClass(b.domElement,"c");c=document.createElement("span");q.default.addClass(c,"property-name");c.innerHTML=b.property;var h=document.createElement("div");h.appendChild(c);
h.appendChild(b.domElement);d=e(a,h,d.before);q.default.addClass(d,B.CLASS_CONTROLLER_ROW);b instanceof C.default?q.default.addClass(d,"color"):q.default.addClass(d,u(b.getValue()));g(a,d,b);a.__controllers.push(b);return b}function r(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function l(a){var b=a.__save_row=document.createElement("li");q.default.addClass(a.domElement,"has-save");
a.__ul.insertBefore(b,a.__ul.firstChild);q.default.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";q.default.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";q.default.addClass(d,"button");q.default.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";q.default.addClass(e,"button");q.default.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert";q.default.addClass(f,"button");q.default.addClass(f,
"revert");var g=a.__preset_select=document.createElement("select");a.load&&a.load.remembered?w.default.each(a.load.remembered,function(b,c){r(a,c,c===a.preset)}):r(a,"Default",!1);q.default.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value});b.appendChild(g);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);F&&function(){var b=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");
document.getElementById("dg-save-locally").style.display="block";"true"===localStorage.getItem(document.location.href+".isLocal")&&c.setAttribute("checked","checked");b.style.display=a.useLocalStorage?"block":"none";q.default.bind(c,"change",function(){a.useLocalStorage=!a.useLocalStorage;b.style.display=a.useLocalStorage?"block":"none"})}();var h=document.getElementById("dg-new-constructor");q.default.bind(h,"keydown",function(a){!a.metaKey||67!==a.which&&67!==a.keyCode||K.hide()});q.default.bind(c,
"click",function(){h.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);K.show();h.focus();h.select()});q.default.bind(d,"click",function(){a.save()});q.default.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});q.default.bind(f,"click",function(){a.revert()})}function x(a){function b(b){b.preventDefault();a.width+=e-b.clientX;a.onResize();e=b.clientX;return!1}function c(){q.default.removeClass(a.__closeButton,B.CLASS_DRAG);q.default.unbind(document,"mousemove",
b);q.default.unbind(document,"mouseup",c)}function d(d){d.preventDefault();e=d.clientX;q.default.addClass(a.__closeButton,B.CLASS_DRAG);q.default.bind(document,"mousemove",b);q.default.bind(document,"mouseup",c);return!1}var e=void 0;a.__resize_handle=document.createElement("div");w.default.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});q.default.bind(a.__resize_handle,"mousedown",d);q.default.bind(a.__closeButton,"mousedown",
d);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function m(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}function n(a,b){var c={};w.default.each(a.__rememberedObjects,function(d,e){var f={};w.default.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f});return c}function y(a){0!==a.length&&t.default.call(window,
function(){y(a)});w.default.each(a,function(a){a.updateDisplay()})}var u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};d=c(18);d=b(d);var v=c(19),E=b(v);v=c(20);var z=b(v);v=c(7);var N=b(v);v=c(8);var A=b(v);v=c(15);var G=b(v);v=c(13);var D=b(v);v=c(14);var H=b(v);v=c(16);var C=b(v);v=c(21);var t=b(v);v=c(22);var p=b(v);v=c(9);var q=b(v);v=c(5);var w=b(v);c=c(23);
c=b(c);d.default.inject(c.default);try{var F="localStorage"in window&&null!==window.localStorage}catch(P){F=!1}var K=void 0,L=!0,J=void 0,M=!1,O=[],B=function I(a){function b(){var a=c.getRoot();a.width+=1;w.default.defer(function(){--a.width})}var c=this,d=a||{};this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);q.default.addClass(this.domElement,"dg");this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=
[];this.__listening=[];d=w.default.defaults(d,{autoPlace:!0,width:I.DEFAULT_WIDTH});d=w.default.defaults(d,{resizable:d.autoPlace,hideable:d.autoPlace});w.default.isUndefined(d.load)?d.load={preset:"Default"}:d.preset&&(d.load.preset=d.preset);w.default.isUndefined(d.parent)&&d.hideable&&O.push(this);d.resizable=w.default.isUndefined(d.parent)&&d.resizable;d.autoPlace&&w.default.isUndefined(d.scrollable)&&(d.scrollable=!0);var f=F&&"true"===localStorage.getItem(document.location.href+".isLocal"),
g=void 0;Object.defineProperties(this,{parent:{get:function(){return d.parent}},scrollable:{get:function(){return d.scrollable}},autoPlace:{get:function(){return d.autoPlace}},preset:{get:function(){return c.parent?c.getRoot().preset:d.load.preset},set:function(a){c.parent?c.getRoot().preset=a:d.load.preset=a;for(a=0;a<this.__preset_select.length;a++)this.__preset_select[a].value===this.preset&&(this.__preset_select.selectedIndex=a);c.revert()}},width:{get:function(){return d.width},set:function(a){d.width=
a;m(c,a)}},name:{get:function(){return d.name},set:function(a){d.name=a;titleRowName&&(titleRowName.innerHTML=d.name)}},closed:{get:function(){return d.closed},set:function(a){d.closed=a;d.closed?q.default.addClass(c.__ul,I.CLASS_CLOSED):q.default.removeClass(c.__ul,I.CLASS_CLOSED);this.onResize();c.__closeButton&&(c.__closeButton.innerHTML=a?I.TEXT_OPEN:I.TEXT_CLOSED)}},load:{get:function(){return d.load}},useLocalStorage:{get:function(){return f},set:function(a){F&&((f=a)?q.default.bind(window,
"unload",g):q.default.unbind(window,"unload",g),localStorage.setItem(document.location.href+".isLocal",a))}}});w.default.isUndefined(d.parent)?(d.closed=!1,q.default.addClass(this.domElement,I.CLASS_MAIN),q.default.makeSelectable(this.domElement,!1),F&&f&&(c.useLocalStorage=!0,a=localStorage.getItem(document.location.href+".gui"))&&(d.load=JSON.parse(a)),this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=I.TEXT_CLOSED,q.default.addClass(this.__closeButton,I.CLASS_CLOSE_BUTTON),
this.domElement.appendChild(this.__closeButton),q.default.bind(this.__closeButton,"click",function(){c.closed=!c.closed})):(void 0===d.closed&&(d.closed=!0),a=document.createTextNode(d.name),q.default.addClass(a,"controller-name"),a=e(c,a),q.default.addClass(this.__ul,I.CLASS_CLOSED),q.default.addClass(a,"title"),q.default.bind(a,"click",function(a){a.preventDefault();c.closed=!c.closed;return!1}),d.closed||(this.closed=!1));d.autoPlace&&(w.default.isUndefined(d.parent)&&(L&&(J=document.createElement("div"),
q.default.addClass(J,"dg"),q.default.addClass(J,I.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(J),L=!1),J.appendChild(this.domElement),q.default.addClass(this.domElement,I.CLASS_AUTO_PLACE)),this.parent||m(c,d.width));this.__resizeHandler=function(){c.onResizeDebounced()};q.default.bind(window,"resize",this.__resizeHandler);q.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler);q.default.bind(this.__ul,"transitionend",this.__resizeHandler);q.default.bind(this.__ul,"oTransitionEnd",
this.__resizeHandler);this.onResize();d.resizable&&x(this);this.saveToLocalStorageIfPossible=g=function(){F&&"true"===localStorage.getItem(document.location.href+".isLocal")&&localStorage.setItem(document.location.href+".gui",JSON.stringify(c.getSaveObject()))};d.parent||b()};B.toggleHide=function(){M=!M;w.default.each(O,function(a){a.domElement.style.display=M?"none":""})};B.CLASS_AUTO_PLACE="a";B.CLASS_AUTO_PLACE_CONTAINER="ac";B.CLASS_MAIN="main";B.CLASS_CONTROLLER_ROW="cr";B.CLASS_TOO_TALL="taller-than-window";
B.CLASS_CLOSED="closed";B.CLASS_CLOSE_BUTTON="close-button";B.CLASS_DRAG="drag";B.DEFAULT_WIDTH=245;B.TEXT_CLOSED="Close Controls";B.TEXT_OPEN="Open Controls";B._keydownHandler=function(a){!document.activeElement||"text"===document.activeElement.type||72!==a.which&&72!==a.keyCode||B.toggleHide()};q.default.bind(window,"keydown",B._keydownHandler,!1);w.default.extend(B.prototype,{add:function(a,b){return k(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return k(this,
a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.splice(this.__controllers.indexOf(a),1);var b=this;w.default.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&J.removeChild(this.domElement);q.default.unbind(window,"keydown",B._keydownHandler,!1);q.default.unbind(window,"resize",this.__resizeHandler);this.saveToLocalStorageIfPossible&&q.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(a){if(void 0!==this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+
a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace;this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);b=new B(b);this.__folders[a]=b;a=e(this,b.domElement);q.default.addClass(a,"folder");return b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=q.default.getOffset(a.__ul).top,c=0;w.default.each(a.__ul.childNodes,function(b){a.autoPlace&&b===
a.__save_row||(c+=q.default.getHeight(b))});window.innerHeight-b-20<c?(q.default.addClass(a.domElement,B.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(q.default.removeClass(a.domElement,B.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&w.default.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},onResizeDebounced:w.default.debounce(function(){this.onResize()},200),remember:function(){w.default.isUndefined(K)&&
(K=new p.default,K.domElement.innerHTML=E.default);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;w.default.each(Array.prototype.slice.call(arguments),function(b){0===a.__rememberedObjects.length&&l(a);-1===a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)});this.autoPlace&&m(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;a.closed=this.closed;0<this.__rememberedObjects.length&&
(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=n(this));a.folders={};w.default.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()});return a},save:function(){this.load.remembered||(this.load.remembered={});this.load.remembered[this.preset]=n(this);h(this,!1);this.saveToLocalStorageIfPossible()},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=n(this,!0));this.load.remembered[a]=n(this);this.preset=a;r(this,
a,!0);this.saveToLocalStorageIfPossible()},revert:function(a){w.default.each(this.__controllers,function(b){this.getRoot().load.remembered?f(a||this.getRoot(),b):b.setValue(b.initialValue);b.__onFinishChange&&b.__onFinishChange.call(b,b.getValue())},this);w.default.each(this.__folders,function(a){a.revert(a)});a||h(this.getRoot(),!1)},listen:function(a){var b=0===this.__listening.length;this.__listening.push(a);b&&y(this.__listening)},updateDisplay:function(){w.default.each(this.__controllers,function(a){a.updateDisplay()});
w.default.each(this.__folders,function(a){a.updateDisplay()})}});a.exports=B},function(a,d){a.exports={load:function(a,b){b=b||document;var c=b.createElement("link");c.type="text/css";c.rel="stylesheet";c.href=a;b.getElementsByTagName("head")[0].appendChild(c)},inject:function(a,b){var c=b||document;b=document.createElement("style");b.type="text/css";b.innerHTML=a;a=c.getElementsByTagName("head")[0];try{a.appendChild(b)}catch(h){}}}},function(a,d){a.exports='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'},
function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}d.__esModule=!0;a=c(10);var e=b(a);a=c(13);var h=b(a);a=c(14);var g=b(a);a=c(11);var f=b(a);a=c(15);var k=b(a);a=c(8);var r=b(a);c=c(5);var l=b(c);d.default=function(a,b,c,d,u){var m=a[b];return l.default.isArray(c)||l.default.isObject(c)?new e.default(a,b,c):l.default.isNumber(m)?l.default.isNumber(c)&&l.default.isNumber(d)?l.default.isNumber(u)?new g.default(a,b,c,d,u):new g.default(a,b,c,d):l.default.isNumber(u)?new h.default(a,
b,{min:c,max:d,step:u}):new h.default(a,b,{min:c,max:d}):l.default.isString(m)?new f.default(a,b):l.default.isFunction(m)?new k.default(a,b,""):l.default.isBoolean(m)?new r.default(a,b):null}},function(a,d){function c(a){setTimeout(a,1E3/60)}d.__esModule=!0;d.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||c},function(a,d,c){d.__esModule=!0;var b=(a=c(9))&&a.__esModule?a:{default:a},
e=(c=c(5))&&c.__esModule?c:{default:c};c=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.backgroundElement=document.createElement("div");e.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});b.default.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";
this.domElement=document.createElement("div");e.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var c=this;b.default.bind(this.backgroundElement,"click",function(){c.hide()})}a.prototype.show=function(){var a=this;this.backgroundElement.style.display=
"block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();e.default.defer(function(){a.backgroundElement.style.opacity=1;a.domElement.style.opacity=1;a.domElement.style.webkitTransform="scale(1)"})};a.prototype.hide=function(){var a=this,c=function r(){a.domElement.style.display="none";a.backgroundElement.style.display="none";b.default.unbind(a.domElement,"webkitTransitionEnd",r);b.default.unbind(a.domElement,"transitionend",
r);b.default.unbind(a.domElement,"oTransitionEnd",r)};b.default.bind(this.domElement,"webkitTransitionEnd",c);b.default.bind(this.domElement,"transitionend",c);b.default.bind(this.domElement,"oTransitionEnd",c);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};a.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-b.default.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-
b.default.getHeight(this.domElement)/2+"px"};return a}();d.default=c},function(a,d,c){d=a.exports=c(24)();d.push([a.id,".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid transparent; }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: #000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.color {\n    border-left: 3px solid; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2FA1D6; }\n    .dg .cr.number input[type=text] {\n      color: #2FA1D6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2FA1D6;\n    max-width: 100%; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",
""])},function(a,d){a.exports=function(){var a=[];a.toString=function(){for(var a=[],c=0;c<this.length;c++){var d=this[c];d[2]?a.push("@media "+d[2]+"{"+d[1]+"}"):a.push(d[1])}return a.join("")};a.i=function(b,c){"string"===typeof b&&(b=[[null,b,""]]);for(var d={},e=0;e<this.length;e++){var f=this[e][0];"number"===typeof f&&(d[f]=!0)}for(e=0;e<b.length;e++)f=b[e],"number"===typeof f[0]&&d[f[0]]||(c&&!f[2]?f[2]=c:c&&(f[2]="("+f[2]+") and ("+c+")"),a.push(f))};return a}}])});
var TWEEN=TWEEN||function(){var a=[];return{getAll:function(){return a},removeAll:function(){a=[]},add:function(d){a.push(d)},remove:function(d){d=a.indexOf(d);-1!==d&&a.splice(d,1)},update:function(d,c){if(0===a.length)return!1;var b=0;for(d=void 0!==d?d:TWEEN.now();b<a.length;)a[b].update(d)||c?b++:a.splice(b,1);return!0}}}();
TWEEN.now="undefined"===typeof window&&"undefined"!==typeof process?function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};
TWEEN.Tween=function(a){var d={},c={},b={},e=1E3,h=0,g,f=!1,k=!1,r=0,l=null,x=TWEEN.Easing.Linear.None,m=TWEEN.Interpolation.Linear,n=[],y=null,u=!1,v=null,E=null,z=null;this.to=function(a,b){c=a;void 0!==b&&(e=b);return this};this.start=function(e){TWEEN.add(this);k=!0;u=!1;l=void 0!==e?e:TWEEN.now();l+=r;for(var f in c){if(c[f]instanceof Array){if(0===c[f].length)continue;c[f]=[a[f]].concat(c[f])}void 0!==a[f]&&(d[f]=a[f],!1===d[f]instanceof Array&&(d[f]*=1),b[f]=d[f]||0)}return this};this.stop=
function(){if(!k)return this;TWEEN.remove(this);k=!1;null!==z&&z.call(a,a);this.stopChainedTweens();return this};this.end=function(){this.update(l+e);return this};this.stopChainedTweens=function(){for(var a=0,b=n.length;a<b;a++)n[a].stop()};this.delay=function(a){r=a;return this};this.repeat=function(a){h=a;return this};this.repeatDelay=function(a){g=a;return this};this.yoyo=function(a){f=a;return this};this.easing=function(a){x=a;return this};this.interpolation=function(a){m=a;return this};this.chain=
function(){n=arguments;return this};this.onStart=function(a){y=a;return this};this.onUpdate=function(a){v=a;return this};this.onComplete=function(a){E=a;return this};this.onStop=function(a){z=a;return this};this.update=function(k){var A;if(k<l)return!0;!1===u&&(null!==y&&y.call(a,a),u=!0);var z=(k-l)/e;z=1<z?1:z;var D=x(z);for(A in c)if(void 0!==d[A]){var H=d[A]||0,C=c[A];C instanceof Array?a[A]=m(C,D):("string"===typeof C&&(C="+"===C.charAt(0)||"-"===C.charAt(0)?H+parseFloat(C):parseFloat(C)),"number"===
typeof C&&(a[A]=H+(C-H)*D))}null!==v&&v.call(a,D);if(1===z)if(0<h){isFinite(h)&&h--;for(A in b)"string"===typeof c[A]&&(b[A]+=parseFloat(c[A])),f&&(z=b[A],b[A]=c[A],c[A]=z),d[A]=b[A];l=void 0!==g?k+g:k+r}else{null!==E&&E.call(a,a);k=0;for(A=n.length;k<A;k++)n[k].start(l+e);return!1}return!0}};
TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*
a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-
a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)},Out:function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1},InOut:function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+
1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*
a-1)+.5}}};
TWEEN.Interpolation={Linear:function(a,d){var c=a.length-1,b=c*d,e=Math.floor(b),h=TWEEN.Interpolation.Utils.Linear;return 0>d?h(a[0],a[1],b):1<d?h(a[c],a[c-1],c-b):h(a[e],a[e+1>c?c:e+1],b-e)},Bezier:function(a,d){for(var c=0,b=a.length-1,e=Math.pow,h=TWEEN.Interpolation.Utils.Bernstein,g=0;g<=b;g++)c+=e(1-d,b-g)*e(d,g)*a[g]*h(b,g);return c},CatmullRom:function(a,d){var c=a.length-1,b=c*d,e=Math.floor(b),h=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>d&&(e=Math.floor(b=c*(1+d))),h(a[(e-
1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],b-e)):0>d?a[0]-(h(a[0],a[0],a[1],a[1],-b)-a[0]):1<d?a[c]-(h(a[c],a[c],a[c-1],a[c-1],b-c)-a[c]):h(a[e?e-1:0],a[e],a[c<e+1?c:e+1],a[c<e+2?c:e+2],b-e)},Utils:{Linear:function(a,d,c){return(d-a)*c+a},Bernstein:function(a,d){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(d)/c(a-d)},Factorial:function(){var a=[1];return function(d){var c=1;if(a[d])return a[d];for(var b=d;1<b;b--)c*=b;return a[d]=c}}(),CatmullRom:function(a,d,c,b,e){a=.5*(c-a);b=.5*(b-d);var h=
e*e;return(2*d-2*c+a+b)*e*h+(-3*d+3*c-2*a-b)*h+a*e+d}}};(function(a){"function"===typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!==typeof module&&"object"===typeof exports?module.exports=TWEEN:void 0!==a&&(a.TWEEN=TWEEN)})(this);

/* crc: A9EBB31B550BC749C836ACA0CE24DFF0 */
