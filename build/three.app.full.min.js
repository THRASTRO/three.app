/* autogenerated by webmerge (compile context) */
;
/*
ThreeApp Framework (https://github.com/mgreter/three.app)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
var $jscomp={scope:{},getGlobal:function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.patches={};$jscomp.patch=function(a,d){($jscomp.patches[a]=$jscomp.patches[a]||[]).push(d);var c=$jscomp.global;a=a.split(".");for(var b=0;b<a.length-1&&c;b++)c=c[a[b]];a=a[a.length-1];c&&c[a]instanceof Function&&(c[a]=d(c[a]))};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol;var a=[],d=function(c){return function(b){a=[];b=c(b);for(var e=[],d=0,h=b.length;d<h;d++){var g;a:if(g=b[d],g.length<$jscomp.SYMBOL_PREFIX.length)g=!1;else{for(var m=0;m<$jscomp.SYMBOL_PREFIX.length;m++)if(g[m]!=$jscomp.SYMBOL_PREFIX[m]){g=!1;break a}g=!0}g?a.push(b[d]):e.push(b[d])}return e}};$jscomp.patch("Object.keys",d);$jscomp.patch("Object.getOwnPropertyNames",d);$jscomp.patch("Object.getOwnPropertySymbols",
function(c){return function(b){d.unused=Object.getOwnPropertyNames(b);a.push.apply(c(b));return a}})}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+a+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
(function(a,d){function c(a,b){for(var g=a.split(/\./),m=c,e=0;e<g.length-1;e++)m[g[e]]||(m[g[e]]={}),m=m[g[e]];if(1==arguments.length)return m[g[e]];var d=typeof m[g[e]];if("object"==d){var d=m[g[e]],l;for(l in d)d.hasOwnProperty(l)&&(b[l]=d[l])}else if("undefined"!=d)throw Error("Namespace already taken!");return m[g[e]]=b}function b(){var a,c=!1,g=0,m=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(c=arguments[0],g++);for(a=arguments[g++];g<m;g++){var e=arguments[g],
d=void 0;for(d in e)Object.prototype.hasOwnProperty.call(e,d)&&(c&&"[object Object]"===Object.prototype.toString.call(e[d])?a[d]=b(!0,a[d],e[d]):c&&e[d]instanceof Array?("undefined"==typeof a[d]&&(a[d]=[]),a[d]=a[d].concat(e[d])):a[d]=e[d])}return a}d=a.THREEAPP;if("object"==typeof d)for(var e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);c("extend",b);c("mixin",function(a,c){if(!c||!a)debugger;a=a.prototype;c=c.prototype;for(var g in c)c.hasOwnProperty(g)&&(c[g]instanceof Array?(a[g]||(a[g]=[]),a[g]=a[g].concat(c[g])):
c[g]instanceof Function?(a[g]=c[g],b(a[g],c[g])):c[g]instanceof Object?(a[g]||(a[g]={}),b(!0,a[g],c[g])):a[g]=c[g])});c("tmpl",function(a,b){return a.replace(/%([a-zA-Z][a-zA-Z0-9]*)%/g,function(a,c){return b[c]?b[c]:"[%"+c+"%]"})});a.THREEAPP=c})(self,THREE);
(function(a,d){function c(a,b){}function b(){for(var a={},b=this.ctor,c=0;c<b.length;c++)a[b[c]]||(b[c].apply(this,arguments),a[b[c]]=!0);b=this.init;this.__proto__.wait=h;for(c=0;c<b.length;c++)a[b[c]]||(b[c].apply(this,arguments),a[b[c]]=!0)}function e(){if(0<this.pending)return this;delete this.__proto__.wait;for(var a=0;a<this.ready.length;a++)this.ready[a].apply(this,arguments);if(this.listeners)for(var b=this.listeners.ready||[],a=0;a<b.length;a++)b[a].apply(this,arguments);delete this.pending;
this.isReady=!0;return this}function f(a,b,c){b||(b=d.Class);Array.isArray(c)||(c=[c]);if(!c)throw Error("Undefined mixin!");a.prototype.ctor||(a.prototype.ctor=[]);a.prototype.init||(a.prototype.init=[]);a.prototype.ready||(a.prototype.ready=[]);a.prototype.defaults||(a.prototype.defaults={});a.prototype.listeners||(a.prototype.listeners={});if(c&&c.length)for(var e=0,h=c.length;e<h;e++){if(!c[e])throw Error("Undefined mixin!");if(!(c[e]instanceof Function)){var f=d(c[e]);if("undefined"==typeof f)throw Error("Unknown mixin: "+
c[e]);c[e]=f}}a.prototype.listeners=d.extend(!0,{},a.prototype.listeners);for(e=0;e<c.length;e++)d.mixin(a,c[e]);d.mixin(a,b);b&&(a.prototype.__proto__=b.prototype);a.static=function(b,c){a[b]=c;return this};a.method=function(b,c){a.prototype[b]=c;return this};a.proto=function(b,c){a.prototype[b](c);return this};a.defaults=function(b){d.extend(a.prototype.defaults,b);return this};a.ctor=function(b){a.prototype.ctor.push(b);return this};a.init=function(b){a.prototype.init.push(b);return this};a.ready=
function(b){a.prototype.ready.push(b);return this};a.listen=function(b,c,m){var e=a.prototype.listeners;e[b]||(e[b]=[]);null!=m&&(c.prio=m);e[b].push(c);"ready"==b&&this.isReady&&c.call(this);return this};return a}function h(a){function b(){--d.pending;e.apply(d)}function c(a){throw a;}var d=this;d.pending++;if(!a)throw Error("Invalid wait call");if("function"==typeof a.listen)a.listen("ready",b);else if("function"==typeof a.then)a.then(b,c);else throw Error("Invalid wait promise");return e.apply(d)}
c.create=function(){var a="string"==typeof arguments[0]?[].shift.call(arguments):null,m=arguments[0]||c,h=arguments[1]||[],n=function(){this.pending=0;this.options=d.extend({},this.defaults);b.apply(this,arguments);e.apply(this,arguments)};a&&eval("Klass = "+n.toString().replace(/\(\)/,a+"()"));n.prototype.name=a;return f.call(c,n,m,h)};c.mixin=function(a){1>arguments.length&&(a=[]);return f.call(c,function(){throw Error("Can't instantiate mixins");},null,a)};c.virtual=function(a,b){0==arguments.length&&
(a=c);if(!a)throw Error("Undefined virtual base!");2>arguments.length&&(b=[]);return f.call(c,function(){throw Error("cannot instantiate virtual class");},a,b)};c.prototype.constructor=c;d("Class",c)})(THREE,THREEAPP);(function(a,d){a=d.Class.mixin().ctor(function(a,b){this.app=a;d.extend(this.options,b)});d("Options",a)})(THREE,THREEAPP);
(function(a,d){function c(a,c){return(c.prio||0)-(a.prio||0)}a=d.Class.mixin(["Options"]).ctor(function(a,c){this.listeners=d.extend(!0,{},this.listeners,this.options.listeners);this.deferred={}}).method("listen",function(a,e,d){"ready"==a&&this.isReady&&e.call(this);null!=d&&(e.prio=d);this.listeners.hasOwnProperty(a)||(this.listeners[a]=[]);a=this.listeners[a];-1==a.indexOf(e)&&a.push(e);a.sort(c)}).method("invoke",function(a){for(var c=Array.prototype.slice.call(arguments,1),d=this.listeners[a],
h=0,g=d?d.length:0;h<g;h++)d[h].apply(this,c);this.deferred[a]=!1}).method("trigger",function(a){var c=this;if(!c.deferred[a]){var d=Array.prototype.slice.call(arguments,1);c.deferred[a]=window.setTimeout(function(){for(var h=c.listeners[a],g=0,m=h?h.length:0;g<m;g++)h[g].apply(c,d);c.deferred[a]=!1},0)}});d("Events",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.mixin(["Events"]).method("required",[]).method("provided",{}).method("requires",function(a){Array.isArray(a)?this.required=this.required.concat(a):this.required.push(a);return this}).method("provides",function(a){var b=this.provided;Array.isArray(a)||(a=[a]);for(var d=0,f=a.length;d<f;++d){if(b.hasOwnProperty(a[d]))throw Error("Duplicate service provider");b[a[d]]=!0}return this});d("Plugin",a)})(THREE,THREEAPP);
(function(a,d){function c(a){for(var b in a)this.resources[b]=a[b]}function b(a,b){return this.assets[a]?this.assets[a][2].data:b}var e={},f=d.Class.mixin(["Options","Events"]).ctor(function(a,b){this.assets={};this.prefetch=c;a.resources=e;this.resources=jQuery.extend({},this.resources,this.options.resources);a.listen("loader.complete",function(a,b){for(var c=a.cbs.length,g=0;g<c;g++)a.cbs[g].assets[2]=a,a.cbs[g].resolve&&a.cbs[g].resolve(),a.complete=!0,a.data=b})}).init(function(b){var g=this,
c=b.manager,d=g.resources,e;for(e in d){var f=d[e][0],k=d[e][1];this.assets[e]=d[e];if(b.resources[k]){var q={obj:this,assets:d[e]};b.resources[k].complete?d[e][2]=b.resources[k]:this.wait(new Promise(function(a,c){q.reject=c;q.resolve=a;b.resources[k].cbs.push(q)}))}else{var f=f.substr(0,1).toUpperCase(),y;if("S"==f)y=new a.TextLoader(c);else if("T"==f)y=new a.TextureLoader(c);else if("I"==f)y=new a.ImageLoader(c);else if("J"==f)y=new a.JsonLoader(c);else if("A"==f)y=new a.ArrayLoader(c);else if("B"==
f)y=new a.BlobLoader(c);else if("R"==f)y=new a.BinaryLoader(c);else if("O"==f)y=new a.ObjectLoader(c);else if("L"==f)y=new a.OBJLoader(c);else throw"Unknown loader type for resource";q={obj:this,assets:d[e]};this.wait(new Promise(function(a,c){q.reject=c;q.resolve=a;b.resources[k]={total:0,loaded:0,cbs:[q]};(function(a,d,e){y.load(d,function(a){b.invoke("loader.complete",e,a)},function(a){b.invoke("loader.progress",g,e,a)},c)})(f,k,b.resources[k])}))}}}).ready(function(){this.asset=b}).listen("ready",
function(){this.options.container&&this.options.container.add(this)});d("Resources",f)})(THREE,THREEAPP);THREE.ArrayLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.ArrayLoader.prototype={constructor:THREE.ArrayLoader,load:function(a,d,c,b){var e=this.manager,f=e.app,e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){f.wlzma.decode(a).then(function(a){a=a.toUint8Array();d.call(this,a.buffer)}).catch(b)},c,b)):(e.setResponseType("arraybuffer"),e.load(a,d,c,b))}};THREE.BlobLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.BlobLoader.prototype={constructor:THREE.BlobLoader,load:function(a,d,c,b){var e=this.manager,f=e.app,e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){f.wlzma.decode(a).then(function(a){a=new Blob(a.buffers);if("object"!=typeof a)throw Error("Invalid BLOB");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("blob"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid BLOB");},c,b))}};
THREE.DataLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.DataLoader.prototype={constructor:THREE.DataLoader,load:function(a,d,c,b){var e=this.manager,f=e.app,e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){f.wlzma.decode(a).then(function(a){a=JSON.parse(a);if("object"!=typeof a)throw Error("Invalid JSON");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("json"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid JSON");},c,b))}};
THREE.JsonLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.JsonLoader.prototype={constructor:THREE.JsonLoader,load:function(a,d,c,b){var e=this.manager,f=e.app,e=new THREE.FileLoader(e);a.match(/\.lzma$/)?(e.setResponseType("arraybuffer"),e.load(a,function(a){f.wlzma.decode(a).then(function(a){a=JSON.parse(a);if("object"!=typeof a)throw Error("Invalid JSON");d.call(this,a)}).catch(b)},c,b)):(e.setResponseType("json"),e.load(a,function(a){if(a)return d.apply(this,arguments);throw Error("Invalid JSON");},c,b))}};
THREE.TextLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};THREE.TextLoader.prototype={constructor:THREE.TextLoader,load:function(a,d,c,b){var e=this.manager.app,f=new THREE.FileLoader(this.manager);a.match(/\.lzma$/)?(f.setResponseType("arraybuffer"),f.load(a,function(a){e.wlzma.decode(a).then(function(a){a=a.toString();if("string"!=typeof a)throw Error("Invalid Text");d.call(this,a)}).catch(b)},c,b)):(f.setResponseType("text"),f.load(a,d,c,b))}};
THREE.TextureLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(a,d,c,b){var e=new THREE.FileLoader(this.manager),f=new THREE.Texture;e.setResponseType("arraybuffer");e.load(a,function(b){var c="application/octet-stream";a.search(/\.(jpe?g)$/)?c="image/jpeg":a.search(/\.(png)$/)?c="image/png":a.search(/\.(gif)$/)&&(c="image/gif");b=new Blob([b],{type:c});var e=new FileReader(b);f.image=document.createElementNS("http://www.w3.org/1999/xhtml","img");f.image.addEventListener("load",function(){f.format=
"image/jpeg"==c?THREE.RGBFormat:THREE.RGBAFormat;f.needsUpdate=!0;void 0!==d&&d(f)});e.addEventListener("load",function(a){f.image.src=e.result},!1);e.readAsDataURL(b)},c,b);return window.texture=f},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this}};(function(a,d){var c=d.Class.virtual(a.Object3D).ctor(function(b,c){a.Object3D.call(this);this.sortObjects=this.matrixAutoUpdate=!0});d("Object3D",c)})(THREE,THREEAPP);
(function(){var a=THREEAPP.Class.virtual(THREE.Scene).ctor(function(a,c){THREE.Scene.call(this)});THREEAPP("Scene",a)})();
(function(a,d){a=d.Class.virtual(d.Object3D,["Events"]).ctor(function(a,b){this.lod=[]}).ready(function(a){a.lods.push(this);this.trigger("lod")}).listen("lod",function(){if(this.current!=this.level&&-1!=this.level){if(!this.lod[this.level]){var a=this.options.lod[this.level],b={},e;for(e in this.options.resources){var f=this.options.resources[e];b[e]=[f[0],d.tmpl(f[1],a)]}a=d.extend({},this.options,a,{resources:b,container:this});this.lod[this.level]=new this.options.ctor(this.app,a)}this.lod[this.level].isReady&&
(this.lod[this.current]&&this.remove(this.lod[this.current]),this.add(this.lod[this.level]),this.current=this.level)}});d("LOD",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Clock",null,["Plugin"]).proto("provides","time").proto("provides","clock").ctor(function(b){b.time=0;b.clock=new a.Clock(!1);b.clock.speed=1/3600;b.listen("clock.pause",function(){b.clock.stop();b.clock.paused=!0;b.trigger("clock.adjusted")});b.listen("clock.resume",function(){b.clock.start();b.clock.paused=!1;b.trigger("clock.adjusted")});b.listen("clock.faster",function(){b.clock.speed*=2;b.trigger("clock.adjusted")});b.listen("clock.slower",function(){b.clock.speed/=
2;b.trigger("clock.adjusted")});b.listen("clock.reverse",function(){b.clock.speed*=-1;b.trigger("clock.adjusted")});b.listen("clock.reset",function(){b.clock.speed=1/3600;b.trigger("clock.adjusted")});b.listen("preframe",function(){var a=b.clock.getDelta();b.time+=a*b.clock.speed});b.clock.setSpeed=function(a){b.clock.speed=a;b.trigger("clock.adjusted")}}).ready(function(a){a.clock.start();a.clock.paused=!1;a.trigger("clock.adjusted")});d("Plugin.Clock",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Scene",null,["Plugin"]).proto("provides","scene").ctor(function(b){b.scene=b.options.scene?new b.options.scene(b):new a.Scene(b)});d("Plugin.Scene",c)})(THREE,THREEAPP);
(function(a,d){function c(a){a.resize(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)}a=d.Class.create("AutoSize",null,["Plugin"]).ctor(function(a){addEventListener("resize",function(){c(a)},!0);c(a)});d("Plugin.AutoSize",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("WebGLRenderer",null,["Plugin"]).proto("provides","renderer").ctor(function(b){b.renderer=new a.WebGLRenderer({sortObjects:!0,antialias:!0,precision:"highp",alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,logarithmicDepthBuffer:!0});b.renderer.autoClear=!1;b.listen("resized",function(){b.renderer.setSize(b.width,b.height)});b.renderer.setSize(b.width,b.height);b.viewport.appendChild(b.renderer.domElement);b.listen("preframe",function(){b.renderer.clear()});
b.listen("render",function(){b.invoke("render-scene");b.renderer.render(b.scene,b.camera)})});d("Plugin.WebGLRenderer",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("PerspectiveCamera",null,["Plugin"]).proto("provides","camera").ctor(function(b){b.camera=new a.PerspectiveCamera(this.options.fov||65,b.width/b.height,this.options.near||1E-6,this.options.far||1E20);b.camera.position.x=1E-11;b.listen("resized",function(){b.camera.aspect=b.width/b.height;b.camera.updateProjectionMatrix()})});d("Plugin.PerspectiveCamera",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("TrackballControls",null,["Plugin"]).proto("requires","camera").proto("requires","renderer").ctor(function(b){b.controls=new a.TrackballControls(b.camera,b.renderer.domElement);b.listen("preframe",function(){b.controls.update()})});d("Plugin.TrackballControls",c)})(THREE,THREEAPP);
(function(a,d){function c(a,b){for(var c=a.cbs.length,g=0;g<c;g++)a.cbs[g].assets[2]=a,a.cbs[g].resolve&&a.cbs[g].resolve(),a.complete=!0,a.data=b}function b(){this.invoke("fetch.error",{})}function e(){1==++this.loader.completed&&this.trigger("prefetch.complete",this.loader);this.trigger("fetch.complete",this.loader)}function f(a){var b=this.loader;b.filesTotal=a[2];b.filesLoaded=a[1];this.trigger("fetch.progress",{filesTotal:b.filesTotal,filesLoaded:b.filesLoaded,bytesTotal:b.bytesTotal,bytesLoaded:b.bytesLoaded})}
function h(a,b,c){a=this.loader;0==b.total&&(b.total=c.total,a.bytesTotal+=c.total,a.filesTotal+=1);a.bytesLoaded+=c.loaded-b.loaded;b.loaded=c.loaded;this.trigger("fetch.progress",{filesTotal:a.filesTotal,filesLoaded:a.filesLoaded,bytesTotal:a.bytesTotal,bytesLoaded:a.bytesLoaded})}var g=d.Class.create("Loader",null,["Plugin"]).proto("provides","loader").ctor(function(a){a.loader=this;this.bytesLoaded=this.bytesTotal=this.filesLoaded=this.filesTotal=this.completed=0;a.listen("loader.step",f);a.listen("loader.start",
e);a.listen("loader.error",b);a.listen("loader.complete",c);a.listen("loader.progress",h)}).init(function(b){b.manager=new a.LoadingManager(function(){b.invoke("loader.start",arguments)},function(){b.invoke("loader.step",arguments)},function(){b.invoke("loader.error",arguments)});b.manager.app=b});d("Plugin.Loader",g)})(THREE,THREEAPP);
(function(a,d,c){d=c.Class.create("Progress",null,["Plugin"]).ctor(function(b){this.el=a('<div id="progressbar"/>');this.wrapper=a('<div class="indicator"/>').appendTo(this.el);this.indicator=a('<div class="bg"/>').appendTo(this.wrapper);this.text=a('<div class="text"/>').appendTo(this.el);this.el.appendTo(b.viewport);this.thresholdBytes=this.thresholdFiles=0;this.stopped=!0;this.el.hide();this.indicator.css("width","0%");var c=this;b.listen("fetch.progress",function(a){c.stopped&&(!0!==c.stopped&&
clearTimeout(c.stopped),c.el.fadeIn(200),c.stopped=!1);var b=sprintf("%d/%d (%S/%S)",a.filesLoaded,a.filesTotal,a.bytesLoaded-c.thresholdBytes,a.bytesTotal-c.thresholdBytes);c.indicator.css("width",(a.bytesLoaded-c.thresholdBytes)/(a.bytesTotal-c.thresholdBytes)*100+"%");c.text.html(b)});b.listen("fetch.complete",function(a){c.thresholdBytes=a.bytesLoaded;c.thresholdFiles=a.filesLoaded;c.stopped=setTimeout(function(){c.el.fadeOut(600,function(){c.stopped=!0})},1E3)})}).init(function(){}).ready(function(){});
c("Plugin.Progress",d)})(jQuery,THREE,THREEAPP);(function(a,d){function c(a,c,d){c||(c="f");this.uniforms[a]||(this.uniforms[a]={type:c,value:d||0});return this.uniforms[a]}a=d.Class.create("Uniforms",null,["Plugin"]).ctor(function(a){a.uniforms=[];a.uniform=c}).ready(function(a){a.hasOwnProperty("time")&&a.listen("preframe",function(){a.uniform("time").value=a.time},999999)});d("Plugin.Uniforms",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Background",null,["Plugin"]).proto("requires","renderer").proto("provides","background").ctor(function(b){b.bg=b.options.bg?new b.options.bg(b):new a.Scene(b);b.listen("render",function(){b.invoke("render-background");b.renderer.render(b.bg,b.camera)},99)});d("Plugin.Background",c)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("LOD",d.Object3D,["Plugin"]).proto("provides","lod").proto("requires","camera").proto("requires","ui").ctor(function(a){a.lods=[]}).ready(function(b){b.listen("update-ui",function(){var c=new a.Matrix4;c.multiplyMatrices(b.camera.projectionMatrix,b.camera.matrixWorldInverse);var d=new a.Frustum;d.setFromMatrix(c);for(var c=b.camera.getWorldPosition(),h="",g=document.getElementById("lodInfo"),m=0,p=b.lods.length;m<p;m++){var n=b.lods[m].getWorldPosition(),l=c.distanceToSquared(n);
b.lods[m].inFrustum=d.intersectsSphere({center:n,radius:b.lods[m].radius||100});h+=sprintf("%02d) %.5f",m,l);if(b.lods[m].inFrustum){var l=l*Math.pow(b.camera.fov,2),n=b.lods[m].options.lod,k=0,q=n.length;if(k<q&&!n[k])debugger;for(;k<q&&l<n[k].min;)++k;k==q&&(k=-1);b.lods[m].level!=k&&(b.lods[m].level=k,b.lods[m].trigger("lod"));h+=" - lvl "+k+"<br>"}else h+=" - hidden<br>"}g&&(g.innerHTML=h)})});d("Plugin.LOD",c)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("UI",null,["Plugin"]).proto("provides","ui").ctor(function(a){var b=this;b.frames=9999;a.listen("postframe",function(){6<++b.frames&&(b.frames=0,a.trigger("update-ui"))})});d("Plugin.UI",a)})(THREE,THREEAPP);
var StatsGPU=function(){function a(a,b,c){a=document.createElement(a);a.id=b;a.style.cssText=c;return a}function d(b,c,g){var d=a("div",b,"padding:0 0 3px 3px;text-align:left;background:"+g),e=a("div",b+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+c);e.innerHTML=b.toUpperCase();d.appendChild(e);b=a("div",b+"Graph","width:94px;height:30px;background:"+c);d.appendChild(b);for(c=0;94>c;c++)b.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+
g));return d}function c(a){for(var b=p.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";m=a}function b(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+"px"}var e=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,f=e(),h=f,g=0,m=0,p=a("div","statsGPU","width:100px;opacity:0.9;cursor:pointer");p.addEventListener("mousedown",function(a){a.preventDefault();c(++m%p.children.length)},!1);var n=0,l=Infinity,k=0,q=d("fps","#0ff","#002"),
y=q.children[0],t=q.children[1];p.appendChild(q);var u=0,z=Infinity,x=0,q=d("ms","#0f0","#020"),M=q.children[0],N=q.children[1];p.appendChild(q);if(self.performance&&self.performance.memory){var A=0,E=Infinity,F=0,q=d("mb","#f08","#201"),C=q.children[0],w=q.children[1];p.appendChild(q)}c(m);return{REVISION:14,domElement:p,setMode:c,begin:function(){f=e()},end:function(){var a=e();u=a-f;z=Math.min(z,u);x=Math.max(x,u);M.textContent=(u|0)+" MS ("+(z|0)+"-"+(x|0)+")";b(N,u/200);g++;if(a>h+1E3&&(n=Math.round(1E3*
g/(a-h)),l=Math.min(l,n),k=Math.max(k,n),y.textContent=n+" FPS ("+l+"-"+k+")",b(t,n/100),h=a,g=0,void 0!==A)){var c=performance.memory.usedJSHeapSize,d=performance.memory.jsHeapSizeLimit;A=Math.round(9.54E-7*c);E=Math.min(E,A);F=Math.max(F,A);C.textContent=A+" MB ("+E+"-"+F+")";b(w,c/d)}return a},update:function(){f=this.end()}}};"object"===typeof module&&(module.exports=StatsGPU);
(function(a,d){a=d.Class.create("MonitorGPU",null,["Plugin"]).ready(function(a){var b=new StatsGPU;a.viewport.appendChild(b.domElement);a.listen("preframe",function(){b.begin()});a.listen("postframe",function(){b.end()})});d("Plugin.MonitorGPU",a)})(THREE,THREEAPP);
(function(a){function d(){var a=arguments[0],b=d.cache;b[a]&&b.hasOwnProperty(a)||(b[a]=d.parse(a));return d.format.call(null,b[a],arguments)}function c(a){return"number"===typeof a?"number":"string"===typeof a?"string":Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}var b=/[^T]/,e=/[^v]/,f=/[diefg]/,h=/bcdiefguxXS/,g=/[j]/,m=/^[^\x25]+/,p=/^\x25{2}/,n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxXSDR])/,l=/^([a-z_][a-z_\d]*)/i,k=/^\.([a-z_][a-z_\d]*)/i,
q=/^\[(\d+)\]/,y=/^[\+\-]/;d.format=function(a,m){var p=1,n=a.length,l,k,q=[],t,w,D,r=!0,v;for(t=0;t<n;t++)if(l=c(a[t]),"string"===l)q[q.length]=a[t];else if("array"===l){l=a[t];if(l[2])for(k=m[p],w=0;w<l[2].length;w++){if(!k.hasOwnProperty(l[2][w]))throw Error(d('[sprintf] property "%s" does not exist',l[2][w]));k=k[l[2][w]]}else k=l[1]?m[l[1]]:m[p++];b.test(l[8])&&e.test(l[8])&&"function"==c(k)&&(k=k());if(h.test(l[8])&&"number"!=c(k)&&isNaN(k))throw new TypeError(d("[sprintf] expecting number but found %s",
c(k)));f.test(l[8])&&(r=0<=k);switch(l[8]){case "b":k=parseInt(k,10).toString(2);break;case "c":k=String.fromCharCode(parseInt(k,10));break;case "d":case "i":k=parseInt(k,10);break;case "j":k=JSON.stringify(k,null,l[6]?parseInt(l[6]):0);break;case "e":k=l[7]?parseFloat(k).toExponential(l[7]):parseFloat(k).toExponential();break;case "f":k=l[7]?parseFloat(k).toFixed(l[7]):parseFloat(k);break;case "g":k=l[7]?parseFloat(k).toPrecision(l[7]):parseFloat(k);break;case "o":k=k.toString(8);break;case "s":k=
String(k);k=l[7]?k.substring(0,l[7]):k;break;case "t":k=String(!!k);k=l[7]?k.substring(0,l[7]):k;break;case "S":if(1024>Math.abs(k))k+=" B";else{w="KiB MiB GiB TiB PiB EiB ZiB YiB".split(" ");v=-1;do k/=1024,++v;while(1024<=Math.abs(k)&&v<w.length-1);k=k.toFixed(1)+w[v]}break;case "R":v=k/Math.PI*180;k=v%1*60;w=k%1*60;k=d("%02d\u00b0 %02d' %0.2f\"",v,k,w);break;case "D":k+=Math.PI;v=k/Math.PI*12;k=v%1*60;w=k%1*60;k=d("%02dh %02dm %0.2fs",v,k,w);break;case "T":k=c(k);k=l[7]?k.substring(0,l[7]):k;break;
case "u":k=parseInt(k,10)>>>0;break;case "v":k=k.valueOf();k=l[7]?k.substring(0,l[7]):k;break;case "x":k=parseInt(k,10).toString(16);break;case "X":k=parseInt(k,10).toString(16).toUpperCase()}g.test(l[8])?q[q.length]=k:(!f.test(l[8])||r&&!l[3]?v="":(v=r?"+":"-",k=k.toString().replace(y,"")),w=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",D=l[6]-(v+k).length,D=l[6]?0<D?0<=D&&7>=D&&u[w]?u[w][D]:Array(D+1).join(w):"":"",q[q.length]=l[5]?v+k+D:"0"===w?v+D+k:D+v+k)}return q.join("")};d.cache={};d.parse=function(a){for(var b,
c=[],g=0;a;){if(null!==(b=m.exec(a)))c[c.length]=b[0];else if(null!==(b=p.exec(a)))c[c.length]="%";else if(null!==(b=n.exec(a))){if(b[2]){var g=g|1,d=[],e=b[2],h;if(null!==(h=l.exec(e)))for(d[d.length]=h[1];""!==(e=e.substring(h[0].length));)if(null!==(h=k.exec(e)))d[d.length]=h[1];else if(null!==(h=q.exec(e)))d[d.length]=h[1];else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=d}else g|=2;if(3===
g)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c[c.length]=b}else throw new SyntaxError("[sprintf] unexpected placeholder");a=a.substring(b[0].length)}return c};var t=function(a,b,c){c=(b||[]).slice(0);c.splice(0,0,a);return d.apply(null,c)},u={0:" 0 00 000 0000 00000 000000 0000000".split(" ")," ":"; ;  ;   ;    ;     ;      ;       ".split(";"),_:" _ __ ___ ____ _____ ______ _______".split(" ")};"undefined"!==typeof exports?(exports.sprintf=d,exports.vsprintf=
t):(a.sprintf=d,a.vsprintf=t,"function"===typeof define&&define.amd&&define(function(){return{sprintf:d,vsprintf:t}}))})("undefined"===typeof window?this:window);
(function(a,d,c){var b=requestAnimationFrame;a=c.Class.create("ThreeApp",null,["Events","Options"]).defaults({root:"."}).ctor(function(a,b){this.frames=9999;this.viewport=a;this.root=this.options.root.split(/\/+/);c.extend(this.options,b)}).init(function(a,b){a=this;b=this.options;for(var c=this.options.plugins||[],g=[].concat(c),d=0;d<g.length;){var p=g[d].prototype.required;if(p&&p.length)++d;else{p=g.splice(d,1)[0];if(p.prototype.provided){for(var n=p.prototype.provided,l=0;l<g.length;l++)for(var k in n){var d=
g[l].prototype.required,q=(d||[]).indexOf(k);-1!=q&&d.splice(q,1)}d=0}n=p.prototype.name;p=new p(this,b[n]);c[l]=c[n]=p;a.wait&&a.wait(c[l])}}if(g.length){for(l=0;l<g.length;l++)n=g[l].name,d=g[l].prototype.required,console.warn(n,"is missing",d);throw Error("Missing or circular dependencies");}a.plugins=c}).ready(function(){var a=this;this.options.start&&window.setTimeout(function(){a.start()},0)}).method("start",function(){var a=this;a.started||a.paused||(b(function(){a.render.call(a)}),a.started=
!0)}).method("resize",function(a,b){this.width=a;this.height=b;this.invoke("resized")}).method("log",function(){console.log(sprintf.apply(this,arguments))}).method("warn",function(){console.warn(sprintf.apply(this,arguments))}).method("info",function(){console.info(sprintf.apply(this,arguments))}).method("path",function(a){a=a.split(/\/+/);return this.root.concat(a).join("/")}).method("render",function(){var a=this;a.invoke("preframe");a.invoke("render");a.invoke("postframe");a.started&&b(function(){a.render.call(a)});
++a.frames});c("App",a)})(self,THREE,THREEAPP);(function(a,d){a=d.Class.create("LZMA",null,["Plugin"]).proto("provides","lzma").ctor(function(a){a.wlzma=new WLZMA.Manager(3)});d("Plugin.LZMA",a)})(THREE,THREEAPP);(function(a,d){a=d.Class.create("Tween",null,["Plugin"]).proto("provides","tween").ready(function(a){a.listen("preframe",function(){TWEEN.update()})});d("Plugin.Tween",a)})(THREE,THREEAPP);
(function(a,d){d("CPUs",function(a,b){function d(a,b){for(var c=[],g=0,e=0,h=setInterval(function(){for(var a=0;100>a;a++);},0),f=0;f<a;f++)c[f]=new Worker(m),c[f].onmessage=function(c){e+=c.data;++g==a&&(h&&clearInterval(h),b.call(this,e))};for(f=0;f<a;f++)c[f].postMessage("start")}function f(a,b){d(a,function(c){if(g>c)return b.call(this,h);if(12<a)return console.info("CPUs",a),b.call(this,a);h=a;g=c;f(2*a,b)})}var h=0,g=0;a=a.replace(/[/]*$/,"/");var m=a+"Worker.js";f(1,b)})})(THREE,THREEAPP);
onmessage=function(a){a=0;for(var d=Date.now();d+80>Date.now();){for(var c=0;200>c;c++);a++}postMessage(a);close()};
(function(a,d){a=d.Class.mixin(["Events","Options"]).ctor(function(a,b){this.items=[];this.length=0}).defaults({softLimit:8,hardLimit:2E3,increment:2}).method("belowSoftLimit",function(a){return this.items.length<this.options.softLimit}).method("belowHardLimit",function(a){return this.items.length<this.options.hardLimit}).method("delete",function(a){isNaN(a)&&(a=this.items.indexOf(a));if(0>a||a>this.items.length)throw"cannot remove unknown group item";var b=this.items[a];this.items.splice(a,1);--this.length;
this.trigger("decrease");this.invoke("deleted",b);this.trigger("resized")}).method("insert",function(a){if(this.belowSoftLimit())this.items.push(a),this.length+=1,this.trigger("increase");else if(this.belowHardLimit())this.items.push(a),this.options.softLimit*=this.options.increment||2,this.options.softLimit>this.options.hardLimit&&(this.options.softLimit=this.options.hardLimit),this.length+=1,this.invoke("resize");else throw Error("group reached hard limit");this.invoke("inserted",a);this.trigger("resized")});
d("Group",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Grouped",null,["Events","Options"]).ctor(function(a,b){this.length=0;this.groups=[];this.current=null;this.compacting=!1}).defaults({softLimit:3,hardLimit:2E3,increment:8,compact:.75}).method("add",function(a){this.length+=1;if(this.current){if(this.current.belowHardLimit())return this.current.insert(a),this;for(var b=0;b<this.groups.length;b++)if(this.groups[b].belowHardLimit())return this.current=this.groups[b],this.current.insert(a),this}this.current=new this.options.ctor(this.app,
this.options);this.groups.push(this.current);this.current.insert(a);this.current.trigger("enable");return this}).method("delete",function(a){var b=0,d=-1;if(isNaN(a)){for(b=0;b<this.groups.length&&!(-1<(d=this.groups[b].indexOf(a)));b++);a=d}else for((0>a||a>=this.length)&&console.warn("access out of bound");b<this.groups.length&&!(a<this.groups[b].length);)a-=this.groups[b].length,b+=1;b!=this.groups.length&&(this.groups[b].delete(a),0==this.groups[b].length&&(this.groups[b].removed=!0,this.groups[b].trigger("disable"),
this.groups.splice(b,1)),--this.length,this.compacting||this.options.compact&&2<this.groups.length&&this.length/this.options.hardLimit<this.groups.length*this.options.compact&&this.compact(75))}).method("compact",function(a,b){var d=this;isNaN(b)&&(b=0);for(this.compacting=!0;b<this.groups.length;){if(this.groups[b].belowHardLimit()){for(;this.groups[b].belowHardLimit();){var f=this.groups.length-1,h=this.groups[f].length-1,g=this.groups[f].items[h];if(-1==h||f==b)break;this.groups[f].delete(h);this.groups[b].insert(g);
0==this.groups[f].length&&(this.groups[f].removed=!0,this.groups[f].trigger("disable"),this.groups.splice(f,1))}isNaN(a)||setTimeout(function(){d.compact(a,b)},a);break}b+=1}this.compacting=!1});d("Grouped",a)})(THREE,THREEAPP);(function(a,d){a=d.Class.create("Tasker",null,["Plugin"]).proto("provides","tasker").ctor(function(a,b){a.tasker=new d.Tasker(a,b)}).init(function(a){this.wait(a.tasker)});d("Plugin.Tasker",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("Scheduler",null,["Plugin"]).proto("provides","scheduler").ctor(function(a){a.scheduler=new d.Scheduler(a)}).init(function(a){a.listen("postframe",function(){a.scheduler.frame()})});d("Plugin.Scheduler",a)})(THREE,THREEAPP);GrowingPacker=function(){};
GrowingPacker.prototype={fit:function(a){var d,c,b,e=a.length;this.root={x:0,y:0,w:0<e?a[0].w:0,h:0<e?a[0].h:0};for(d=0;d<e;d++)b=a[d],(c=this.findNode(this.root,b.w,b.h))?b.fit=this.splitNode(c,b.w,b.h):b.fit=this.growNode(b.w,b.h)},findNode:function(a,d,c){return a.used?this.findNode(a.right,d,c)||this.findNode(a.down,d,c):d<=a.w&&c<=a.h?a:null},splitNode:function(a,d,c){a.used=!0;a.down={x:a.x,y:a.y+c,w:a.w,h:a.h-c};a.right={x:a.x+d,y:a.y,w:a.w-d,h:c};return a},growNode:function(a,d){var c=a<=
this.root.w,b=d<=this.root.h,e=c&&this.root.w>=this.root.h+d;return b&&this.root.h>=this.root.w+a?this.growRight(a,d):e?this.growDown(a,d):b?this.growRight(a,d):c?this.growDown(a,d):null},growRight:function(a,d){this.root={used:!0,x:0,y:0,w:this.root.w+a,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:a,h:this.root.h}};return(node=this.findNode(this.root,a,d))?this.splitNode(node,a,d):null},growDown:function(a,d){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+d,down:{x:0,y:this.root.h,
w:this.root.w,h:d},right:this.root};return(node=this.findNode(this.root,a,d))?this.splitNode(node,a,d):null}};
(function(a,d){function c(a){var b=this.context,c=this.options;b.font=c.fontSize+"px "+c.fontFamily;b.fillStyle=a.color||c.fillStyle;b.strokeStyle=a.stroke||c.strokeStyle;b.lineWidth=a.lineWidth||c.lineWidth}function b(a){var b=a.fit,c=this.context;a.background&&(c.fillStyle=a.background,c.fillRect(b.x,b.y,a.w,a.h));a.border&&(c.strokeStyle=a.border,c.rect(b.x,b.y,a.w,a.h),c.stroke())}function e(a){var b=a.fit,c=b.x+2,b=b.y+a.h,b=b-2-2,d=this.context,e=this.options;(a.stroke||e.strokeStyle)&&d.strokeText(a.txt,
c,b);(a.color||e.fillStyle)&&d.fillText(a.txt,c,b)}function f(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a}var h=new GrowingPacker;a=d.Class.create("Labels",null,["Group"]).defaults({hardLimit:8192,fontSize:10,fontFamily:"Tahoma, sans",strokeStyle:"#0F0F0F",lineWidth:1}).ctor(function(a){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");a.viewport.appendChild(this.canvas);this.canvas.style.position="absolute";this.canvas.style.display="none";this.canvas.style.left=
"0px";this.canvas.style.top="0px"}).listen("resized",function(){this.items.sort(function(a,b){return Math.max(b.w,b.h)-Math.max(a.w,a.h)});for(var a=0;a<this.length;a+=1)delete this.items[a].fit;h.fit(this.items);var a=h.root,d=this.canvas,p=this.context;d.width=f(a.w);d.height=f(a.h);p.clearRect(0,0,d.width,d.height);for(a=0;a<this.length;a+=1)b.call(this,this.items[a]),c.call(this,this.items[a]),e.call(this,this.items[a])}).listen("inserted",function(a){var b=this.context,d=this.options;c.call(this,
a);a.h=2+d.fontSize+2;b=b.measureText(a.txt);a.w=2+b.width+2});d("Labels",a)})(THREE,THREEAPP);(function(a,d){a=d.Class.create("Labels",null,["Plugin"]).proto("provides","labels").ctor(function(a){a.labels=new d.Labels(a)});d("Plugin.Labels",a)})(THREE,THREEAPP);
(function(a,d){var c=d.Class.create("Labels",a.Points,["Resources","Labels"]).defaults({color:16711680}).ctor(function(a){this.prefetch({glsl_vert:["S",a.path("shaders/labels.vert")],glsl_frag:["S",a.path("shaders/labels.frag")]})}).ready(function(){var b=this,c=b.canvas,d=b.options,h=d.hardLimit,g=new a.InstancedBufferGeometry,m=new Float32Array(3*h),h=new Float32Array(4*h);g.addAttribute("position",new a.BufferAttribute(new Float32Array(3),3));g.addAttribute("offset",new a.InstancedBufferAttribute(m,
3,1));g.addAttribute("uvs",new a.InstancedBufferAttribute(h,4,1));b.texture=new a.Texture(b.canvas);c=new a.RawShaderMaterial({uniforms:{map:{type:"t",value:b.texture},appWidth:{type:"f",value:app.width},appHeight:{type:"f",value:app.height},texWidth:{type:"f",value:c.width},texHeight:{type:"f",value:c.height}},blending:a.AdditiveBlending,vertexShader:b.asset("glsl_vert"),fragmentShader:b.asset("glsl_frag"),transparent:!0,depthTest:!1});a.Points.call(b,g,c);d.parent&&d.parent.add(b);g.maxInstancedCount=
b.items.length;b.texture.needsUpdate=!0;b.app.listen("preframe",function(){g.attributes.offset.needsUpdate=!0;for(var a=0;a<b.items.length;a++){var c=b.items[a];c.position&&(m[3*a+0]=c.position.x,m[3*a+1]=c.position.y,m[3*a+2]=c.position.z)}});b.app.listen("resized",function(){b.material.uniforms.appWidth.value=b.app.width;b.material.uniforms.appHeight.value=b.app.height})}).listen("resized",function(){if(this.geometry&&this.items){for(var a=this.canvas.width,c=this.canvas.height,d=this.geometry.attributes.uvs.array,
h=0;h<this.items.length;h++){var g=this.items[h];d[4*h+0]=g.fit.x+2;d[4*h+1]=g.fit.y+2;d[4*h+2]=g.w-2;d[4*h+3]=g.h-2}this.texture&&(this.texture.needsUpdate=!0);this.geometry.attributes.offset.needsUpdate=!0;this.geometry.attributes.uvs.needsUpdate=!0;this.material.uniforms.texWidth.value=a;this.material.uniforms.texHeight.value=c;this.geometry.maxInstancedCount=this.items.length}});d("Objects.Labels",c)})(THREE,THREEAPP);
(function(a,d){function c(a,b){var c=b.buffers();if(0!=c.size){a.task=b;b.worker=a;this.load+=1;var d=[],e=[];d.push(c.size);d.push(c.cmds||0);d.push(c.args);b.invoke("updateUniforms");d.push(c.uniforms);var f=c.input,k=c.shareds,q=f?f.length:0,y=k.length;d.push(q+y);for(var t=0;t<q;t++)d.push(f[t]);for(t=0;t<y;t++)d.push(k[t]);f=c.backups;c=c.uniforms;k=f.length;for(t=0;t<k;t++)d.push(f[t]);for(t=0;t<d.length;t++)d[t]&&d[t].buffer&&e.push(d[t].buffer);for(t=0;t<c.length;t++)c[t]&&c[t].buffer&&e.push(c[t].buffer);
a.t_start=Date.now();b.invoke("calculate",a);this.invoke("calculate",b,a);a.postMessage(d,e);a.idle=!1}}function b(a){var b=this.task,d=this.parent,e=a.data[0],f=a.data[1],l=a.data[2],k=a.data[3],q=b.tbuffers;f&&!isNaN(f.length)&&(q.cmds=f);q.args=l;q.uniforms=k;f=q.input;k=q.backups;l=q.shareds;q.backups=q.results;q.results=k;f=f?f.length:0;l=l.length;for(k=0;k<f;k++)q.input[k]=a.data[5+k];for(k=0;k<l;k++)q.shareds[k]=a.data[5+f+k];for(var y=a.data.length-5-f-l,k=0;k<y;k++)q.results[k]=a.data[5+
f+l+k];--d.load;d.tasks+=e;d.batches+=1;this.task=b.worker=null;this.idle=!0;this.t_result=Date.now();this.t_busy+=this.t_result-this.t_start;0<d.queue.length&&(a=d.queue.shift(),a.queued=!1,c.call(d,this,a));d.invoke("calculated",b,this);b.invoke("calculated",this)}function e(a){if(a.data.run)this.onmessage=b;else throw Error("unexpected message");}var f=0;a=d.Class.create("Tasker",null,["Events","Options"]).ctor(function(){this.PLUGINS={};this.plugins=[];this.workers=[];this.queue=[];this.batches=
this.tasks=this.load=0}).defaults({threads:0,maxqueue:32768,taskerUrl:"Worker.js",root:"../src"}).init(function(){var a=this,b=a.options;this.wait(new Promise(function(c){0==b.threads?d.CPUs(a.path("CPUs"),function(b){a.threads=parseInt(Math.min(b/1.3,6));c()}):(a.threads=b.threads,c())}))}).ready(function(){var a=this,b=a.workers,d=this.options.taskerUrl;if(!a.started){for(var f=0;f<a.threads;f+=1)b[f]=new Worker(a.path(d)),b[f].onmessage=e,b[f].parent=a,b[f].idle=!0,b[f].id=f,b[f].t_busy=0,b[f].postMessage({plugins:a.plugins});
a.t_start=Date.now();if(0<a.queue.length&&(a=this,b=a.workers,a.isIdle()))for(f=0;f<b.length;++f)if(b[f].idle){d=a.queue.shift();c.call(a,b[f],d);d.queued=!1;break}}}).method("path",function(a){return this.options.root.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,"")}).method("register",function(a){var b=this.plugins;if(this.started)throw Error("Cannot register after start");if(!a.api)throw Error("Plugin must have a task API class");a.id=b.length;var c=a.api;isNaN(c.classid)&&(c.classid=f++);a.args=c.args;
a.classid=c.classid;a.results=c.results;a.uniforms=c.uniforms;c.cmds&&(a.name=c.cmds);delete a.base;b.push(a);if(this.PLUGINS[a.name])throw Error("Plugin already exists");this.PLUGINS[a.name]=a}).method("push",function(a){if(a.queued||a.worker)throw"task already busy"+a.queued;var b=a.tasker=this,d=b.workers;if(b.isReady&&b.isIdle())for(var e=0;e<d.length;++e)if(d[e].idle){c.call(b,d[e],a);return}if(b.queue.length>=b.options.maxqueue)throw Error("Tasker queue limit exhausted");b.queue.push(a);a.queued=
!0}).method("isIdle",function(){return this.ready?this.load<this.threads:!1});d("Tasker",a)})(THREE,THREEAPP);
(function(a,d){var c=[0,0,1,0,0,1,2];a=d.Class.create("Scheduler").ctor(function(a){this.app=a;a.scheduler=this;this.tasker=a.tasker;this.batches=0;this.plan=[[],[],[]];for(a=0;3>a;a++)this.plan[a].it=0,this.plan[a].done=0,this.plan[a].onTime=0,this.plan[a].delayed=0,this.plan[a].completed=0;this.ticks=this.it=0}).defaults({}).init(function(a){this.tasker.listen("calculated",function(c,d){a.scheduler.plan[c.prio].done++;a.scheduler.tick()})}).ready(function(){}).method("frame",function(){for(var a=
this.it=this.done=0;3>a;a++)this.plan[a].done>=this.plan[a].length?(this.plan[a].done=0,this.plan[a].it=0,this.plan[a].completed++,this.plan[a].late||this.plan[a].onTime++,this.plan[a].late=!1):(this.plan[a].late=!0,this.plan[a].delayed++),this.plan[a].last=!1;this.tick()}).method("tick",function(){for(;this.tasker.isIdle()&&3>this.done;){var a=this.plan[this.it];if(a.it>=a.length)a.last||(a.last=!0,this.done+=1);else{var d=a[a.it];d.prio=this.it;this.tasker.push(d);a.it++}this.ticks=6==this.ticks?
0:this.ticks+1;this.it=c[this.ticks]}}).method("push",function(a,c){this.plan[c].push(a);this.batches+=1;this.tick()}).method("remove",function(a,c){c=this.plan[c];a=isNaN(a)?c.indexOf(a):a;0>a||(c.splice(a,1),--this.batches)});d("Scheduler",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.virtual(d.Group).ctor(function(){this.worker=null;this.queued=!1;this.tbuffers={size:0,busy:!1,stale:!0,allocated:0,results:[],backups:[],shareds:[],uniforms:[],args:[]}}).method("buffers",function(a){if(this.tbuffers.stale){a=this.items.length;var b=this.tbuffers.allocated,d=this.options.hardLimit,f=this.options.increment,h=this.api.cmds;if(0!=a){for(;a>b;)b=Math.min(d,Math.max(10,b)*f);for(var d=[],f=[],g=[],m=this.api.results||[],p=this.api.shared||[],n=0;n<m.length;n++){var l=
isNaN(m[n])?m[n].length:m[n],l=0>l?-l:l*b;d[n]=new Float32Array(l);f[n]=new Float32Array(l)}for(n=0;n<p.length;n++)l=isNaN(p[n])?p[n].length:p[n],l=0>l?-l:l,g[n]=new Float32Array(l);"string"==typeof h&&(h=this.tasker.PLUGINS[h].id);this.tbuffers={size:a,busy:!1,stale:!1,allocated:b,results:d,backups:f,shareds:g,uniforms:new Float32Array(this.api.uniforms),args:new Float32Array(this.api.args*b),cmds:isNaN(h)?new Float32Array(b):h}}this.tbuffers.stale=!1;this.invoke("syncArguments");this.tbuffers.size=
this.items.length}return this.tbuffers}).listen("calculated",function(a){a=this.tbuffers;a.stale||this.invoke("syncResults");a.tstamp=Date.now()-this.tasker.t_start}).listen("resized",function(){this.tbuffers.stale=!0});d("Batch",a)})(THREE,THREEAPP);
var StatsCPU=function(a){function d(a,b,c){a=document.createElement(a);a.id=b;a.style.cssText=c;return a}function c(a,b,c,g){var e=d("div",a,"padding:0 0 3px 3px;text-align:left;background:"+c),m=d("div",a+"Text","font-family:Tahoma,Helvetica,Arial,sans-serif;font-size:8px;font-weight:bold;line-height:15px;color:"+b);m.innerHTML=a.toUpperCase();e.appendChild(m);m=94/g;a=d("div",a+"Graph","width:94px;height:30px;background:"+b);e.appendChild(a);for(b=0;b<g;b++){var f=parseInt(m)==m?m+"px":100/g+"%";
a.appendChild(d("span","","width:"+f+";height:30px;float:left;opacity:0.9;background:"+c))}return e}function b(a){for(var b=t.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";l=a}function e(b,c){Date.now();if(b.firstChild)for(G.style.background="rgba("+7*q+", 64, 0, 1)",c=0;c<b.children.length;c++){var d=y[c]||0;a.workers[c].idle||(d=1);b.children[c].style.height=Math.max(Math.min(30,30-30*d),.25)+"px"}}function f(a,b){a.appendChild(a.firstChild).style.height=Math.max(Math.min(30,
30-30*b),.25)+"px"}function h(){for(var a=Date.now(),b=a-L,c=0;c<app.tasker.workers.length;c++)I[c]&&(y[c]=(app.tasker.workers[c].t_busy-I[c])/b),I[c]=app.tasker.workers[c].t_busy;L=a}function g(a){var b="";1E10<=a?(a/=1E9,b="G"):1E7<=a?(a/=1E6,b="M"):1E4<=a&&(a/=1E3,b="K");a=parseInt(a);return a+b}var m=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,p=m(),n=p,l=0,k=0,q=0;setInterval(function(){k++},20);setInterval(function(){q=Math.abs(50-k);k=0},1E3);var y=
[],t=d("div","statsCPU","width:100px;opacity:0.9;cursor:pointer");t.addEventListener("mousedown",function(a){a.preventDefault();b(++l%t.children.length)},!1);var u=0,z=0,x=c("tasks","#306","#ccc",94),M=x.children[0],N=x.children[1];t.appendChild(x);var A=0,E=0,x=c("batches","#09f","#ccc",94),F=x.children[0],C=x.children[1];t.appendChild(x);var w=0,D=0,x=c("queues","#99f","#339",94),r=x.children[0],v=x.children[1];t.appendChild(x);var G,J,K,I=[],L=0;a.listen("ready",function(){G=c("workers","#0f0",
"#020",a.threads);J=G.children[0];K=G.children[1];t.appendChild(G);b(3);for(var d=0;d<a.threads;d+=1)a.workers[d].busy=0,a.workers[d].idling=0;setInterval(h,1E3)});b(l);return{REVISION:14,domElement:t,setMode:b,begin:function(){p=m()},end:function(){var b=m();if(b>n+250){u=Math.round(1E3*a.tasks/(b-n));z=Math.max(z,u);M.textContent=g(u)+" TSK ("+g(z)+")";f(N,u/z);A=Math.round(1E3*a.batches/(b-n));E=Math.max(E,A);F.textContent=g(A)+" BAT ("+g(E)+")";f(C,A/E);w=Math.round(1E3*a.queue.length/(b-n));
D=Math.max(D,w);r.textContent=g(w)+" QUE ("+g(D)+")";f(v,w/D);if(K){e(K);var c=a.isIdle()?"":"BSY";J.textContent="CPUS "+c+" ("+a.threads+")";for(c=0;c<a.workers.length;c+=1)a.workers[c].busy=0,a.workers[c].idling=0}n=b;a.tasks=0;a.batches=0}return b},update:function(){p=this.end();e(K)}}};"object"===typeof module&&(module.exports=StatsCPU);
(function(a,d){a=d.Class.create("DATUI",null,["Plugin"]).proto("provides","datui").ctor(function(a){a.datui=new dat.GUI}).init(function(a){a.datui.close()});d("Plugin.DATUI",a)})(THREE,THREEAPP);
(function(a,d){a=d.Class.create("MonitorCPU",null,["Plugin"]).proto("requires","tasker").ready(function(a){var b=new StatsCPU(a.tasker);a.viewport.appendChild(b.domElement);a.listen("preframe",function(){b.begin()},-99999);a.listen("postframe",function(){b.end()},99999)});d("Plugin.MonitorCPU",a)})(THREE,THREEAPP);var LZMA=LZMA||{};
(function(a){a.iStream=function(a){this.array=new Uint8Array(a);this.size=a.byteLength;this.offset=0};a.iStream.prototype.readByte=function(){return this.array[this.offset++]};a.oStream=function(d){this.size=0;this.buffers=[];d=d||[];for(var c=0,b=d.length;c<b;c++)if(d[c]instanceof a.oStream)for(var e=d[c].buffers,f=0;f<e.length;f++)this.buffers.push(d[c].buffers[f]),this.size+=d[c].buffers[f].length;else this.buffers.push(d[c]),this.size+=d[c].length};a.oStream.prototype.writeBytes=function(a,c){if(c<=
a.byteLength)this.buffers.push(a.slice(0,c));else throw Error("Buffer too small?");this.size+=c};a.oStream.prototype.toUint8Array=function(){var a=this.size,c=this.buffers;if(1==c.length)return c[0];try{for(var b=new Uint8Array(a),e=0,f=0;e<c.length;e++)b.set(c[e],f),f+=c[e].length;c[0]=b;c.length=1;return b}catch(h){console.error("Error allocating Uint8Array of size: ",a),console.error("Message given was: ",h.toString())}return null};a.oStream.prototype.forEach=function(a){for(var c=0;c<this.buffers.length;c++)a.call(this,
this.buffers[c])};a.oStream.prototype.toCodePoints=function(){a.UTF8||this.toUint8Array();return a.UTF8.decode(this.toUint8Array())};a.oStream.prototype.toString=function(){var d=this.buffers,c="";a.UTF8&&(d=[this.toCodePoints()]);for(var b=0,e=d.length;b<e;b++)for(var f=0,h=d[b].length;f<h;f++)c+=String.fromCharCode(d[b][f]);return c}})(LZMA);var UTF8=UTF8||{};
(function(a){function d(a){for(var b=0,c=a.length;c--;)128!=(a[c]&192)&&++b;return b}function c(){if(h>=f)throw Error("Invalid byte index");var a=e[h++]&255;if(128==(a&192))return a&63;throw Error("Invalid continuation byte");}function b(){var a,b,d,n;if((h|0)>(f|0))throw Error("Invalid byte index");a=e[h]&255;h=h+1|0;if(0==(a&128))return a;if(192==(a&224)){b=c();a=(a&31)<<6|b;if(128<=a)return a;throw Error("Invalid continuation byte");}if(224==(a&240)){b=c();d=c();a=(a&15)<<12|b<<6|d;if(2048<=a){if(55296<=
a&&57343>=a)throw Error("Lone surrogate U+"+a.toString(16).toUpperCase()+" is not a scalar value");return a}throw Error("Invalid continuation byte");}if(240==(a&248)&&(b=c(),d=c(),n=c(),a=(a&7)<<18|b<<12|d<<6|n,65536<=a&&1114111>=a))return a;throw Error("Invalid UTF-8 detected");}var e,f,h;a.count=d;a.decode=function(a){var c=0,p=d(a),p=new Uint16Array(p);h=0;e=a;f=a.length;for(2<(f|0)&239==(e[0]|0)&187==(e[1]|0)&191==(e[2]|0)&&(h=3);(h|0)<(f|0);)a=b()|0,p[c++]=a;return p};"undefined"!=typeof LZMA&&
(LZMA.UTF8=a)})(UTF8);var LZMA=LZMA||{},WLZMA=WLZMA||{};
(function(a,d){function c(b){var c=b.data[0],d=b.data[1];b=b.data[2];var e=this.manager;this.idle=!0;e.idle++;if(-1==e.next||e.next>c)e.next=c;b?this.reject(b):d?this.resolve(new a.oStream(d)):this.reject(null);this.reject=this.resolve=null;f.call(e)}function b(){for(var a=this.listeners;a.length;)a.shift().call(this);this.isReady=!0}function e(a){var d=this.manager;if("ready"===a.data)this.onmessage=c,this.isReady=!0,d.started++,d.started==d.workers.length&&b.call(d);else throw Error("Worker did not startup!?");
}function f(){for(;this.queue.length&&this.idle;){var a=this.next,b=this.queue.shift();"function"==typeof b[0]&&(b[0]=b[0].call(this));var c=this.workers[a];if(!c)debugger;c.postMessage([a,b[0]],[b[0]]);c.resolve=b[1];c.reject=b[2];c.idle=!1;for(--this.idle;a<this.workers.length;a++)if(this.workers[a].idle){this.next=a;return}this.next=-1}}function h(b){"object"==typeof b&&(b instanceof a.iStream&&(b=b.array),b instanceof Uint8Array&&(b=b.buffer));return b}d.wrkurl=d.wrkurl||"wlzma.wrk.js";d.Manager=
function(a,b){a=a||6;this.queue=[];this.workers=[];b=b||d.wrkurl;this.listeners=[];this.isReady=!1;for(var c=this.started=0;c<a;c++){var f=new Worker(b);f.onmessage=e;this.workers.push(f);f.manager=this;f.idle=!0}this.idle=a;this.next=0};d.Manager.prototype.ready=function(a){this.isReady?a.call(this):this.listeners.push(a)};d.Manager.prototype.decode=function(a){var b=this;a=h(a);return new Promise(function(c,d){b.queue.push([a,c,d]);f.call(b)})}})(LZMA,WLZMA);
(function(a,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define([],d):"object"===typeof exports?exports.dat=d():a.dat=d()})(this,function(){return function(a){function d(b){if(c[b])return c[b].exports;var e=c[b]={exports:{},id:b,loaded:!1};a[b].call(e.exports,e,e.exports,d);e.loaded=!0;return e.exports}var c={};d.m=a;d.c=c;d.p="";return d(0)}([function(a,d,c){d=c(1);a.exports=(d&&d.__esModule?d:{default:d}).default},function(a,d,
c){function b(a){return a&&a.__esModule?a:{default:a}}d.__esModule=!0;a=c(2);a=b(a);var e=c(6),e=b(e),f=c(3),f=b(f),h=c(7),h=b(h),g=c(8),g=b(g),m=c(10),m=b(m),p=c(11),p=b(p),n=c(12),n=b(n),l=c(13),l=b(l),k=c(14),k=b(k),q=c(15),q=b(q),y=c(16),y=b(y),t=c(9),t=b(t);c=c(17);c=b(c);d.default={color:{Color:a.default,math:e.default,interpret:f.default},controllers:{Controller:h.default,BooleanController:g.default,OptionController:m.default,StringController:p.default,NumberController:n.default,NumberControllerBox:l.default,
NumberControllerSlider:k.default,FunctionController:q.default,ColorController:y.default},dom:{dom:t.default},gui:{GUI:c.default},GUI:c.default}},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){Object.defineProperty(a,b,{get:function(){if("RGB"===this.__state.space)return this.__state[b];n.recalculateRGB(this,b,c);return this.__state[b]},set:function(a){"RGB"!==this.__state.space&&(n.recalculateRGB(this,b,c),this.__state.space="RGB");this.__state[b]=a}})}function f(a,
b){Object.defineProperty(a,b,{get:function(){if("HSV"===this.__state.space)return this.__state[b];n.recalculateHSV(this);return this.__state[b]},set:function(a){"HSV"!==this.__state.space&&(n.recalculateHSV(this),this.__state.space="HSV");this.__state[b]=a}})}d.__esModule=!0;a=c(3);var h=b(a);a=c(6);var g=b(a);a=c(4);var m=b(a);c=c(5);var p=b(c),n=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.__state=h.default.apply(this,arguments);if(!1===
this.__state)throw Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}a.prototype.toString=function(){return(0,m.default)(this)};a.prototype.toHexString=function(){return(0,m.default)(this,!0)};a.prototype.toOriginal=function(){return this.__state.conversion.write(this)};return a}();n.recalculateRGB=function(a,b,c){if("HEX"===a.__state.space)a.__state[b]=g.default.component_from_hex(a.__state.hex,c);else if("HSV"===a.__state.space)p.default.extend(a.__state,g.default.hsv_to_rgb(a.__state.h,
a.__state.s,a.__state.v));else throw Error("Corrupted color state");};n.recalculateHSV=function(a){var b=g.default.rgb_to_hsv(a.r,a.g,a.b);p.default.extend(a.__state,{s:b.s,v:b.v});p.default.isNaN(b.h)?p.default.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=b.h};n.COMPONENTS="r g b h s v hex a".split(" ");e(n.prototype,"r",2);e(n.prototype,"g",1);e(n.prototype,"b",0);f(n.prototype,"h");f(n.prototype,"s");f(n.prototype,"v");Object.defineProperty(n.prototype,"a",{get:function(){return this.__state.a},
set:function(a){this.__state.a=a}});Object.defineProperty(n.prototype,"hex",{get:function(){this.__state.hex=g.default.rgb_to_hex(this.r,this.g,this.b);return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});d.default=n},function(a,d,c){d.__esModule=!0;a=(a=c(4))&&a.__esModule?a:{default:a};var b=(c=c(5))&&c.__esModule?c:{default:c},e=[{litmus:b.default.isString,conversions:{THREE_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===
a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString(),0)}},write:a.default},SIX_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9]{6})$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString(),0)}},write:a.default},CSS_RGB:{read:function(a){a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:a.default},CSS_RGBA:{read:function(a){a=
a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:a.default}}},{litmus:b.default.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.default.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!==a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},
RGBA_ARRAY:{read:function(a){return 4!==a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.default.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.default.isNumber(a.r)&&b.default.isNumber(a.g)&&b.default.isNumber(a.b)&&b.default.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.default.isNumber(a.r)&&b.default.isNumber(a.g)&&b.default.isNumber(a.b)?
{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.default.isNumber(a.h)&&b.default.isNumber(a.s)&&b.default.isNumber(a.v)&&b.default.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.default.isNumber(a.h)&&b.default.isNumber(a.s)&&b.default.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}],
f=void 0,h=void 0;d.default=function(){h=!1;var a=1<arguments.length?b.default.toArray(arguments):arguments[0];b.default.each(e,function(c){if(c.litmus(a))return b.default.each(c.conversions,function(c,d){f=c.read(a);if(!1===h&&!1!==f)return h=f,f.conversionName=d,f.conversion=c,b.default.BREAK}),b.default.BREAK});return h}},function(a,d){d.__esModule=!0;d.default=function(a,b){var d=a.__state.conversionName.toString(),f=Math.round(a.r),h=Math.round(a.g),g=Math.round(a.b),m=a.a,p=Math.round(a.h),
n=a.s.toFixed(1),l=a.v.toFixed(1);if(b||"THREE_CHAR_HEX"===d||"SIX_CHAR_HEX"===d){for(a=a.hex.toString(16);6>a.length;)a="0"+a;return"#"+a}return"CSS_RGB"===d?"rgb("+f+","+h+","+g+")":"CSS_RGBA"===d?"rgba("+f+","+h+","+g+","+m+")":"HEX"===d?"0x"+a.hex.toString(16):"RGB_ARRAY"===d?"["+f+","+h+","+g+"]":"RGBA_ARRAY"===d?"["+f+","+h+","+g+","+m+"]":"RGB_OBJ"===d?"{r:"+f+",g:"+h+",b:"+g+"}":"RGBA_OBJ"===d?"{r:"+f+",g:"+h+",b:"+g+",a:"+m+"}":"HSV_OBJ"===d?"{h:"+p+",s:"+n+",v:"+l+"}":"HSVA_OBJ"===d?"{h:"+
p+",s:"+n+",v:"+l+",a:"+m+"}":"unknown format"}},function(a,d){d.__esModule=!0;var c=Array.prototype.forEach,b=Array.prototype.slice;a={BREAK:{},extend:function(a){this.each(b.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach(function(c){this.isUndefined(b[c])||(a[c]=b[c])}.bind(this))},this);return a},defaults:function(a){this.each(b.call(arguments,1),function(b){(this.isObject(b)?Object.keys(b):[]).forEach(function(c){this.isUndefined(a[c])&&(a[c]=b[c])}.bind(this))},this);
return a},compose:function(){var a=b.call(arguments);return function(){for(var c=b.call(arguments),d=a.length-1;0<=d;d--)c=[a[d].apply(this,c)];return c[0]}},each:function(a,b,d){if(a)if(c&&a.forEach&&a.forEach===c)a.forEach(b,d);else if(a.length===a.length+0){var g,m;g=0;for(m=a.length;g<m&&!(g in a&&b.call(d,a[g],g)===this.BREAK);g++);}else for(g in a)if(b.call(d,a[g],g)===this.BREAK)break},defer:function(a){setTimeout(a,0)},debounce:function(a,b){var c=void 0;return function(){var d=arguments,
m=!c;clearTimeout(c);c=setTimeout(function(){c=null},b);m&&a.apply(this,d)}},toArray:function(a){return a.toArray?a.toArray():b.call(a)},isUndefined:function(a){return void 0===a},isNull:function(a){return null===a},isNaN:function(a){function b(c){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(a){return isNaN(a)}),isArray:Array.isArray||function(a){return a.constructor===Array},isObject:function(a){return a===Object(a)},isNumber:function(a){return a===
a+0},isString:function(a){return a===a+""},isBoolean:function(a){return!1===a||!0===a},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)}};d.default=a},function(a,d){d.__esModule=!0;var c=void 0;d.default={hsv_to_rgb:function(a,c,d){var h=a/60-Math.floor(a/60),g=d*(1-c),m=d*(1-h*c);c=d*(1-(1-h)*c);a=[[d,c,g],[m,d,g],[g,d,c],[g,m,d],[c,g,d],[d,g,m]][Math.floor(a/60)%6];return{r:255*a[0],g:255*a[1],b:255*a[2]}},rgb_to_hsv:function(a,c,d){var h=Math.max(a,c,d),g=h-
Math.min(a,c,d);if(0===h)return{h:NaN,s:0,v:0};a=(a===h?(c-d)/g:c===h?2+(d-a)/g:4+(a-c)/g)/6;0>a&&(a+=1);return{h:360*a,s:g/h,v:h/255}},rgb_to_hex:function(a,c,d){a=this.hex_with_component(0,2,a);a=this.hex_with_component(a,1,c);return a=this.hex_with_component(a,0,d)},component_from_hex:function(a,c){return a>>8*c&255},hex_with_component:function(a,d,f){return f<<(c=8*d)|a&~(255<<c)}}},function(a,d){d.__esModule=!0;a=function(){function a(b,d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.initialValue=b[d];this.domElement=document.createElement("div");this.object=b;this.property=d;this.__onFinishChange=this.__onChange=void 0}a.prototype.onChange=function(a){this.__onChange=a;return this};a.prototype.onFinishChange=function(a){this.__onFinishChange=a;return this};a.prototype.setValue=function(a){this.object[this.property]=a;this.__onChange&&this.__onChange.call(this,a);this.updateDisplay();return this};a.prototype.getValue=function(){return this.object[this.property]};a.prototype.updateDisplay=
function(){return this};a.prototype.isModified=function(){return this.initialValue!==this.getValue()};return a}();d.default=a},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var f=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var n=b(this,a.call(this,d,e));n.__prev=n.getValue();n.__checkbox=document.createElement("input");n.__checkbox.setAttribute("type","checkbox");f.default.bind(n.__checkbox,"change",
function(){n.setValue(!n.__prev)},!1);n.domElement.appendChild(n.__checkbox);n.updateDisplay();return n}e(c,a);c.prototype.setValue=function(b){b=a.prototype.setValue.call(this,b);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());this.__prev=this.getValue();return b};c.prototype.updateDisplay=function(){!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1;return a.prototype.updateDisplay.call(this)};return c}(a.default);
d.default=c},function(a,d,c){function b(a){if("0"===a||e.default.isUndefined(a))return 0;a=a.match(h);return e.default.isNull(a)?0:parseFloat(a[1])}d.__esModule=!0;var e=(a=c(5))&&a.__esModule?a:{default:a},f={};e.default.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(a,b){e.default.each(a,function(a){f[a]=b})});var h=/(\d+(\.\d+)?)px/,g={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=
b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(a,b,c){e.default.isUndefined(b)&&(b=!0);e.default.isUndefined(c)&&(c=!0);a.style.position="absolute";b&&(a.style.left=0,a.style.right=0);c&&(a.style.top=0,a.style.bottom=0)},fakeEvent:function(a,b,c,d){c=c||{};var g=f[b];if(!g)throw Error("Event type "+b+" not supported.");var h=document.createEvent(g);switch(g){case "MouseEvents":h.initMouseEvent(b,
c.bubbles||!1,c.cancelable||!0,window,c.clickCount||1,0,0,c.x||c.clientX||0,c.y||c.clientY||0,!1,!1,!1,!1,0,null);break;case "KeyboardEvents":g=h.initKeyboardEvent||h.initKeyEvent;e.default.defaults(c,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});g(b,c.bubbles||!1,c.cancelable,window,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.keyCode,c.charCode);break;default:h.initEvent(b,c.bubbles||!1,c.cancelable||!0)}e.default.defaults(h,d);a.dispatchEvent(h)},bind:function(a,
b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c);return g},unbind:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c);return g},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1===c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return g},removeClass:function(a,b){if(b)if(a.className===
b)a.removeAttribute("class");else{var c=a.className.split(/ +/);b=c.indexOf(b);-1!==b&&(c.splice(b,1),a.className=c.join(" "))}else a.className=void 0;return g},hasClass:function(a,b){return(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)")).test(a.className)||!1},getWidth:function(a){a=getComputedStyle(a);return b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){a=getComputedStyle(a);return b(a["border-top-width"])+b(a["border-bottom-width"])+
b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b={left:0,top:0};if(a.offsetParent){do b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;while(a)}return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};d.default=g},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==
typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=c(7);a=b(a);var h=c(9),g=b(h);c=c(5);var m=b(c);c=function(a){function b(c,d,f){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var h=e(this,a.call(this,c,d)),t=f;h.__select=document.createElement("select");m.default.isArray(t)&&function(){var a={};m.default.each(t,function(b){a[b]=b});t=a}();m.default.each(t,function(a,b){var c=document.createElement("option");c.innerHTML=b;c.setAttribute("value",a);h.__select.appendChild(c)});h.updateDisplay();g.default.bind(h.__select,"change",function(){h.setValue(this.options[this.selectedIndex].value)});h.domElement.appendChild(h.__select);return h}f(b,a);b.prototype.setValue=function(b){b=
a.prototype.setValue.call(this,b);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());return b};b.prototype.updateDisplay=function(){if(g.default.isActive(this.__select))return this;this.__select.value=this.getValue();return a.prototype.updateDisplay.call(this)};return b}(a.default);d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var f=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e){function n(){l.setValue(l.__input.value)}if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
var l=d=b(this,a.call(this,d,e));d.__input=document.createElement("input");d.__input.setAttribute("type","text");f.default.bind(d.__input,"keyup",n);f.default.bind(d.__input,"change",n);f.default.bind(d.__input,"blur",function(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())});f.default.bind(d.__input,"keydown",function(a){13===a.keyCode&&this.blur()});d.updateDisplay();d.domElement.appendChild(d.__input);return d}e(c,a);c.prototype.updateDisplay=function(){f.default.isActive(this.__input)||
(this.__input.value=this.getValue());return a.prototype.updateDisplay.call(this)};return c}(a.default);d.default=c},function(a,d,c){function b(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a){a=a.toString();return-1<a.indexOf(".")?
a.length-a.indexOf(".")-1:0}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var f=(c=c(5))&&c.__esModule?c:{default:c};c=function(a){function c(b,d,n){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");b=a.call(this,b,d);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;n=n||{};b.__min=n.min;b.__max=n.max;b.__step=n.step;f.default.isUndefined(b.__step)?b.__impliedStep=
0===b.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(b.initialValue))/Math.LN10))/10:b.__impliedStep=b.__step;b.__precision=e(b.__impliedStep);return b}b(c,a);c.prototype.setValue=function(b){void 0!==this.__min&&b<this.__min?b=this.__min:void 0!==this.__max&&b>this.__max&&(b=this.__max);void 0!==this.__step&&0!==b%this.__step&&(b=Math.round(b/this.__step)*this.__step);return a.prototype.setValue.call(this,b)};c.prototype.min=function(a){this.__min=a;return this};c.prototype.max=function(a){this.__max=
a;return this};c.prototype.step=function(a){this.__impliedStep=this.__step=a;this.__precision=e(a);return this};return c}(a.default);d.default=c},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=c(12);a=b(a);var h=c(9),g=b(h);c=c(5);var m=b(c);c=function(a){function b(c,d,f){function h(){z.__onFinishChange&&z.__onFinishChange.call(z,z.getValue())}function t(a){var b=x-a.clientY;z.setValue(z.getValue()+b*z.__impliedStep);x=a.clientY}function u(){g.default.unbind(document,"mousemove",t);g.default.unbind(document,
"mouseup",u);h()}if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");c=e(this,a.call(this,c,d,f));c.__truncationSuspended=!1;var z=c,x=void 0;c.__input=document.createElement("input");c.__input.setAttribute("type","text");g.default.bind(c.__input,"change",function(){var a=parseFloat(z.__input.value);m.default.isNaN(a)||z.setValue(a)});g.default.bind(c.__input,"blur",function(){h()});g.default.bind(c.__input,"mousedown",function(a){g.default.bind(document,"mousemove",t);
g.default.bind(document,"mouseup",u);x=a.clientY});g.default.bind(c.__input,"keydown",function(a){13===a.keyCode&&(z.__truncationSuspended=!0,this.blur(),z.__truncationSuspended=!1,h())});c.updateDisplay();c.domElement.appendChild(c.__input);return c}f(b,a);b.prototype.updateDisplay=function(){var b=this.__input,c;if(this.__truncationSuspended)c=this.getValue();else{c=this.getValue();var d=Math.pow(10,this.__precision);c=Math.round(c*d)/d}b.value=c;return a.prototype.updateDisplay.call(this)};return b}(a.default);
d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}function f(a,b,c,d,e){return d+(a-b)/(c-b)*(e-d)}d.__esModule=!0;a=(a=c(12))&&a.__esModule?a:{default:a};var h=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e,l,k,q){function y(a){a.preventDefault();var b=u.__background.getBoundingClientRect();u.setValue(f(a.clientX,b.left,b.right,u.__min,u.__max));return!1}function t(){h.default.unbind(document,"mousemove",y);h.default.unbind(document,"mouseup",t);u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");var u=d=b(this,a.call(this,d,e,{min:l,max:k,step:q}));d.__background=document.createElement("div");d.__foreground=document.createElement("div");h.default.bind(d.__background,"mousedown",function(a){document.activeElement.blur();h.default.bind(document,"mousemove",y);h.default.bind(document,"mouseup",t);y(a)});h.default.addClass(d.__background,"slider");h.default.addClass(d.__foreground,"slider-fg");d.updateDisplay();d.__background.appendChild(d.__foreground);
d.domElement.appendChild(d.__background);return d}e(c,a);c.prototype.updateDisplay=function(){var b=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=100*b+"%";return a.prototype.updateDisplay.call(this)};return c}(a.default);d.default=c},function(a,d,c){function b(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==
b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}d.__esModule=!0;a=(a=c(7))&&a.__esModule?a:{default:a};var f=(c=c(9))&&c.__esModule?c:{default:c};c=function(a){function c(d,e,n){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var l=b(this,a.call(this,
d,e));l.__button=document.createElement("div");l.__button.innerHTML=void 0===n?"Fire":n;f.default.bind(l.__button,"click",function(a){a.preventDefault();l.fire();return!1});f.default.addClass(l.__button,"button");l.domElement.appendChild(l.__button);return l}e(c,a);c.prototype.fire=function(){this.__onChange&&this.__onChange.call(this);this.getValue().call(this.object);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())};return c}(a.default);d.default=c},function(a,d,c){function b(a){return a&&
a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}function h(a,b,c,d){a.style.background="";k.default.each(q,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function g(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+=
"background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}d.__esModule=!0;a=c(7);a=b(a);var m=c(9),p=b(m),m=c(2),n=b(m),m=c(3),l=b(m);c=c(5);var k=b(c);
c=function(a){function b(c,d){function f(a){F(a);p.default.bind(document,"mousemove",F);p.default.bind(document,"mouseup",m)}function m(){p.default.unbind(document,"mousemove",F);p.default.unbind(document,"mouseup",m);E()}function q(){var a=(0,l.default)(this.value);!1!==a?(w.__color.__state=a,w.setValue(w.__color.toOriginal())):this.value=w.__color.toString()}function A(){p.default.unbind(document,"mousemove",C);p.default.unbind(document,"mouseup",A);E()}function E(){w.__onFinishChange&&w.__onFinishChange.call(w,
w.__color.toOriginal())}function F(a){a.preventDefault();var b=w.__saturation_field.getBoundingClientRect(),c=(a.clientX-b.left)/(b.right-b.left);a=1-(a.clientY-b.top)/(b.bottom-b.top);1<a?a=1:0>a&&(a=0);1<c?c=1:0>c&&(c=0);w.__color.v=a;w.__color.s=c;w.setValue(w.__color.toOriginal());return!1}function C(a){a.preventDefault();var b=w.__hue_field.getBoundingClientRect();a=1-(a.clientY-b.top)/(b.bottom-b.top);1<a?a=1:0>a&&(a=0);w.__color.h=360*a;w.setValue(w.__color.toOriginal());return!1}if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");c=e(this,a.call(this,c,d));c.__color=new n.default(c.getValue());c.__temp=new n.default(0);var w=c;c.domElement=document.createElement("div");p.default.makeSelectable(c.domElement,!1);c.__selector=document.createElement("div");c.__selector.className="selector";c.__saturation_field=document.createElement("div");c.__saturation_field.className="saturation-field";c.__field_knob=document.createElement("div");c.__field_knob.className="field-knob";
c.__field_knob_border="2px solid ";c.__hue_knob=document.createElement("div");c.__hue_knob.className="hue-knob";c.__hue_field=document.createElement("div");c.__hue_field.className="hue-field";c.__input=document.createElement("input");c.__input.type="text";c.__input_textShadow="0 1px 1px ";p.default.bind(c.__input,"keydown",function(a){13===a.keyCode&&q.call(this)});p.default.bind(c.__input,"blur",q);p.default.bind(c.__selector,"mousedown",function(){p.default.addClass(this,"drag").bind(document,"mouseup",
function(){p.default.removeClass(w.__selector,"drag")})});d=document.createElement("div");k.default.extend(c.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});k.default.extend(c.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:c.__field_knob_border+(.5>c.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});k.default.extend(c.__hue_knob.style,{position:"absolute",
width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});k.default.extend(c.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});k.default.extend(d.style,{width:"100%",height:"100%",background:"none"});h(d,"top","rgba(0,0,0,0)","#000");k.default.extend(c.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"});g(c.__hue_field);
k.default.extend(c.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:c.__input_textShadow+"rgba(0,0,0,0.7)"});p.default.bind(c.__saturation_field,"mousedown",f);p.default.bind(c.__field_knob,"mousedown",f);p.default.bind(c.__hue_field,"mousedown",function(a){C(a);p.default.bind(document,"mousemove",C);p.default.bind(document,"mouseup",A)});c.__saturation_field.appendChild(d);c.__selector.appendChild(c.__field_knob);c.__selector.appendChild(c.__saturation_field);
c.__selector.appendChild(c.__hue_field);c.__hue_field.appendChild(c.__hue_knob);c.domElement.appendChild(c.__input);c.domElement.appendChild(c.__selector);c.updateDisplay();return c}f(b,a);b.prototype.updateDisplay=function(){var a=(0,l.default)(this.getValue());if(!1!==a){var b=!1;k.default.each(n.default.COMPONENTS,function(c){if(!k.default.isUndefined(a[c])&&!k.default.isUndefined(this.__color.__state[c])&&a[c]!==this.__color.__state[c])return b=!0,{}},this);b&&k.default.extend(this.__color.__state,
a)}k.default.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var c=.5>this.__color.v||.5<this.__color.s?255:0,d=255-c;k.default.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+c+","+c+","+c+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;h(this.__saturation_field,"left","#fff",this.__temp.toHexString());
this.__input.value=this.__color.toString();k.default.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+c+","+c+","+c+")",textShadow:this.__input_textShadow+"rgba("+d+","+d+","+d+",.7)"})};return b}(a.default);var q=["-moz-","-o-","-webkit-","-ms-",""];d.default=c},function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=document.createElement("li");b&&d.appendChild(b);c?a.__ul.insertBefore(d,c):a.__ul.appendChild(d);a.onResize();return d}
function f(a,b){a=a.__preset_select[a.__preset_select.selectedIndex];a.innerHTML=b?a.value+"*":a.value}function h(a,b,c){c.__li=b;c.__gui=a;v.default.extend(c,{options:function(b){if(1<arguments.length){var d=c.__li.nextElementSibling;c.remove();return m(a,c.object,c.property,{before:d,factoryArgs:[v.default.toArray(arguments)]})}if(v.default.isArray(b)||v.default.isObject(b))return d=c.__li.nextElementSibling,c.remove(),m(a,c.object,c.property,{before:d,factoryArgs:[b]})},name:function(a){c.__li.firstElementChild.firstElementChild.innerHTML=
a;return c},listen:function(){c.__gui.listen(c);return c},remove:function(){c.__gui.remove(c);return c}});if(c instanceof F.default)(function(){var a=new E.default(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});v.default.each(["updateDisplay","onChange","onFinishChange","step"],function(b){var d=c[b],e=a[b];c[b]=a[b]=function(){var b=Array.prototype.slice.call(arguments);e.apply(a,b);return d.apply(c,b)}});r.default.addClass(b,"has-slider");c.domElement.insertBefore(a.domElement,c.domElement.firstElementChild)})();
else if(c instanceof E.default){var d=function(b){if(v.default.isNumber(c.__min)&&v.default.isNumber(c.__max)){b=c.__li.firstElementChild.firstElementChild.innerHTML;var d=-1<c.__gui.__listening.indexOf(c);c.remove();var e=m(a,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]});e.name(b);d&&e.listen();return e}return b};c.min=v.default.compose(d,c.min);c.max=v.default.compose(d,c.max)}else c instanceof N.default?(r.default.bind(b,"click",function(){r.default.fakeEvent(c.__checkbox,
"click")}),r.default.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):c instanceof A.default?(r.default.bind(b,"click",function(){r.default.fakeEvent(c.__button,"click")}),r.default.bind(b,"mouseover",function(){r.default.addClass(c.__button,"hover")}),r.default.bind(b,"mouseout",function(){r.default.removeClass(c.__button,"hover")})):c instanceof C.default&&(r.default.addClass(b,"color"),c.updateDisplay=v.default.compose(function(a){b.style.borderLeftColor=c.__color.toString();return a},
c.updateDisplay),c.updateDisplay());c.setValue=v.default.compose(function(b){a.getRoot().__preset_select&&c.isModified()&&f(a.getRoot(),!0);return b},c.setValue)}function g(a,b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!==d){var e=c.__rememberedObjectIndecesToControllers[d];void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e);e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])a=c[a.preset];else if(c.Default)a=c.Default;else return;
a[d]&&void 0!==a[d][b.property]&&(d=a[d][b.property],b.initialValue=d,b.setValue(d))}}}function m(a,b,c,d){if(void 0===b[c])throw Error('Object "'+b+'" has no property "'+c+'"');d.color?b=new C.default(b,c):(b=[b,c].concat(d.factoryArgs),b=x.default.apply(a,b));d.before instanceof M.default&&(d.before=d.before.__li);g(a,b);r.default.addClass(b.domElement,"c");c=document.createElement("span");r.default.addClass(c,"property-name");c.innerHTML=b.property;var f=document.createElement("div");f.appendChild(c);
f.appendChild(b.domElement);d=e(a,f,d.before);r.default.addClass(d,B.CLASS_CONTROLLER_ROW);b instanceof C.default?r.default.addClass(d,"color"):r.default.addClass(d,t(b.getValue()));h(a,d,b);a.__controllers.push(b);return b}function p(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function n(a){var b=a.__save_row=document.createElement("li");r.default.addClass(a.domElement,"has-save");
a.__ul.insertBefore(b,a.__ul.firstChild);r.default.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";r.default.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";r.default.addClass(d,"button");r.default.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";r.default.addClass(e,"button");r.default.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert";r.default.addClass(f,"button");r.default.addClass(f,
"revert");var g=a.__preset_select=document.createElement("select");a.load&&a.load.remembered?v.default.each(a.load.remembered,function(b,c){p(a,c,c===a.preset)}):p(a,"Default",!1);r.default.bind(g,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value});b.appendChild(g);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);G&&function(){var b=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");
document.getElementById("dg-save-locally").style.display="block";"true"===localStorage.getItem(document.location.href+".isLocal")&&c.setAttribute("checked","checked");b.style.display=a.useLocalStorage?"block":"none";r.default.bind(c,"change",function(){a.useLocalStorage=!a.useLocalStorage;b.style.display=a.useLocalStorage?"block":"none"})}();var h=document.getElementById("dg-new-constructor");r.default.bind(h,"keydown",function(a){!a.metaKey||67!==a.which&&67!==a.keyCode||J.hide()});r.default.bind(c,
"click",function(){h.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);J.show();h.focus();h.select()});r.default.bind(d,"click",function(){a.save()});r.default.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});r.default.bind(f,"click",function(){a.revert()})}function l(a){function b(c){c.preventDefault();a.width+=e-c.clientX;a.onResize();e=c.clientX;return!1}function c(){r.default.removeClass(a.__closeButton,B.CLASS_DRAG);r.default.unbind(document,"mousemove",
b);r.default.unbind(document,"mouseup",c)}function d(f){f.preventDefault();e=f.clientX;r.default.addClass(a.__closeButton,B.CLASS_DRAG);r.default.bind(document,"mousemove",b);r.default.bind(document,"mouseup",c);return!1}var e=void 0;a.__resize_handle=document.createElement("div");v.default.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});r.default.bind(a.__resize_handle,"mousedown",d);r.default.bind(a.__closeButton,"mousedown",
d);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function k(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}function q(a,b){var c={};v.default.each(a.__rememberedObjects,function(d,e){var f={};v.default.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f});return c}function y(a){0!==a.length&&w.default.call(window,
function(){y(a)});v.default.each(a,function(a){a.updateDisplay()})}$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){$jscomp.initSymbol();$jscomp.initSymbol();return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};d=c(18);d=b(d);var u=c(19),z=b(u),u=c(20),x=b(u),u=c(7),M=b(u),u=c(8),N=b(u),u=c(15),A=b(u),u=c(13),E=b(u),u=c(14),F=b(u),u=c(16),C=
b(u),u=c(21),w=b(u),u=c(22),D=b(u),u=c(9),r=b(u),u=c(5),v=b(u);c=c(23);c=b(c);d.default.inject(c.default);var G;try{G="localStorage"in window&&null!==window.localStorage}catch(P){G=!1}var J=void 0,K=!0,I=void 0,L=!1,O=[],B=function H(a){function b(){var a=c.getRoot();a.width+=1;v.default.defer(function(){--a.width})}var c=this,d=a||{};this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);r.default.addClass(this.domElement,"dg");
this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];d=v.default.defaults(d,{autoPlace:!0,width:H.DEFAULT_WIDTH});d=v.default.defaults(d,{resizable:d.autoPlace,hideable:d.autoPlace});v.default.isUndefined(d.load)?d.load={preset:"Default"}:d.preset&&(d.load.preset=d.preset);v.default.isUndefined(d.parent)&&d.hideable&&O.push(this);d.resizable=v.default.isUndefined(d.parent)&&d.resizable;d.autoPlace&&v.default.isUndefined(d.scrollable)&&
(d.scrollable=!0);var f=G&&"true"===localStorage.getItem(document.location.href+".isLocal"),g=void 0;Object.defineProperties(this,{parent:{get:function(){return d.parent}},scrollable:{get:function(){return d.scrollable}},autoPlace:{get:function(){return d.autoPlace}},preset:{get:function(){return c.parent?c.getRoot().preset:d.load.preset},set:function(a){c.parent?c.getRoot().preset=a:d.load.preset=a;for(a=0;a<this.__preset_select.length;a++)this.__preset_select[a].value===this.preset&&(this.__preset_select.selectedIndex=
a);c.revert()}},width:{get:function(){return d.width},set:function(a){d.width=a;k(c,a)}},name:{get:function(){return d.name},set:function(a){d.name=a;titleRowName&&(titleRowName.innerHTML=d.name)}},closed:{get:function(){return d.closed},set:function(a){d.closed=a;d.closed?r.default.addClass(c.__ul,H.CLASS_CLOSED):r.default.removeClass(c.__ul,H.CLASS_CLOSED);this.onResize();c.__closeButton&&(c.__closeButton.innerHTML=a?H.TEXT_OPEN:H.TEXT_CLOSED)}},load:{get:function(){return d.load}},useLocalStorage:{get:function(){return f},
set:function(a){G&&((f=a)?r.default.bind(window,"unload",g):r.default.unbind(window,"unload",g),localStorage.setItem(document.location.href+".isLocal",a))}}});v.default.isUndefined(d.parent)?(d.closed=!1,r.default.addClass(this.domElement,H.CLASS_MAIN),r.default.makeSelectable(this.domElement,!1),G&&f&&(c.useLocalStorage=!0,a=localStorage.getItem(document.location.href+".gui"))&&(d.load=JSON.parse(a)),this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=H.TEXT_CLOSED,r.default.addClass(this.__closeButton,
H.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),r.default.bind(this.__closeButton,"click",function(){c.closed=!c.closed})):(void 0===d.closed&&(d.closed=!0),a=document.createTextNode(d.name),r.default.addClass(a,"controller-name"),a=e(c,a),r.default.addClass(this.__ul,H.CLASS_CLOSED),r.default.addClass(a,"title"),r.default.bind(a,"click",function(a){a.preventDefault();c.closed=!c.closed;return!1}),d.closed||(this.closed=!1));d.autoPlace&&(v.default.isUndefined(d.parent)&&(K&&
(I=document.createElement("div"),r.default.addClass(I,"dg"),r.default.addClass(I,H.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(I),K=!1),I.appendChild(this.domElement),r.default.addClass(this.domElement,H.CLASS_AUTO_PLACE)),this.parent||k(c,d.width));this.__resizeHandler=function(){c.onResizeDebounced()};r.default.bind(window,"resize",this.__resizeHandler);r.default.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler);r.default.bind(this.__ul,"transitionend",this.__resizeHandler);r.default.bind(this.__ul,
"oTransitionEnd",this.__resizeHandler);this.onResize();d.resizable&&l(this);this.saveToLocalStorageIfPossible=g=function(){G&&"true"===localStorage.getItem(document.location.href+".isLocal")&&localStorage.setItem(document.location.href+".gui",JSON.stringify(c.getSaveObject()))};d.parent||b()};B.toggleHide=function(){L=!L;v.default.each(O,function(a){a.domElement.style.display=L?"none":""})};B.CLASS_AUTO_PLACE="a";B.CLASS_AUTO_PLACE_CONTAINER="ac";B.CLASS_MAIN="main";B.CLASS_CONTROLLER_ROW="cr";B.CLASS_TOO_TALL=
"taller-than-window";B.CLASS_CLOSED="closed";B.CLASS_CLOSE_BUTTON="close-button";B.CLASS_DRAG="drag";B.DEFAULT_WIDTH=245;B.TEXT_CLOSED="Close Controls";B.TEXT_OPEN="Open Controls";B._keydownHandler=function(a){!document.activeElement||"text"===document.activeElement.type||72!==a.which&&72!==a.keyCode||B.toggleHide()};r.default.bind(window,"keydown",B._keydownHandler,!1);v.default.extend(B.prototype,{add:function(a,b){return m(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,
b){return m(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.splice(this.__controllers.indexOf(a),1);var b=this;v.default.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&I.removeChild(this.domElement);r.default.unbind(window,"keydown",B._keydownHandler,!1);r.default.unbind(window,"resize",this.__resizeHandler);this.saveToLocalStorageIfPossible&&r.default.unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(a){if(void 0!==
this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace;this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);b=new B(b);this.__folders[a]=b;a=e(this,b.domElement);r.default.addClass(a,"folder");return b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=r.default.getOffset(a.__ul).top,
c=0;v.default.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=r.default.getHeight(b))});window.innerHeight-b-20<c?(r.default.addClass(a.domElement,B.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(r.default.removeClass(a.domElement,B.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&v.default.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},onResizeDebounced:v.default.debounce(function(){this.onResize()},
200),remember:function(){v.default.isUndefined(J)&&(J=new D.default,J.domElement.innerHTML=z.default);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;v.default.each(Array.prototype.slice.call(arguments),function(b){0===a.__rememberedObjects.length&&n(a);-1===a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)});this.autoPlace&&k(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;
a.closed=this.closed;0<this.__rememberedObjects.length&&(a.preset=this.preset,a.remembered||(a.remembered={}),a.remembered[this.preset]=q(this));a.folders={};v.default.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()});return a},save:function(){this.load.remembered||(this.load.remembered={});this.load.remembered[this.preset]=q(this);f(this,!1);this.saveToLocalStorageIfPossible()},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=q(this,
!0));this.load.remembered[a]=q(this);this.preset=a;p(this,a,!0);this.saveToLocalStorageIfPossible()},revert:function(a){v.default.each(this.__controllers,function(b){this.getRoot().load.remembered?g(a||this.getRoot(),b):b.setValue(b.initialValue);b.__onFinishChange&&b.__onFinishChange.call(b,b.getValue())},this);v.default.each(this.__folders,function(a){a.revert(a)});a||f(this.getRoot(),!1)},listen:function(a){var b=0===this.__listening.length;this.__listening.push(a);b&&y(this.__listening)},updateDisplay:function(){v.default.each(this.__controllers,
function(a){a.updateDisplay()});v.default.each(this.__folders,function(a){a.updateDisplay()})}});a.exports=B},function(a,d){a.exports={load:function(a,b){b=b||document;var d=b.createElement("link");d.type="text/css";d.rel="stylesheet";d.href=a;b.getElementsByTagName("head")[0].appendChild(d)},inject:function(a,b){var d=b||document;b=document.createElement("style");b.type="text/css";b.innerHTML=a;a=d.getElementsByTagName("head")[0];try{a.appendChild(b)}catch(f){}}}},function(a,d){a.exports='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'},
function(a,d,c){function b(a){return a&&a.__esModule?a:{default:a}}d.__esModule=!0;a=c(10);var e=b(a);a=c(13);var f=b(a);a=c(14);var h=b(a);a=c(11);var g=b(a);a=c(15);var m=b(a);a=c(8);var p=b(a);c=c(5);var n=b(c);d.default=function(a,b,c,d,t){var u=a[b];return n.default.isArray(c)||n.default.isObject(c)?new e.default(a,b,c):n.default.isNumber(u)?n.default.isNumber(c)&&n.default.isNumber(d)?n.default.isNumber(t)?new h.default(a,b,c,d,t):new h.default(a,b,c,d):n.default.isNumber(t)?new f.default(a,
b,{min:c,max:d,step:t}):new f.default(a,b,{min:c,max:d}):n.default.isString(u)?new g.default(a,b):n.default.isFunction(u)?new m.default(a,b,""):n.default.isBoolean(u)?new p.default(a,b):null}},function(a,d){function c(a){setTimeout(a,1E3/60)}d.__esModule=!0;d.default=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||c},function(a,d,c){d.__esModule=!0;var b=(a=c(9))&&a.__esModule?a:{default:a},
e=(c=c(5))&&c.__esModule?c:{default:c};c=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.backgroundElement=document.createElement("div");e.default.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});b.default.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position="fixed";
this.domElement=document.createElement("div");e.default.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var c=this;b.default.bind(this.backgroundElement,"click",function(){c.hide()})}a.prototype.show=function(){var a=this;this.backgroundElement.style.display=
"block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();e.default.defer(function(){a.backgroundElement.style.opacity=1;a.domElement.style.opacity=1;a.domElement.style.webkitTransform="scale(1)"})};a.prototype.hide=function(){var a=this,c=function p(){a.domElement.style.display="none";a.backgroundElement.style.display="none";b.default.unbind(a.domElement,"webkitTransitionEnd",p);b.default.unbind(a.domElement,"transitionend",
p);b.default.unbind(a.domElement,"oTransitionEnd",p)};b.default.bind(this.domElement,"webkitTransitionEnd",c);b.default.bind(this.domElement,"transitionend",c);b.default.bind(this.domElement,"oTransitionEnd",c);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};a.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-b.default.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-
b.default.getHeight(this.domElement)/2+"px"};return a}();d.default=c},function(a,d,c){d=a.exports=c(24)();d.push([a.id,".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid transparent; }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: #000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.color {\n    border-left: 3px solid; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2FA1D6; }\n    .dg .cr.number input[type=text] {\n      color: #2FA1D6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2FA1D6;\n    max-width: 100%; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n",
""])},function(a,d){a.exports=function(){var a=[];a.toString=function(){for(var a=[],c=0;c<this.length;c++){var d=this[c];d[2]?a.push("@media "+d[2]+"{"+d[1]+"}"):a.push(d[1])}return a.join("")};a.i=function(b,d){"string"===typeof b&&(b=[[null,b,""]]);for(var f={},h=0;h<this.length;h++){var g=this[h][0];"number"===typeof g&&(f[g]=!0)}for(h=0;h<b.length;h++)g=b[h],"number"===typeof g[0]&&f[g[0]]||(d&&!g[2]?g[2]=d:d&&(g[2]="("+g[2]+") and ("+d+")"),a.push(g))};return a}}])});
var TWEEN=TWEEN||function(){var a=[];return{getAll:function(){return a},removeAll:function(){a=[]},add:function(d){a.push(d)},remove:function(d){d=a.indexOf(d);-1!==d&&a.splice(d,1)},update:function(d,c){if(0===a.length)return!1;var b=0;for(d=void 0!==d?d:TWEEN.now();b<a.length;)a[b].update(d)||c?b++:a.splice(b,1);return!0}}}();
TWEEN.now="undefined"===typeof window&&"undefined"!==typeof process?function(){var a=process.hrtime();return 1E3*a[0]+a[1]/1E6}:"undefined"!==typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};
TWEEN.Tween=function(a){var d={},c={},b={},e=1E3,f=0,h,g=!1,m=!1,p=0,n=null,l=TWEEN.Easing.Linear.None,k=TWEEN.Interpolation.Linear,q=[],y=null,t=!1,u=null,z=null,x=null;this.to=function(a,b){c=a;void 0!==b&&(e=b);return this};this.start=function(e){TWEEN.add(this);m=!0;t=!1;n=void 0!==e?e:TWEEN.now();n+=p;for(var f in c){if(c[f]instanceof Array){if(0===c[f].length)continue;c[f]=[a[f]].concat(c[f])}void 0!==a[f]&&(d[f]=a[f],!1===d[f]instanceof Array&&(d[f]*=1),b[f]=d[f]||0)}return this};this.stop=
function(){if(!m)return this;TWEEN.remove(this);m=!1;null!==x&&x.call(a,a);this.stopChainedTweens();return this};this.end=function(){this.update(n+e);return this};this.stopChainedTweens=function(){for(var a=0,b=q.length;a<b;a++)q[a].stop()};this.delay=function(a){p=a;return this};this.repeat=function(a){f=a;return this};this.repeatDelay=function(a){h=a;return this};this.yoyo=function(a){g=a;return this};this.easing=function(a){l=a;return this};this.interpolation=function(a){k=a;return this};this.chain=
function(){q=arguments;return this};this.onStart=function(a){y=a;return this};this.onUpdate=function(a){u=a;return this};this.onComplete=function(a){z=a;return this};this.onStop=function(a){x=a;return this};this.update=function(m){var x,A,E;if(m<n)return!0;!1===t&&(null!==y&&y.call(a,a),t=!0);A=(m-n)/e;A=1<A?1:A;E=l(A);for(x in c)if(void 0!==d[x]){var F=d[x]||0,C=c[x];C instanceof Array?a[x]=k(C,E):("string"===typeof C&&(C="+"===C.charAt(0)||"-"===C.charAt(0)?F+parseFloat(C):parseFloat(C)),"number"===
typeof C&&(a[x]=F+(C-F)*E))}null!==u&&u.call(a,E);if(1===A)if(0<f){isFinite(f)&&f--;for(x in b)"string"===typeof c[x]&&(b[x]+=parseFloat(c[x])),g&&(A=b[x],b[x]=c[x],c[x]=A),d[x]=b[x];n=void 0!==h?m+h:m+p}else{null!==z&&z.call(a,a);m=0;for(x=q.length;m<x;m++)q[m].start(n+e);return!1}return!0}};
TWEEN.Easing={Linear:{None:function(a){return a}},Quadratic:{In:function(a){return a*a},Out:function(a){return a*(2-a)},InOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},Cubic:{In:function(a){return a*a*a},Out:function(a){return--a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},Quartic:{In:function(a){return a*a*a*a},Out:function(a){return 1- --a*a*a*a},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)}},Quintic:{In:function(a){return a*a*a*a*a},Out:function(a){return--a*
a*a*a*a+1},InOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},Sinusoidal:{In:function(a){return 1-Math.cos(a*Math.PI/2)},Out:function(a){return Math.sin(a*Math.PI/2)},InOut:function(a){return.5*(1-Math.cos(Math.PI*a))}},Exponential:{In:function(a){return 0===a?0:Math.pow(1024,a-1)},Out:function(a){return 1===a?1:1-Math.pow(2,-10*a)},InOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)}},Circular:{In:function(a){return 1-Math.sqrt(1-
a*a)},Out:function(a){return Math.sqrt(1- --a*a)},InOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},Elastic:{In:function(a){return 0===a?0:1===a?1:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)},Out:function(a){return 0===a?0:1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1},InOut:function(a){if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+
1}},Back:{In:function(a){return a*a*(2.70158*a-1.70158)},Out:function(a){return--a*a*(2.70158*a+1.70158)+1},InOut:function(a){return 1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)}},Bounce:{In:function(a){return 1-TWEEN.Easing.Bounce.Out(1-a)},Out:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},InOut:function(a){return.5>a?.5*TWEEN.Easing.Bounce.In(2*a):.5*TWEEN.Easing.Bounce.Out(2*
a-1)+.5}}};
TWEEN.Interpolation={Linear:function(a,d){var c=a.length-1,b=c*d,e=Math.floor(b),f=TWEEN.Interpolation.Utils.Linear;return 0>d?f(a[0],a[1],b):1<d?f(a[c],a[c-1],c-b):f(a[e],a[e+1>c?c:e+1],b-e)},Bezier:function(a,d){for(var c=0,b=a.length-1,e=Math.pow,f=TWEEN.Interpolation.Utils.Bernstein,h=0;h<=b;h++)c+=e(1-d,b-h)*e(d,h)*a[h]*f(b,h);return c},CatmullRom:function(a,d){var c=a.length-1,b=c*d,e=Math.floor(b),f=TWEEN.Interpolation.Utils.CatmullRom;return a[0]===a[c]?(0>d&&(e=Math.floor(b=c*(1+d))),f(a[(e-
1+c)%c],a[e],a[(e+1)%c],a[(e+2)%c],b-e)):0>d?a[0]-(f(a[0],a[0],a[1],a[1],-b)-a[0]):1<d?a[c]-(f(a[c],a[c],a[c-1],a[c-1],b-c)-a[c]):f(a[e?e-1:0],a[e],a[c<e+1?c:e+1],a[c<e+2?c:e+2],b-e)},Utils:{Linear:function(a,d,c){return(d-a)*c+a},Bernstein:function(a,d){var c=TWEEN.Interpolation.Utils.Factorial;return c(a)/c(d)/c(a-d)},Factorial:function(){var a=[1];return function(d){var c=1;if(a[d])return a[d];for(var b=d;1<b;b--)c*=b;return a[d]=c}}(),CatmullRom:function(a,d,c,b,e){a=.5*(c-a);b=.5*(b-d);var f=
e*e;return(2*d-2*c+a+b)*e*f+(-3*d+3*c-2*a-b)*f+a*e+d}}};(function(a){"function"===typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!==typeof module&&"object"===typeof exports?module.exports=TWEEN:void 0!==a&&(a.TWEEN=TWEEN)})(this);

/* crc: D77C958DF300A5D264EB0ED7A32CBB10 */
