/*
JavaScript LZMA Decompressor (https://github.com/jcmellado/js-lzma)
- Copyright (c) 2017 Juan Mellado (https://github.com/jcmellado)
- Copyright (c) 2017 Marcel Greter (http://github.com/mgreter)
*/;
var LZMA=LZMA||{};
(function(a){a.OutWindow=function(){this._windowSize=0};a.OutWindow.prototype.create=function(b){this._buffer&&this._windowSize===b||(this._buffer=new Uint8Array(b));this._windowSize=b;this._streamPos=this._pos=0};a.OutWindow.prototype.flush=function(){var b=this._pos-this._streamPos;if(0!==b){if(this._stream.writeBytes)this._stream.writeBytes(this._buffer,b);else for(var c=0;c<b;c++)this._stream.writeByte(this._buffer[c]);this._pos>=this._windowSize&&(this._pos=0);this._streamPos=this._pos}};a.OutWindow.prototype.releaseStream=
function(){this.flush();this._stream=null};a.OutWindow.prototype.setStream=function(b){this.releaseStream();this._stream=b};a.OutWindow.prototype.init=function(b){b||(this._pos=this._streamPos=0)};a.OutWindow.prototype.copyBlock=function(b,c){var a=this._pos-b-1;for(0>a&&(a+=this._windowSize);c--;)a>=this._windowSize&&(a=0),this._buffer[this._pos++]=this._buffer[a++],this._pos>=this._windowSize&&this.flush()};a.OutWindow.prototype.putByte=function(b){this._buffer[this._pos++]=b;this._pos>=this._windowSize&&
this.flush()};a.OutWindow.prototype.getByte=function(b){b=this._pos-b-1;0>b&&(b+=this._windowSize);return this._buffer[b]};a.RangeDecoder=function(){};a.RangeDecoder.prototype.setStream=function(b){this._stream=b};a.RangeDecoder.prototype.releaseStream=function(){this._stream=null};a.RangeDecoder.prototype.init=function(){var b=5;this._code=0;for(this._range=-1;b--;)this._code=this._code<<8|this._stream.readByte()};a.RangeDecoder.prototype.decodeDirectBits=function(b){for(var c=0,a;b--;)this._range>>>=
1,a=this._code-this._range>>>31,this._code-=this._range&a-1,c=c<<1|1-a,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return c};a.RangeDecoder.prototype.decodeBit=function(b,c){var a=b[c],d=(this._range>>>11)*a;if((this._code^2147483648)<(d^2147483648))return this._range=d,b[c]+=2048-a>>>5,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0;this._range-=d;this._code-=d;b[c]-=a>>>5;0===(this._range&4278190080)&&
(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return 1};a.initBitModels=function(b,c){for(;c--;)b[c]=1024};a.BitTreeDecoder=function(b){this._models=[];this._numBitLevels=b};a.BitTreeDecoder.prototype.init=function(){a.initBitModels(this._models,1<<this._numBitLevels)};a.BitTreeDecoder.prototype.decode=function(b){for(var c=1,a=this._numBitLevels;a--;)c=c<<1|b.decodeBit(this._models,c);return c-(1<<this._numBitLevels)};a.BitTreeDecoder.prototype.reverseDecode=function(b){for(var c=
1,a=0,d=0,e;d<this._numBitLevels;++d)e=b.decodeBit(this._models,c),c=c<<1|e,a|=e<<d;return a};a.reverseDecode2=function(b,c,a,d){for(var e=1,g=0,k=0,l;k<d;++k)l=a.decodeBit(b,c+e),e=e<<1|l,g|=l<<k;return g};a.LenDecoder=function(){this._choice=[];this._lowCoder=[];this._midCoder=[];this._highCoder=new a.BitTreeDecoder(8);this._numPosStates=0};a.LenDecoder.prototype.create=function(b){for(;this._numPosStates<b;++this._numPosStates)this._lowCoder[this._numPosStates]=new a.BitTreeDecoder(3),this._midCoder[this._numPosStates]=
new a.BitTreeDecoder(3)};a.LenDecoder.prototype.init=function(){var b=this._numPosStates;for(a.initBitModels(this._choice,2);b--;)this._lowCoder[b].init(),this._midCoder[b].init();this._highCoder.init()};a.LenDecoder.prototype.decode=function(b,c){return 0===b.decodeBit(this._choice,0)?this._lowCoder[c].decode(b):0===b.decodeBit(this._choice,1)?8+this._midCoder[c].decode(b):16+this._highCoder.decode(b)};a.Decoder2=function(){this._decoders=[]};a.Decoder2.prototype.init=function(){a.initBitModels(this._decoders,
768)};a.Decoder2.prototype.decodeNormal=function(b){var c=1;do c=c<<1|b.decodeBit(this._decoders,c);while(256>c);return c&255};a.Decoder2.prototype.decodeWithMatchByte=function(b,c){var a=1,d,e;do if(d=c>>7&1,c<<=1,e=b.decodeBit(this._decoders,(1+d<<8)+a),a=a<<1|e,d!==e){for(;256>a;)a=a<<1|b.decodeBit(this._decoders,a);break}while(256>a);return a&255};a.LiteralDecoder=function(){};a.LiteralDecoder.prototype.create=function(b,c){var f;if(!this._coders||this._numPrevBits!==c||this._numPosBits!==b)for(this._numPosBits=
b,this._posMask=(1<<b)-1,this._numPrevBits=c,this._coders=[],f=1<<this._numPrevBits+this._numPosBits;f--;)this._coders[f]=new a.Decoder2};a.LiteralDecoder.prototype.init=function(){for(var b=1<<this._numPrevBits+this._numPosBits;b--;)this._coders[b].init()};a.LiteralDecoder.prototype.getDecoder=function(b,a){return this._coders[((b&this._posMask)<<this._numPrevBits)+((a&255)>>>8-this._numPrevBits)]};a.Decoder=function(){this._outWindow=new a.OutWindow;this._rangeDecoder=new a.RangeDecoder;this._isMatchDecoders=
[];this._isRepDecoders=[];this._isRepG0Decoders=[];this._isRepG1Decoders=[];this._isRepG2Decoders=[];this._isRep0LongDecoders=[];this._posSlotDecoder=[];this._posDecoders=[];this._posAlignDecoder=new a.BitTreeDecoder(4);this._lenDecoder=new a.LenDecoder;this._repLenDecoder=new a.LenDecoder;this._literalDecoder=new a.LiteralDecoder;this._dictionarySizeCheck=this._dictionarySize=-1;this._posSlotDecoder[0]=new a.BitTreeDecoder(6);this._posSlotDecoder[1]=new a.BitTreeDecoder(6);this._posSlotDecoder[2]=
new a.BitTreeDecoder(6);this._posSlotDecoder[3]=new a.BitTreeDecoder(6)};a.Decoder.prototype.setDictionarySize=function(b){if(0>b)return!1;this._dictionarySize!==b&&(this._dictionarySize=b,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096)));return!0};a.Decoder.prototype.setLcLpPb=function(b,a,f){var d=1<<f;if(8<b||4<a||4<f)return!1;this._literalDecoder.create(a,b);this._lenDecoder.create(d);this._repLenDecoder.create(d);this._posStateMask=
d-1;return!0};a.Decoder.prototype.setProperties=function(b){if(!this.setLcLpPb(b.lc,b.lp,b.pb))throw Error("Incorrect stream properties");if(!this.setDictionarySize(b.dictionarySize))throw Error("Invalid dictionary size");};a.Decoder.prototype.decodeHeader=function(b){var a,f,d,e,g;if(13>b.size)return!1;a=b.readByte();f=a%9;a=~~(a/9);d=a%5;a=~~(a/5);g=b.readByte();g|=b.readByte()<<8;g|=b.readByte()<<16;g+=16777216*b.readByte();e=b.readByte();e|=b.readByte()<<8;e|=b.readByte()<<16;e+=16777216*b.readByte();
b.readByte();b.readByte();b.readByte();b.readByte();return{lc:f,lp:d,pb:a,dictionarySize:g,uncompressedSize:e}};a.Decoder.prototype.init=function(){var b=4;this._outWindow.init(!1);a.initBitModels(this._isMatchDecoders,192);a.initBitModels(this._isRep0LongDecoders,192);a.initBitModels(this._isRepDecoders,12);a.initBitModels(this._isRepG0Decoders,12);a.initBitModels(this._isRepG1Decoders,12);a.initBitModels(this._isRepG2Decoders,12);a.initBitModels(this._posDecoders,114);for(this._literalDecoder.init();b--;)this._posSlotDecoder[b].init();
this._lenDecoder.init();this._repLenDecoder.init();this._posAlignDecoder.init();this._rangeDecoder.init()};a.Decoder.prototype.decodeBody=function(b,c,f){var d=0,e=0,g=0,k=0,l=0,m=0,h=0;this._rangeDecoder.setStream(b);this._outWindow.setStream(c);for(this.init();0>f||m<f;)if(b=m&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(d<<4)+b))h=this._literalDecoder.getDecoder(m++,h),h=7<=d?h.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(e)):h.decodeNormal(this._rangeDecoder),
this._outWindow.putByte(h),d=4>d?0:d-(10>d?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,d))h=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,d)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(d<<4)+b)&&(d=7>d?9:11,h=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,d)?c=g:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,d)?c=k:(c=l,l=k),k=g),g=e,e=c),0===h&&(h=2+this._repLenDecoder.decode(this._rangeDecoder,b),d=7>d?8:11);else if(l=k,k=g,g=
e,h=2+this._lenDecoder.decode(this._rangeDecoder,b),d=7>d?7:10,b=this._posSlotDecoder[5>=h?h-2:3].decode(this._rangeDecoder),4<=b)if(c=(b>>1)-1,e=(2|b&1)<<c,14>b)e+=a.reverseDecode2(this._posDecoders,e-b-1,this._rangeDecoder,c);else{if(e+=this._rangeDecoder.decodeDirectBits(c-4)<<4,e+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),0>e){if(-1===e)break;return!1}}else e=b;if(e>=m||e>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(e,h);m+=h;h=this._outWindow.getByte(0)}this._outWindow.flush();
this._outWindow.releaseStream();this._rangeDecoder.releaseStream();return!0};a.Decoder.prototype.setDecoderProperties=function(b){var a,f;if(5>b.size)return!1;a=b.readByte();f=a%9;a=~~(a/9);if(!this.setLcLpPb(f,a%5,~~(a/5)))return!1;a=b.readByte();a|=b.readByte()<<8;a|=b.readByte()<<16;a+=16777216*b.readByte();return this.setDictionarySize(a)};a.decompress=function(b,c,f,d){var e=new a.Decoder;if(!e.setDecoderProperties(b))throw Error("Incorrect lzma stream properties");if(!e.decodeBody(c,f,d))throw Error("Error in lzma data stream");
return f};a.decompressFile=function(b,c){b instanceof ArrayBuffer&&(b=new a.iStream(b));!c&&a.oStream&&(c=new a.oStream);var f=new a.Decoder,d=f.decodeHeader(b),e=d.uncompressedSize;f.setProperties(d);if(!f.decodeBody(b,c,e))throw Error("Error in lzma data stream");return c};a.decode=a.decompressFile})(LZMA);LZMA=LZMA||{};
(function(a){a.iStream=function(b){this.array=new Uint8Array(b);this.size=b.byteLength;this.offset=0};a.iStream.prototype.readByte=function(){return this.array[this.offset++]};a.oStream=function(b){this.size=0;this.buffers=[];b=b||[];for(var c=0,f=b.length;c<f;c++)if(b[c]instanceof a.oStream)for(var d=b[c].buffers,e=0;e<d.length;e++)this.buffers.push(b[c].buffers[e]),this.size+=b[c].buffers[e].length;else this.buffers.push(b[c]),this.size+=b[c].length};a.oStream.prototype.writeBytes=function(b,a){if(a<=
b.byteLength)this.buffers.push(b.slice(0,a));else throw Error("Buffer too small?");this.size+=a};a.oStream.prototype.toUint8Array=function(){var a=this.size,c=this.buffers;if(1==c.length)return c[0];try{for(var f=new Uint8Array(a),d=0,e=0;d<c.length;d++)f.set(c[d],e),e+=c[d].length;c[0]=f;c.length=1;return f}catch(g){console.error("Error allocating Uint8Array of size: ",a),console.error("Message given was: ",g.toString())}return null};a.oStream.prototype.forEach=function(a){for(var c=0;c<this.buffers.length;c++)a.call(this,
this.buffers[c])};a.oStream.prototype.toCodePoints=function(){a.UTF8||this.toUint8Array();return a.UTF8.decode(this.toUint8Array())};a.oStream.prototype.toString=function(){var b=this.buffers,c="";a.UTF8&&(b=[this.toCodePoints()]);for(var f=0,d=b.length;f<d;f++)for(var e=0,g=b[f].length;e<g;e++)c+=String.fromCharCode(b[f][e]);return c}})(LZMA);"use strict";LZMA||importScripts("lzma.js");LZMA.oStream||importScripts("lzma.shim.js");
onmessage=function(a){var b=a.data[0];a=new LZMA.iStream(a.data[1]);var c=new LZMA.oStream;try{LZMA.decompressFile(a,c);var f=c.buffers;a=[];for(c=0;c<f.length;c++)a[c]=f[c].buffer;postMessage([b,f],a)}catch(d){postMessage([b,null,{message:d.message,stack:d.stack}])}};postMessage("ready");
